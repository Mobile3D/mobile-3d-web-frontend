(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports=a.p+"static/media/icon-white.3260c5c7.svg"},172:function(e,t,a){e.exports=a.p+"static/media/icon-blue.5757a8ee.svg"},201:function(e,t,a){e.exports=a(305)},206:function(e,t,a){},302:function(e,t){},305:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),i=(a(206),a(6)),l=a(45),s=a(20),m=a(174),u=a(388),p=a(352),d=a(353),g=a(350),f=a(385),E=a(357),h=a(386),b=a(65),v=a(351),y=a(46),O=a(152),j=a(28),x=a.n(j),w=a(147),k=a.n(w),S=a(12),N=a.n(S),C=a(22),T={getUrl:function(){return"http://"+window.location.host.split(":")[0]+":4000/api/v1"},getDefaultHeaders:function(){return{"Content-Type":"application/json"}},getHeaders:function(){return{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")}},getFileUploadHeaders:function(){return{Authorization:"Bearer "+window.localStorage.getItem("token")}},checkToken:function(e){"ER_TOKEN_EXPIRED"===e.code&&window.location.reload()},checkAuth:function(){if(null!==window.localStorage.getItem("token")||null!==window.sessionStorage.getItem("token"))return!0;return!1}};function I(e){return void 0===e.error?{valid:!0}:"ER_MISSING_PARAMS"===e.error.code?{valid:!1,type:"error",message:"Some parameters are missing."}:"ER_USERNAME_TAKEN"===e.error.code?{valid:!1,type:"error",message:"The username you entered is already taken."}:"ER_USER_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested user could not be found."}:"ER_INVALID_LOGIN"===e.error.code?{valid:!1,type:"error",message:"Your username or password is invalid."}:"ER_UNAUTHORIZED"===e.error.code?{valid:!1,type:"error",message:"You need to be signed in to use this service."}:"ER_TOKEN_EXPIRED"===e.error.code?{valid:!1,type:"error",message:"This session expired. Please reload the page and sign in again."}:"ER_UPLOAD_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested upload could not be found. Please try to reload the page."}:"ER_USER_TO_DELETE_SIGNED_IN"===e.error.code?{valid:!1,type:"error",message:"You cannot delete yourself."}:"ER_TOO_MANY_REQUESTS"===e.error.code?{valid:!1,type:"error",message:"Too many requests. Please wait a few seconds and try again."}:"ER_INTERNAL"===e.error.code?{valid:!1,type:"error",message:"An internal error occured. Please try again in a few seconds."}:{valid:!1,type:"error",message:"An unknown error occured. Please try to reload the page."}}var P={login:function(e){return D.apply(this,arguments)},lookup:function(){return R.apply(this,arguments)},add:function(e){return B.apply(this,arguments)},getAll:function(){return A.apply(this,arguments)},get:function(e){return U.apply(this,arguments)},remove:function(e){return _.apply(this,arguments)}};function D(){return(D=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/auth/login",{method:"POST",headers:T.getDefaultHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/user",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return(B=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return(A=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(){return(U=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var z=r.a.createContext({authorized:!1});var F=a(148),W=a(3),L=a(149),H=a.n(L),G=a(151),q=a.n(G),M=a(82),Y=a.n(M),V=a(86),J=a.n(V),K=a(345),X=a(346),Z=a(348),Q=a(390),$=a(347),ee=a(150),te=a.n(ee),ae={success:H.a,warning:te.a,error:q.a,info:Y.a},ne=Object(O.a)(function(e){return{success:{backgroundColor:K.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:X.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function re(e){var t=ne(),a=e.className,n=e.message,c=e.onClose,o=e.variant,i=Object(F.a)(e,["className","message","onClose","variant"]),l=ae[o];return r.a.createElement($.a,Object.assign({className:Object(W.a)(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(l,{className:Object(W.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Z.a,{key:"close","aria-label":"close",color:"inherit",onClick:c},r.a.createElement(J.a,{className:t.icon}))]},i))}var ce=Object(n.forwardRef)(function(e,t){var a=r.a.useState(!1),c=Object(i.a)(a,2),o=c[0],l=c[1];function s(e,t){"clickaway"!==t&&l(!1)}return Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){l(!0)}}}),r.a.createElement("div",null,r.a.createElement(Q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:6e3,onClose:s},e.printAction?r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message,action:r.a.createElement(g.a,{color:"secondary",onClick:e.handlePrintNowClick},"Print Now")}):r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message})))}),oe=Object(O.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(images/login-bg.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main,width:60,height:60},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function ie(){var e=oe(),t=Object(n.useContext)(z),a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(""),u=Object(i.a)(m,2),O=u[0],j=u[1],w=Object(n.useState)(!1),S=Object(i.a)(w,2),N=S[0],C=S[1],T=Object(n.useState)({error:!1,message:""}),D=Object(i.a)(T,2),R=D[0],B=D[1],A=Object(n.useState)({error:!1,message:""}),U=Object(i.a)(A,2),_=U[0],F=U[1],W=Object(n.useState)({type:"info",message:""}),L=Object(i.a)(W,2),H=L[0],G=L[1],q=Object(n.useRef)();function M(e){return x.a.isEmpty(e)?(B({error:!0,message:"Please enter your username."}),!1):(B({error:!1,message:""}),!0)}function Y(e){return x.a.isEmpty(e)?(F({error:!0,message:"Please enter your password."}),!1):(F({error:!1,message:""}),!0)}return void 0===t.authorized?r.a.createElement("div",null):t.authorized?r.a.createElement(l.a,{exact:!0,to:"/"}):r.a.createElement(v.a,{container:!0,component:"main",className:e.root},r.a.createElement(p.a,null),r.a.createElement(v.a,{item:!0,xs:!1,sm:5,md:7,lg:8,className:e.image}),r.a.createElement(v.a,{item:!0,xs:12,sm:7,md:5,lg:4,component:b.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(d.a,{className:e.avatar},r.a.createElement("img",{src:k.a,alt:"Logo",width:27})),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign In"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var t=!0;M(o)||(t=!1),Y(O)||(t=!1),t&&P.login({username:o,password:O,remember:N}).then(function(e){var t=I(e);t.valid?(window.localStorage.setItem("token",e.token),window.location.reload()):(G({type:t.type,message:t.message}),q.current.handleOpen())})},noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"txtUsername",label:"Username",name:"txtUsername",autoComplete:"username",autoFocus:!0,onChange:function(e){s(e.target.value),M(e.target.value)},value:o,error:R.error,helperText:R.message}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"txtPassword",label:"Password",type:"password",id:"txtPassword",autoComplete:"current-password",onChange:function(e){j(e.target.value),Y(e.target.value)},value:O,error:_.error,helperText:_.message}),r.a.createElement(E.a,{control:r.a.createElement(h.a,{color:"primary",onChange:function(e){C(!N)},value:N}),label:"Remember me"}),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In")))),r.a.createElement(ce,{message:H.message,variant:H.type,ref:q}))}var le=a(15),se=a(108),me=a(364),ue=a(365),pe=a(161),de=a.n(pe),ge=a(160),fe=a.n(ge),Ee=a(358),he=a(356),be=a(362),ve=a(359),ye=a(363),Oe=a(361),je=a(360),xe=a(156),we=a.n(xe),ke=a(157),Se=a.n(ke),Ne=a(51),Ce=a.n(Ne),Te=a(89),Ie=a.n(Te),Pe=a(88),De=a.n(Pe),Re=a(90),Be=a.n(Re),Ae=a(61),Ue=a.n(Ae),_e=a(158),ze=a.n(_e),Fe=a(159),We=a.n(Fe),Le=r.a.createContext({themeStyle:"light",setThemeStyle:function(){}}),He=Object(O.a)(function(e){return{list:{width:250},orangeAvatar:{margin:10,color:"#fff",backgroundColor:we.a[500]},pinkAvatar:{margin:10,color:"#fff",backgroundColor:Se.a[400]},link:{textDecoration:"none",color:e.palette.text.primary,"&:focus":{color:e.palette.text.primary},"&:active":{color:e.palette.text.primary}}}});function Ge(e){var t=He(),a=Object(n.useContext)(Le),c=function(){localStorage.removeItem("token"),window.location.reload()},o=function(){"light"===a.themeStyle?(a.setThemeStyle("dark"),window.localStorage.setItem("themeMode","dark")):(a.setThemeStyle("light"),window.localStorage.setItem("themeMode","light"))};return r.a.createElement(z.Consumer,null,function(n){return r.a.createElement(Ee.a,{open:e.open,onClose:e.onDrawerClose},r.a.createElement("div",{tabIndex:0,role:"button"},r.a.createElement("div",{className:t.list},r.a.createElement(he.a,null,r.a.createElement(ve.a,{button:!0},r.a.createElement(je.a,null,r.a.createElement(d.a,{className:t.pinkAvatar},void 0===n.firstname?"":n.firstname.substr(0,1))),r.a.createElement(Oe.a,{primary:n.firstname+" "+n.lastname}))),r.a.createElement(be.a,null),r.a.createElement(he.a,null,r.a.createElement(s.b,{to:"/",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"home"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(Oe.a,{primary:"Home"}))),r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"controls"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(De.a,null)),r.a.createElement(Oe.a,{primary:"Controls"}))),r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"files"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(Ie.a,null)),r.a.createElement(Oe.a,{primary:"Files"})))),r.a.createElement(be.a,null),r.a.createElement(he.a,null,r.a.createElement(ve.a,{button:!0,onClick:o},r.a.createElement(ye.a,null,"dark"===a.themeStyle?r.a.createElement(ze.a,null):r.a.createElement(We.a,null)),r.a.createElement(Oe.a,{primary:"Dark Mode"}))),r.a.createElement(be.a,null),r.a.createElement(he.a,null,r.a.createElement(s.b,{to:"/settings",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"settings"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(Ue.a,null)),r.a.createElement(Oe.a,{primary:"Settings"}))),r.a.createElement(ve.a,{button:!0,onClick:c},r.a.createElement(ye.a,null,r.a.createElement(Be.a,null)),r.a.createElement(Oe.a,{primary:"Logout"}))))))})}var qe=Object(O.a)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},search:Object(le.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(se.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(se.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(9),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(le.a)({paddingTop:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(10),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}}),link:{textDecoration:"none",color:"#ffffff","&:focus":{color:"#ffffff"},"&:active":{color:"#ffffff"}}}});function Me(e){var t=qe(),a=Object(n.useState)(!1),c=Object(i.a)(a,2),o=c[0],l=c[1];return r.a.createElement("div",{className:t.root},r.a.createElement(me.a,{position:"fixed"},r.a.createElement(ue.a,null,void 0!==e.backTo?r.a.createElement(s.b,{to:"settings"===e.backTo?"/settings":"accountsettings"===e.backTo?"/settings/accounts":"/",className:t.link},r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Back"},r.a.createElement(fe.a,null))):r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){l(!0)}},r.a.createElement(de.a,null)),r.a.createElement(y.a,{variant:"h6",color:"inherit",className:t.grow},e.title))),r.a.createElement(Ge,{open:o,onDrawerClose:function(){l(!1)},selectedPage:e.selectedPage}))}function Ye(e){return r.a.createElement("div",null,r.a.createElement(Me,{title:e.navTitle,selectedPage:"not",backTo:e.backTo}),e.children)}var Ve=a(366),Je=a(369),Ke=a(367),Xe=a(368),Ze=a(62),Qe=a.n(Ze),$e=a(162),et=a.n($e),tt=a(91),at=a.n(tt),nt=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:400,height:250},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function rt(e){return"print"===e.action?r.a.createElement(Qe.a,{color:"primary",style:{fontSize:80}}):"home"===e.action?r.a.createElement(Ce.a,{color:"primary",style:{fontSize:80}}):"upload"===e.action?r.a.createElement(et.a,{color:"primary",style:{fontSize:80}}):"files"===e.action?r.a.createElement(Ie.a,{color:"primary",style:{fontSize:80}}):"control"===e.action?r.a.createElement(De.a,{color:"primary",style:{fontSize:80}}):"logout"===e.action?r.a.createElement(Be.a,{color:"primary",style:{fontSize:80}}):"settings"===e.action?r.a.createElement(Ue.a,{color:"primary",style:{fontSize:80}}):r.a.createElement(at.a,{color:"primary",style:{fontSize:80}})}function ct(e){var t=nt();return r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{className:t.cardActionArea},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(rt,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h5",component:"h5",align:"center"},e.title),r.a.createElement(y.a,{className:t.pos,variant:"subtitle1",component:"h6",color:"textSecondary",align:"center"},e.description)),r.a.createElement(Je.a,null)))}var ot=a(371),it=a(164),lt=a.n(it),st=a(63),mt=a.n(st),ut=a(165),pt=a.n(ut),dt=a(389),gt={setInfo:function(e){return ft.apply(this,arguments)},getInfo:function(){return Et.apply(this,arguments)},getStatus:function(){return ht.apply(this,arguments)},getProgress:function(){return bt.apply(this,arguments)}};function ft(){return(ft=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Et(){return(Et=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ht(){return(ht=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/status",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bt(){return(bt=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/progress",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vt=a(370),yt=Object(O.a)(function(e){return{root:{textAlign:"center",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"}}});function Ot(){var e=yt();return r.a.createElement("div",{className:e.root},r.a.createElement(vt.a,null))}var jt=Object(O.a)(function(e){var t;return{root:(t={width:600},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"textAlign","center"),t),controls:{alignItems:"center"},playIcon:{height:38,width:38},buttonGroup:{marginTop:e.spacing(3)},link:{textDecoration:"none",color:"#0078d7","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function xt(e){var t=jt(),a=Object(n.useState)({id:window.sessionStorage.getItem("print_file_id"),name:window.sessionStorage.getItem("print_file_name")}),c=Object(i.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)({}),u=Object(i.a)(m,2),p=u[0],d=u[1],f=Object(n.useState)(""),E=Object(i.a)(f,2),h=E[0],b=E[1],v=Object(n.useState)(!1),O=Object(i.a)(v,2),j=O[0],x=O[1];Object(n.useEffect)(function(){gt.getStatus().then(function(e){d(e),x(!0)})},[]);e.socket.on("printLog",function(e){}),e.socket.on("printStatus",function(e){e!==h&&(b(e),"connected"===e?d({connected:!0,ready:!0,busy:p.busy,connecting:!1}):"connecting"===e?d({connected:p.connected,ready:p.ready,busy:p.busy,connecting:!0}):"ready"===e?d({connected:p.connected,ready:!0,busy:p.busy,connecting:!1}):"printing"===e?d({connected:p.connected,ready:!1,busy:p.busy,connecting:!1}):"completed"===e?(window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null})):"stopped"===e?d({connected:p.connected,ready:!0,busy:p.busy,connecting:!1}):"disconnected"===e&&d({connected:!1,ready:!1,busy:p.busy,connecting:!1}))});return j?r.a.createElement("div",{className:t.root},r.a.createElement(Ve.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(Xe.a,{className:t.content},r.a.createElement(y.a,{component:"h5",variant:"h5"},e.printer.info.name),r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:p.connected||p.connecting?"textSecondary":"error"},p.connected&&!p.connecting?"Connected":"Not Connected",p.connecting?"Connecting...":""),r.a.createElement(y.a,{component:"span",variant:"subtitle1"},p.connected?r.a.createElement("span",null,"\xa0-\xa0"):r.a.createElement("span",null)),r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:"stopping"===h?"error":"primary"},p.connected?p.ready?"Ready":"stopping"===h?"Stopping...":"Printing...":r.a.createElement("div",null)),r.a.createElement(y.a,{variant:"subtitle1",color:null!==o.id?"initial":"error"},p.connected&&null===o.id?"No file loaded":o.name),p.connected&&null===o.id?r.a.createElement(ot.a,{className:t.buttonGroup,color:"primary","aria-label":"outlined primary button group"},r.a.createElement(g.a,null,r.a.createElement(s.b,{to:"/files",className:t.link},"Choose From Files"))):r.a.createElement("div",null)),r.a.createElement("div",{className:t.controls},!p.connected||p.ready&&null!==o.id?r.a.createElement(dt.a,{title:"Remove File"},r.a.createElement("span",null,r.a.createElement(Z.a,{className:t.button,onClick:function(){window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null})},"aria-label":"Delete"},r.a.createElement(mt.a,{fontSize:"small"})))):r.a.createElement("div",null),r.a.createElement(dt.a,{title:"Start Printing"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"play",disabled:!(p.connected&&p.ready&&null!==o.id),onClick:function(t){e.socket.emit("printFile",window.sessionStorage.getItem("print_file_id")),d({connected:p.connected,ready:!1,busy:p.busy,connecting:!1})}},r.a.createElement(lt.a,{className:t.playIcon})))),r.a.createElement(dt.a,{title:"Cancel"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"stop",disabled:!(p.connected&&!p.ready)||"stopping"===h,onClick:function(t){e.socket.emit("cancelPrint")}},r.a.createElement(pt.a,null)))))))):r.a.createElement("div",null,r.a.createElement(Ot,null))}var wt=a(372),kt=a(166),St=a.n(kt),Nt=a(307),Ct=a(373),Tt={add:function(e){return It.apply(this,arguments)},getAll:function(){return Pt.apply(this,arguments)},get:function(e){return Dt.apply(this,arguments)},remove:function(e){return Rt.apply(this,arguments)}};function It(){return(It=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{method:"POST",headers:T.getFileUploadHeaders(),body:t}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pt(){return(Pt=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dt(){return(Dt=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(){return(Rt=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(e){if(e.size%4096!==0&&0!==e.size&&-1!==e.name.indexOf(".")){var t=e.name.split("."),a=t[t.length-1].toLowerCase();return"gcode"===a||"gco"===a||"gc"===a||"g"===a}}var At=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},icon:{fontSize:125}}}),Ut=r.a.forwardRef(function(e,t){return r.a.createElement(Nt.a,Object.assign({direction:"up",ref:t},e))}),_t=Object(n.forwardRef)(function(e,t){var a=At(),c=Object(n.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],m=Object(n.useState)(null),u=Object(i.a)(m,2),p=u[0],d=u[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),h=E[0],b=E[1];Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){s(!0)},setUpload:function(t){Bt(t)?d(t):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}}});var v=function(){d(null),s(!1)};return r.a.createElement("div",{onDrop:function(t){t.preventDefault(),Bt(t.dataTransfer.files[0])?d(t.dataTransfer.files[0]):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}},r.a.createElement(wt.a,{fullScreen:!0,open:l,onClose:v,TransitionComponent:Ut},r.a.createElement(me.a,{className:a.appBar},r.a.createElement(ue.a,null,r.a.createElement(Z.a,{edge:"start",color:"inherit",onClick:v,"aria-label":"close"},r.a.createElement(J.a,null)),r.a.createElement(y.a,{variant:"h6",className:a.title},"Upload Files"),r.a.createElement(g.a,{color:"inherit",onClick:function(){if(null!==p){var t=new FormData;t.append("file",p),b(!0),Tt.add(t).then(function(t){I(t).valid?e.onUploadFinish({type:"success",message:'File "'+t.originalname+'" successfully uploaded.'}):e.onUploadFinish({type:"error",message:"Files of this type cannot be uploaded."}),b(!1),v()})}},disabled:h},"UPLOAD"))),null!==p?r.a.createElement(he.a,null,r.a.createElement(ve.a,{button:!0},r.a.createElement(Oe.a,{primary:p.name,secondary:p.size/1e3+" KB"})),h?r.a.createElement(Ct.a,{className:a.linearProgress}):r.a.createElement(be.a,null)):r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{align:"center",color:"textSecondary",gutterBottom:!0},r.a.createElement(St.a,{className:a.icon})),r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textSecondary",gutterBottom:!0},"Drop your GCODE file here"))))}),zt=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function Ft(e){var t=zt(),a=Object(n.useState)({type:"info",message:""}),c=Object(i.a)(a,2),o=c[0],l=c[1],m=Object(n.useRef)(),u=Object(n.useRef)(),p=Object(n.useRef)();return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),u.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(Ye,{navTitle:"Home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Welcome Back, ",e.user.firstname+" "+e.user.lastname,".")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(xt,{printer:e.printer,socket:e.socket}))))),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(ct,{action:"control",title:"Controls",description:"Print files, control the printer, move the axis"}))),r.a.createElement(v.a,{item:!0},r.a.createElement("div",{onClick:function(){p.current.click()}},r.a.createElement(ct,{action:"upload",title:"Upload",description:"Add files to the printing list"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(ct,{action:"files",title:"Files",description:"View uploaded files, load files, print them again"})))))),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(u.current.handleOpen(),u.current.setUpload(e.target.files[0]))},type:"file",ref:p}),r.a.createElement(_t,{ref:u,onUploadFinish:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()},onBeforeUploadError:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()}}),r.a.createElement(ce,{message:o.message,variant:o.type,ref:m}))))}var Wt=a(168),Lt=a.n(Wt),Ht=a(167),Gt=a.n(Ht),qt=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:300,height:180},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function Mt(e){return"accounts"===e.action?r.a.createElement(Gt.a,{color:"primary",style:{fontSize:60}}):"settings"===e.action?r.a.createElement(Ue.a,{color:"primary",style:{fontSize:60}}):"connection"===e.action?r.a.createElement(Lt.a,{color:"primary",style:{fontSize:60}}):"info"===e.action?r.a.createElement(Y.a,{color:"primary",style:{fontSize:60}}):"printer"===e.action?r.a.createElement(Qe.a,{color:"primary",style:{fontSize:60}}):r.a.createElement(at.a,{color:"primary",style:{fontSize:60}})}function Yt(e){var t=qt();return r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{className:t.cardActionArea},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(Mt,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h6",component:"h6",align:"center"},e.title)),r.a.createElement(Je.a,null)))}var Vt=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function Jt(){var e=Vt();return r.a.createElement(Ye,{navTitle:"Settings",backTo:"home"},r.a.createElement("div",{className:e.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Settings")),r.a.createElement(v.a,{container:!0,className:e.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:e.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/connection",className:e.link},r.a.createElement(Yt,{action:"connection",title:"Connection"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/printer",className:e.link},r.a.createElement(Yt,{action:"printer",title:"Printer"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/accounts",className:e.link},r.a.createElement(Yt,{action:"accounts",title:"Accounts"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/info",className:e.link},r.a.createElement(Yt,{action:"info",title:"Info"})))))))}var Kt=a(378),Xt=a(382),Zt=a(381),Qt=a(379),$t=a(380),ea=a(383),ta=a(93),aa=a.n(ta),na=a(387),ra=a(377),ca=a(375),oa=a(376),ia=a(374);function la(e){return r.a.createElement("div",null,r.a.createElement(wt.a,{open:e.open,onClose:e.onCancelDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ia.a,{id:"alert-dialog-title"},"Are you sure you want to delete the ",e.deleteType,' "',e.deleteItemName,'"?'),r.a.createElement(ca.a,null,r.a.createElement(oa.a,{id:"alert-dialog-description"},"This action cannot be undone.")),r.a.createElement(ra.a,null,r.a.createElement(g.a,{onClick:e.onConfirmDelete,color:"primary"},"Yes"),r.a.createElement(g.a,{onClick:e.onCancelDelete,autoFocus:!0},"No"))))}var sa=r.a.createContext({new:!1,username:""}),ma=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},centering:{display:"flex",flexDirection:"column",alignItems:"center"},button:{margin:e.spacing(1)},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function ua(e){var t=ma(),a=Object(n.useContext)(sa),c=Object(n.useState)([]),o=Object(i.a)(c,2),l=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(i.a)(u,2),d=p[0],g=p[1],f=Object(n.useState)({type:"info",message:""}),E=Object(i.a)(f,2),h=E[0],v=E[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),x=j[0],w=j[1],k=Object(n.useState)(0),S=Object(i.a)(k,2),N=S[0],C=S[1],T=Object(n.useState)(!1),D=Object(i.a)(T,2),R=D[0],B=D[1],A=Object(n.useState)(!1),U=Object(i.a)(A,2),_=U[0],z=U[1],F=Object(n.useRef)();Object(n.useEffect)(function(){P.getAll().then(function(e){var t=I(e);t.valid?(m(e),a.new&&(v({type:"success",message:'User "'+a.username+'" successfully added.'}),a.new=!1,a.username="",F.current.handleOpen())):(v({type:t.type,message:t.message}),F.current.handleOpen()),g(!0),z(!1)})},[a.new,a.username,_]);return r.a.createElement(Ye,{navTitle:"Account Settings",backTo:"settings"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Account Settings")),r.a.createElement("div",{className:t.tableRoot},r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Accounts"),d&&l.length>0?r.a.createElement(b.a,{className:t.table},r.a.createElement(Kt.a,null,r.a.createElement(Qt.a,null,r.a.createElement($t.a,null,r.a.createElement(Zt.a,null,"Username"),r.a.createElement(na.a,{xsDown:!0},r.a.createElement(Zt.a,null,"Firstname"),r.a.createElement(Zt.a,null,"Lastname")),r.a.createElement(Zt.a,{align:"right"},"Actions"))),r.a.createElement(Xt.a,null,l.map(function(e){return r.a.createElement($t.a,{key:e._id},r.a.createElement(Zt.a,{component:"th",scope:"row"},e.username),r.a.createElement(na.a,{xsDown:!0},r.a.createElement(Zt.a,null,e.firstname),r.a.createElement(Zt.a,null,e.lastname)),r.a.createElement(Zt.a,{align:"right"},r.a.createElement(dt.a,{title:"Delete"},r.a.createElement(Z.a,{onClick:function(){return function(e){C(e._id),w(e.username),B(!0)}(e)},"aria-label":"Delete"},r.a.createElement(mt.a,{fontSize:"small"})))))})))):r.a.createElement(Ot,null),r.a.createElement(s.b,{to:"/settings/accounts/add",className:t.link},r.a.createElement(ea.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab},r.a.createElement(aa.a,null),"Add User"))),r.a.createElement(la,{open:R,deleteItemName:x,deleteType:"user",onCancelDelete:function(){B(!1)},onConfirmDelete:function(){B(!1),P.remove(N).then(function(e){var t=I(e);t.valid?z(!0):(v({type:t.type,message:t.message}),F.current.handleOpen())})}}),r.a.createElement(ce,{message:h.message,variant:h.type,ref:F}))}var pa=a(354),da={setConnection:function(e){return ga.apply(this,arguments)},getConnection:function(){return fa.apply(this,arguments)}};function ga(){return(ga=Object(C.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fa(){return(fa=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ea=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function ha(){var e=Ea(),t=Object(n.useRef)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),u=m[0],d=m[1],E=Object(n.useState)({error:!1,message:""}),h=Object(i.a)(E,2),v=h[0],O=h[1],j=Object(n.useState)({error:!1,message:""}),w=Object(i.a)(j,2),k=w[0],S=w[1],N=Object(n.useState)({type:"info",message:""}),C=Object(i.a)(N,2),T=C[0],P=C[1];function D(e){return x.a.isEmpty(e)?(O({error:!0,message:"Please enter a port."}),!1):(O({error:!1,message:""}),!0)}function R(e){return x.a.isEmpty(e)?(S({error:!0,message:"Please enter a valid baudrate."}),!1):x.a.isNumeric(e)?(S({error:!1,message:""}),!0):(S({error:!0,message:"Baudrate must be a number."}),!1)}return Object(n.useEffect)(function(){da.getConnection().then(function(e){I(e)&&(l(e.port),d(e.baudrate))})},[]),r.a.createElement(Ye,{navTitle:"Connection Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(p.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Connection"),r.a.createElement(b.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var a=!0;D(o)||(a=!1),R(u)||(a=!1),a&&da.setConnection({port:o,baudrate:u}).then(function(e){var a=I(e);a.valid?(P({type:"success",message:"Connection details successfully set. The server will restart now."}),t.current.handleOpen(),setTimeout(function(){console.log("restarting..."),window.location.reload()},2e3)):(P({type:a.type,message:a.message}),t.current.handleOpen())})}},r.a.createElement(pa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtPort",autoComplete:"port",margin:"normal",label:"Port",variant:"outlined",value:o,onChange:function(e){l(e.target.value),D(e.target.value)},error:v.error,helperText:v.message})),r.a.createElement(pa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtBaudRate",autoComplete:"Baudrate",margin:"normal",label:"Baudrate",variant:"outlined",value:u,onChange:function(e){d(e.target.value),R(e.target.value)},error:k.error,helperText:k.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save")))),r.a.createElement(ce,{message:T.message,variant:T.type,ref:t}))}var ba=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function va(){var e=ba(),t=Object(n.useContext)(sa),a=Object(n.useRef)(),c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],m=o[1],u=Object(n.useState)(""),d=Object(i.a)(u,2),E=d[0],h=d[1],v=Object(n.useState)(""),O=Object(i.a)(v,2),j=O[0],w=O[1],k=Object(n.useState)(""),S=Object(i.a)(k,2),N=S[0],C=S[1],T=Object(n.useState)(""),D=Object(i.a)(T,2),R=D[0],B=D[1],A=Object(n.useState)({error:!1,message:""}),U=Object(i.a)(A,2),_=U[0],z=U[1],F=Object(n.useState)({error:!1,message:""}),W=Object(i.a)(F,2),L=W[0],H=W[1],G=Object(n.useState)({error:!1,message:""}),q=Object(i.a)(G,2),M=q[0],Y=q[1],V=Object(n.useState)({error:!1,message:""}),J=Object(i.a)(V,2),K=J[0],X=J[1],Z=Object(n.useState)({type:"info",message:""}),Q=Object(i.a)(Z,2),$=Q[0],ee=Q[1];function te(e){return x.a.isEmpty(e)?(z({error:!0,message:"Please enter a firstname."}),!1):(z({error:!1,message:""}),!0)}function ae(e){return x.a.isEmpty(e)?(H({error:!0,message:"Please enter a lastname."}),!1):(H({error:!1,message:""}),!0)}function ne(e){return x.a.isEmpty(e)?(Y({error:!0,message:"Please enter a username."}),!1):(Y({error:!1,message:""}),!0)}function re(e){return x.a.isEmpty(e)?(X({error:!0,message:"Please enter a password."}),!1):(X({error:!1,message:""}),!0)}return s?r.a.createElement(l.a,{exact:!0,to:"/settings/accounts"}):r.a.createElement(Ye,{navTitle:"Account Settings",backTo:"accountsettings"},r.a.createElement("main",{className:e.main},r.a.createElement(p.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Add Account"),r.a.createElement(b.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;te(E)||(n=!1),ae(j)||(n=!1),ne(N)||(n=!1),re(R)||(n=!1),n&&P.add({firstname:E,lastname:j,username:N,password:R,admin:!0}).then(function(e){var n=I(e);n.valid?(t.new=!0,t.username=e.username,m({success:!0,username:e.username})):(ee({type:n.type,message:n.message}),a.current.handleOpen())})}},r.a.createElement(pa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtFirstname",autoComplete:"firstname",margin:"normal",label:"Firstname",variant:"outlined",value:E,onChange:function(e){h(e.target.value),te(e.target.value)},error:_.error,helperText:_.message})),r.a.createElement(pa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtLastname",autoComplete:"Lastname",margin:"normal",label:"Lastname",variant:"outlined",value:j,onChange:function(e){w(e.target.value),ae(e.target.value)},error:L.error,helperText:L.message})),r.a.createElement(pa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtUsername",autoComplete:"username",margin:"normal",label:"Username",variant:"outlined",value:N,onChange:function(e){C(e.target.value),ne(e.target.value)},error:M.error,helperText:M.message})),r.a.createElement(pa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"password",name:"txtPassword",autoComplete:"password",margin:"normal",label:"Password",variant:"outlined",value:R,onChange:function(e){B(e.target.value),re(e.target.value)},error:K.error,helperText:K.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save"))),r.a.createElement("div",{className:e.centering},r.a.createElement(g.a,{className:e.button,onClick:function(){window.history.back()}},"Back"))),r.a.createElement(ce,{message:$.message,variant:$.type,ref:a}))}var ya=a(169),Oa=a.n(ya),ja=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function xa(e){var t=ja(),a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],p=m[1],d=Object(n.useState)({type:"info",message:""}),g=Object(i.a)(d,2),f=g[0],E=g[1],h=Object(n.useState)(""),v=Object(i.a)(h,2),O=v[0],j=v[1],x=Object(n.useState)(0),w=Object(i.a)(x,2),k=w[0],S=w[1],N=Object(n.useState)(!1),C=Object(i.a)(N,2),T=C[0],P=C[1],D=Object(n.useRef)(),R=Object(n.useRef)(),B=Object(n.useRef)();Object(n.useEffect)(function(){A()},[]);var A=function(){Tt.getAll().then(function(e){I(e).valid&&l(e),p(!0)})};return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),R.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(Ye,{navTitle:"Files",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Files")),r.a.createElement("div",{className:t.tableRoot},u&&0===o.length?r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Upload some files to print them."):u&&o.length>0?r.a.createElement(b.a,{className:t.table},r.a.createElement(Kt.a,null,r.a.createElement(Qt.a,null,r.a.createElement($t.a,null,r.a.createElement(Zt.a,null,"Name"),r.a.createElement(na.a,{xsDown:!0},r.a.createElement(Zt.a,null,"Size")),r.a.createElement(Zt.a,{align:"right"},"Actions"))),r.a.createElement(Xt.a,null,o.map(function(e){return r.a.createElement($t.a,{key:e._id},r.a.createElement(Zt.a,{component:"th",scope:"row"},e.originalname),r.a.createElement(na.a,{xsDown:!0},r.a.createElement(Zt.a,null,e.size/1e3+" KB")),r.a.createElement(Zt.a,{align:"right"},r.a.createElement(dt.a,{title:"Print"},r.a.createElement(Z.a,{className:t.button,"aria-label":"Print",onClick:function(){return t=e._id,a=e.originalname,window.sessionStorage.setItem("print_file_id",t),window.sessionStorage.setItem("print_file_name",a),E({type:"info",message:'"'+a+'" is ready to be printed. You can make some adjustments in the control panel.',printAction:!0}),void D.current.handleOpen();var t,a}},r.a.createElement(Qe.a,{fontSize:"small"}))),r.a.createElement(dt.a,{title:"Download"},r.a.createElement(Z.a,{className:t.button,"aria-label":"Download"},r.a.createElement(Oa.a,{fontSize:"small"}))),r.a.createElement(dt.a,{title:"Delete"},r.a.createElement(Z.a,{className:t.button,onClick:function(){return function(e){S(e._id),j(e.originalname),P(!0)}(e)},"aria-label":"Delete"},r.a.createElement(mt.a,{fontSize:"small"})))))})))):u?"":r.a.createElement(Ot,null),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(R.current.handleOpen(),R.current.setUpload(e.target.files[0]))},type:"file",ref:B}),r.a.createElement(ea.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab,onClick:function(e){B.current.click()}},r.a.createElement(aa.a,null),"Upload File")),r.a.createElement(la,{open:T,deleteItemName:O,deleteType:"file",onCancelDelete:function(){P(!1)},onConfirmDelete:function(){P(!1),Tt.remove(k).then(function(e){var t=I(e);t.valid?A():(E({type:t.type,message:t.message}),D.current.handleOpen())})}}),r.a.createElement(_t,{ref:R,onUploadFinish:function(e){"success"!==e.type&&(E({type:e.type,message:e.message}),D.current.handleOpen()),A()},onBeforeUploadError:function(e){E({type:e.type,message:e.message}),D.current.handleOpen()}}),r.a.createElement(ce,{message:f.message,variant:f.type,printAction:f.printAction,handlePrintNowClick:function(){e.socket.emit("printFile",window.sessionStorage.getItem("print_file_id"))},ref:D}))))}var wa=a(384),ka=a(94),Sa=a.n(ka),Na=a(95),Ca=a.n(Na),Ta=a(110),Ia=a.n(Ta),Pa=a(109),Da=a.n(Pa),Ra=a(170),Ba=a.n(Ra),Aa=a(171),Ua=a.n(Aa),_a=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)}}});function za(e){var t=_a(),a=Object(n.useState)(1),c=Object(i.a)(a,2),o=c[0],l=c[1],s=function(e){l(e)},m=function(t){e.socket.emit(t,o)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{container:!0,item:!0,sm:6,spacing:1},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveForward")}},r.a.createElement(Da.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveLeft")}},r.a.createElement(Ba.a,null)),r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveXYHome")}},r.a.createElement(Ce.a,null)),r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveRight")}},r.a.createElement(Ua.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveBack")}},r.a.createElement(Ia.a,null))))),r.a.createElement(v.a,{container:!0,item:!0,spacing:1,sm:6},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveUp")}},r.a.createElement(Da.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveZHome")}},r.a.createElement(Ce.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",className:t.button,onClick:function(){return m("moveDown")}},r.a.createElement(Ia.a,null)))))),r.a.createElement(v.a,{className:t.lengthSet,container:!0,justify:"center"},r.a.createElement(ot.a,{size:"large",variant:"contained","aria-label":"large contained button group"},r.a.createElement(g.a,{color:1===o?"primary":"default",onClick:function(){return s(1)}},"1mm"),r.a.createElement(g.a,{color:10===o?"primary":"default",onClick:function(){return s(10)}},"10mm"),r.a.createElement(g.a,{color:100===o?"primary":"default",onClick:function(){return s(100)}},"100mm"))))}var Fa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)},settingsButton:{marginBottom:e.spacing(1)},card:Object(le.a)({},e.breakpoints.down("xs"),{width:"90vw"})}});function Wa(e){var t=Fa(),a=Object(n.useState)(0),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(1),m=Object(i.a)(s,2),u=m[0],p=m[1],d=Object(n.useState)(1),E=Object(i.a)(d,2),h=E[0],b=E[1],O=Object(n.useState)(0),j=Object(i.a)(O,2),x=j[0],w=j[1],k=function(t){l(t),0===t?e.socket.emit("fanOff"):e.socket.emit("fanOn",u)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{item:!0},r.a.createElement(Ve.a,{className:t.card},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Fan"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"fanSpeed",className:t.textField,label:"Speed (%)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(t){t.target.value>0&&t.target.value<=100&&(p(t.target.value),1===o&&e.socket.emit("fanOn",u))},value:u})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",color:1===o?"primary":"default",onClick:function(){return k(1)},fullWidth:!0},"On")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",color:0===o?"primary":"default",onClick:function(){return k(0)},fullWidth:!0},"Off"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(Ve.a,{className:t.card},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Extrude/Retract"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"length",className:t.textField,label:"Length (mm)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){e.target.value>0&&e.target.value<=100&&b(e.target.value)},value:h})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){e.socket.emit("extrude",h)}},"Extrude")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){e.socket.emit("retract",h)}},"Retract"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(Ve.a,{className:t.card},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Temperature"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"temp",className:t.textField,label:"Temperature (\xb0C)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value?p(u):e.target.value>=0&&e.target.value<=200&&w(e.target.value)},value:x})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){e.socket.emit("setHeatbedTemperature",x)}},"Set Heatbed")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){e.socket.emit("setHotendTemperature",x)}},"Set Hotend")))))))}var La=a(111),Ha=Object(O.a)(function(e){var t;return{root:(t={width:800},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"flexGrow",1),Object(le.a)(t,"margin",0),Object(le.a)(t,"textAlign","center"),t),title:{marginBottom:e.spacing(3)},gridItem:Object(le.a)({},e.breakpoints.down("xs"),{width:"100%"}),button:Object(le.a)({},e.breakpoints.up("sm"),{padding:"15.5px 14px"}),logBox:{height:300,marginBottom:"16px",borderRadius:5,background:"#e0e0e0",fontFamily:"Consolas",padding:"10px",color:"#000000",textAlign:"left",overflowY:"scroll"}}});function Ga(e){var t=Ha(),a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(0),m=Object(i.a)(s,2),u=m[0],p=m[1],d=Object(n.useState)([]),E=Object(i.a)(d,2),h=E[0],b=E[1];e.socket.on("printLog",function(e){h[h.length-1]!==e&&(h.length>20&&h.shift(),p(u+1),b([].concat(Object(La.a)(h),[e])))}),e.socket.on("printStatus",function(e){h[h.length-1]!==e&&(h.length>20&&h.shift(),p(u+1),b([].concat(Object(La.a)(h),[e])))});return r.a.createElement("div",{className:t.root},r.a.createElement(Ve.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(Xe.a,{className:t.content},r.a.createElement("div",{className:t.logBox},h.map(function(e){return r.a.createElement("span",{key:u},e,r.a.createElement("br",null))})),r.a.createElement(v.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,sm:10,className:t.gridItem},r.a.createElement(f.a,{id:"command",className:t.textField,label:"Command",variant:"outlined",type:"text",fullWidth:!0,onChange:function(e){l(e.target.value)},value:o})),r.a.createElement(v.a,{item:!0,sm:2,className:t.gridItem},r.a.createElement(g.a,{className:t.button,variant:"contained",color:"primary",fullWidth:!0,onClick:function(t){""!==o&&e.socket.emit("sendManualCommand",o)}},"Send")))))))}var qa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},controlWindow:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},listItem:{textAlign:"center"}}});function Ma(e){var t=qa(),a=Object(n.useState)(!0),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],p=m[1],d=Object(n.useState)(!1),g=Object(i.a)(d,2),f=g[0],E=g[1];return r.a.createElement("div",{className:t.root},r.a.createElement(Ye,{navTitle:"Controls",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Controls")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(xt,{printer:e.printer,socket:e.socket}))))),r.a.createElement(he.a,null,r.a.createElement(be.a,null),r.a.createElement(ve.a,{button:!0,className:t.listItem,onClick:function(){E(!f)}},r.a.createElement(Oe.a,{primary:"Console",secondary:"Watch the log and send manual commands"}),f?r.a.createElement(Sa.a,null):r.a.createElement(Ca.a,null)),r.a.createElement(wa.a,{in:f,timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(Ga,{socket:e.socket}))))))),r.a.createElement(be.a,null),r.a.createElement(ve.a,{button:!0,className:t.listItem,onClick:function(){p(!u)}},r.a.createElement(Oe.a,{primary:"Control Settings",secondary:"Set the fan speed, the temperature and extrude or retract"}),u?r.a.createElement(Sa.a,null):r.a.createElement(Ca.a,null)),r.a.createElement(wa.a,{in:u,timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(Wa,{socket:e.socket}))),r.a.createElement(be.a,null),r.a.createElement(ve.a,{button:!0,className:t.listItem,onClick:function(){l(!o)}},r.a.createElement(Oe.a,{primary:"Axis Controls",secondary:"Move the axis of the printer"}),o?r.a.createElement(Sa.a,null):r.a.createElement(Ca.a,null)),r.a.createElement(wa.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(za,{socket:e.socket}))),r.a.createElement(be.a,null))))}function Ya(){return r.a.createElement(Ye,{navTitle:"Info",backTo:"settings"},"Info page")}var Va=a(172),Ja=a.n(Va),Ka=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},linearProgress:{marginTop:50,margin:"0 25%"}}});function Xa(){var e=Ka();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{src:Ja.a,alt:"Logo",width:150}),r.a.createElement(Ct.a,{className:e.linearProgress}))}var Za=r.a.createContext({status:null,setStatus:function(){},info:null,setInfo:function(){}}),Qa=a(173),$a=a.n(Qa)()("http://"+window.location.host.split(":")[0]+":4000",{query:{token:"Bearer "+window.localStorage.getItem("token")}}),en=r.a.createContext($a),tn=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function an(){var e=tn(),t=Object(n.useRef)(),a=Object(n.useContext)(Za),c=Object(n.useState)(""),o=Object(i.a)(c,2),l=o[0],s=o[1],m=Object(n.useState)({error:!1,message:""}),u=Object(i.a)(m,2),d=u[0],E=u[1],h=Object(n.useState)({type:"info",message:""}),v=Object(i.a)(h,2),O=v[0],j=v[1];function w(e){return x.a.isEmpty(e)?(E({error:!0,message:"Please enter a name."}),!1):(E({error:!1,message:""}),!0)}return Object(n.useEffect)(function(){gt.getInfo().then(function(e){I(e)&&s(e.name)})},[]),r.a.createElement(Ye,{navTitle:"Printer Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(p.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Printer Details"),r.a.createElement(b.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;w(l)||(n=!1),n&&gt.setInfo({name:l}).then(function(e){var n=I(e);n.valid?(a.setInfo({name:e.name}),j({type:"success",message:"Printer Details successfully set."}),t.current.handleOpen()):(j({type:n.type,message:n.message}),t.current.handleOpen())})}},r.a.createElement(pa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtName",autoComplete:"name",margin:"normal",label:"Name",variant:"outlined",value:l,onChange:function(e){s(e.target.value),w(e.target.value)},error:d.error,helperText:d.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save")))),r.a.createElement(ce,{message:O.message,variant:O.type,ref:t}))}var nn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"light"},typography:{useNextVariants:!0}}),rn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"dark"},typography:{useNextVariants:!0}});function cn(){return r.a.createElement(l.a,{exact:!0,to:"/login"})}var on=function(){var e=Object(n.useState)(null!==window.localStorage.getItem("token")),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),m=Object(i.a)(o,2),d=m[0],g=m[1],f=Object(n.useState)({}),E=Object(i.a)(f,2),h=E[0],b=E[1],v=Object(n.useState)({}),y=Object(i.a)(v,2),O=y[0],j=y[1],x=Object(n.useState)({}),w=Object(i.a)(x,2),k=w[0],S=w[1],N=Object(n.useState)(null!==window.localStorage.getItem("themeMode")?window.localStorage.getItem("themeMode"):"light"),C=Object(i.a)(N,2),T=C[0],I=C[1];return Object(n.useEffect)(function(){null!==window.localStorage.getItem("token")?(gt.getStatus().then(function(e){j(e)}),P.lookup().then(function(e){void 0===e._id?(c(!1),b({authorized:!1}),g(!0)):(c(!0),e.authorized=!0,b(e),g(!0))}),gt.getInfo().then(function(e){S(e)})):(b({authorized:!1}),g(!0))},[]),d?r.a.createElement(Le.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?nn:rn},r.a.createElement(z.Provider,{value:h},r.a.createElement(Za.Provider,{value:{status:O,setStatus:j,info:k,setInfo:S}},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(p.a,null),a?r.a.createElement("div",null,r.a.createElement(en.Consumer,null,function(e){return r.a.createElement(z.Consumer,null,function(t){return r.a.createElement(Za.Consumer,null,function(a){return r.a.createElement("div",null,r.a.createElement(l.b,{exact:!0,path:"/",render:function(n){return r.a.createElement(Ft,{user:t,socket:e,printer:a})}}),r.a.createElement(l.b,{exact:!0,path:"/controls",render:function(t){return r.a.createElement(Ma,{socket:e,printer:a})}}),r.a.createElement(l.b,{exact:!0,path:"/files",render:function(t){return r.a.createElement(xa,{socket:e})}}),r.a.createElement(l.b,{exact:!0,path:"/settings",render:function(e){return r.a.createElement(Jt,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/connection",render:function(e){return r.a.createElement(ha,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/printer",render:function(e){return r.a.createElement(an,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts",render:function(e){return r.a.createElement(ua,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts/add",render:function(e){return r.a.createElement(va,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/info",render:function(e){return r.a.createElement(Ya,e)}}))})})})):r.a.createElement(cn,null),r.a.createElement(l.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(z.Consumer,null,function(e){return r.a.createElement(ie,{user:e})})}}))))))):r.a.createElement(Le.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?nn:rn},r.a.createElement(p.a,null),r.a.createElement(Xa,null)))},ln=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function sn(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(on,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");ln?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):sn(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):sn(t,e)})}}()}},[[201,1,2]]]);
//# sourceMappingURL=main.3095e268.chunk.js.map