(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,a){e.exports=a.p+"static/media/icon-white.7c495247.svg"},189:function(e,t,a){e.exports=a.p+"static/media/icon-blue.389aa163.svg"},218:function(e,t,a){e.exports=a(322)},223:function(e,t,a){},319:function(e,t){},322:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),o=a.n(i),c=(a(223),a(6)),l=a(48),s=a(20),m=a(190),u=a(397),d=a(363),p=a(407),g=a(323),f=a(406),E=a(369),b=a(399),h=a(71),v=a(362),y=a(56),O=a(164),j=a(32),w=a.n(j),x=a(159),S=a.n(x),N=a(9),k=a.n(N),C=a(21),T={getUrl:function(){return"http://"+window.location.host.split(":")[0]+":4000/api/v1"},getFileUrl:function(){return"http://"+window.location.host.split(":")[0]+":4000/files"},getDefaultHeaders:function(){return{"Content-Type":"application/json"}},getHeaders:function(){return{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")}},getFileUploadHeaders:function(){return{Authorization:"Bearer "+window.localStorage.getItem("token")}},checkToken:function(e){"ER_TOKEN_EXPIRED"===e.code&&window.location.reload()},checkAuth:function(){if(null!==window.localStorage.getItem("token")||null!==window.sessionStorage.getItem("token"))return!0;return!1}};function I(e){return void 0===e.error?{valid:!0}:"ER_MISSING_PARAMS"===e.error.code?{valid:!1,type:"error",message:"Some parameters are missing."}:"ER_USERNAME_TAKEN"===e.error.code?{valid:!1,type:"error",message:"The username you entered is already taken."}:"ER_USER_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested user could not be found."}:"ER_INVALID_LOGIN"===e.error.code?{valid:!1,type:"error",message:"Your username or password is invalid."}:"ER_UNAUTHORIZED"===e.error.code?{valid:!1,type:"error",message:"You need to be signed in to use this service."}:"ER_TOKEN_EXPIRED"===e.error.code?{valid:!1,type:"error",message:"This session expired. Please reload the page and sign in again."}:"ER_UPLOAD_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested upload could not be found. Please try to reload the page."}:"ER_USER_TO_DELETE_SIGNED_IN"===e.error.code?{valid:!1,type:"error",message:"You cannot delete yourself."}:"ER_TOO_MANY_REQUESTS"===e.error.code?{valid:!1,type:"error",message:"Too many requests. Please wait a few seconds and try again."}:"ER_INTERNAL"===e.error.code?{valid:!1,type:"error",message:"An internal error occured. Please try again in a few seconds."}:{valid:!1,type:"error",message:"An unknown error occured. Please try to reload the page."}}var P={login:function(e){return D.apply(this,arguments)},lookup:function(){return R.apply(this,arguments)},add:function(e){return _.apply(this,arguments)},getAll:function(){return B.apply(this,arguments)},get:function(e){return F.apply(this,arguments)},remove:function(e){return A.apply(this,arguments)}};function D(){return(D=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/auth/login",{method:"POST",headers:T.getDefaultHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/user",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return(B=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){return(F=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return(A=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=r.a.createContext({authorized:!1});var z=a(160),L=a(3),W=a(161),H=a.n(W),G=a(163),M=a.n(G),q=a(88),Y=a.n(q),J=a(92),V=a.n(J),K=a(100),X=a(358),Z=a(360),Q=a(404),$=a(359),ee=a(162),te=a.n(ee),ae={success:H.a,warning:te.a,error:M.a,info:Y.a},ne=Object(O.a)(function(e){return{success:{backgroundColor:K.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:X.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function re(e){var t=ne(),a=e.className,n=e.message,i=e.onClose,o=e.variant,c=Object(z.a)(e,["className","message","onClose","variant"]),l=ae[o];return r.a.createElement($.a,Object.assign({className:Object(L.a)(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(l,{className:Object(L.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Z.a,{key:"close","aria-label":"close",color:"inherit",onClick:i},r.a.createElement(V.a,{className:t.icon}))]},c))}var ie=Object(n.forwardRef)(function(e,t){var a=r.a.useState(!1),i=Object(c.a)(a,2),o=i[0],l=i[1];function s(e,t){"clickaway"!==t&&l(!1)}return Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){l(!0)}}}),r.a.createElement("div",null,r.a.createElement(Q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:6e3,onClose:s},e.printAction&&e.printStatus?r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message,action:r.a.createElement(g.a,{color:"secondary",onClick:e.handlePrintNowClick,disabled:"ready"!==e.printStatus},"Print Now")}):r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message})))}),oe=Object(O.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(images/login-bg.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main,width:60,height:60},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function ce(){var e=oe(),t=Object(n.useContext)(U),a=Object(n.useState)(""),i=Object(c.a)(a,2),o=i[0],s=i[1],m=Object(n.useState)(""),u=Object(c.a)(m,2),O=u[0],j=u[1],x=Object(n.useState)(!1),N=Object(c.a)(x,2),k=N[0],C=N[1],T=Object(n.useState)({error:!1,message:""}),D=Object(c.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)({error:!1,message:""}),F=Object(c.a)(B,2),A=F[0],z=F[1],L=Object(n.useState)({type:"info",message:""}),W=Object(c.a)(L,2),H=W[0],G=W[1],M=Object(n.useRef)();function q(e){return w.a.isEmpty(e)?(_({error:!0,message:"Please enter your username."}),!1):(_({error:!1,message:""}),!0)}function Y(e){return w.a.isEmpty(e)?(z({error:!0,message:"Please enter your password."}),!1):(z({error:!1,message:""}),!0)}return void 0===t.authorized?r.a.createElement("div",null):t.authorized?r.a.createElement(l.a,{exact:!0,to:"/"}):r.a.createElement(v.a,{container:!0,component:"main",className:e.root},r.a.createElement(d.a,null),r.a.createElement(v.a,{item:!0,xs:!1,sm:5,md:7,lg:8,className:e.image}),r.a.createElement(v.a,{item:!0,xs:12,sm:7,md:5,lg:4,component:h.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement("img",{src:S.a,alt:"Logo",width:27})),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign In"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var t=!0;q(o)||(t=!1),Y(O)||(t=!1),t&&P.login({username:o,password:O,remember:k}).then(function(e){var t=I(e);t.valid?(window.localStorage.setItem("token",e.token),window.location.reload()):(G({type:t.type,message:t.message}),M.current.handleOpen())})},noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"txtUsername",label:"Username",name:"txtUsername",autoComplete:"username",autoFocus:!0,onChange:function(e){s(e.target.value),q(e.target.value)},value:o,error:R.error,helperText:R.message}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"txtPassword",label:"Password",type:"password",id:"txtPassword",autoComplete:"current-password",onChange:function(e){j(e.target.value),Y(e.target.value)},value:O,error:A.error,helperText:A.message}),r.a.createElement(E.a,{control:r.a.createElement(b.a,{color:"primary",onChange:function(e){C(!k)},value:k}),label:"Remember me"}),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In")))),r.a.createElement(ie,{message:H.message,variant:H.type,ref:M}))}var le=a(17),se=a(117),me=a(375),ue=a(376),de=a(402),pe=a(176),ge=a.n(pe),fe=a(175),Ee=a.n(fe),be=a(45),he=a.n(be),ve=a(178),ye=a.n(ve),Oe=a(179),je=a.n(Oe),we=a(370),xe=a(368),Se=a(373),Ne=a(325),ke=a(374),Ce=a(372),Te=a(371),Ie=a(170),Pe=a.n(Ie),De=a(171),Re=a.n(De),_e=a(53),Be=a.n(_e),Fe=a(95),Ae=a.n(Fe),Ue=a(94),ze=a.n(Ue),Le=a(96),We=a.n(Le),He=a(66),Ge=a.n(He),Me=a(172),qe=a.n(Me),Ye=a(173),Je=a.n(Ye),Ve=r.a.createContext({themeStyle:"light",setThemeStyle:function(){}}),Ke=Object(O.a)(function(e){return{list:{width:250},orangeAvatar:{margin:10,color:"#fff",backgroundColor:Pe.a[500]},pinkAvatar:{margin:10,color:"#fff",backgroundColor:Re.a[400]},link:{textDecoration:"none",color:e.palette.text.primary,"&:focus":{color:e.palette.text.primary},"&:active":{color:e.palette.text.primary}}}});function Xe(e){var t=Ke(),a=Object(n.useContext)(Ve),i=function(){localStorage.removeItem("token"),window.location.reload()},o=function(){"light"===a.themeStyle?(a.setThemeStyle("dark"),window.localStorage.setItem("themeMode","dark")):(a.setThemeStyle("light"),window.localStorage.setItem("themeMode","light"))};return r.a.createElement(U.Consumer,null,function(n){return r.a.createElement(we.a,{open:e.open,onClose:e.onDrawerClose},r.a.createElement("div",{tabIndex:0,role:"button"},r.a.createElement("div",{className:t.list},r.a.createElement(xe.a,null,r.a.createElement(Ne.a,null,r.a.createElement(Te.a,null,r.a.createElement(p.a,{className:t.pinkAvatar},void 0===n.firstname?"":n.firstname.substr(0,1))),r.a.createElement(Ce.a,{primary:n.firstname+" "+n.lastname}))),r.a.createElement(Se.a,null),r.a.createElement(xe.a,null,r.a.createElement(s.b,{to:"/",className:t.link},r.a.createElement(Ne.a,{button:!0,selected:"home"===e.selectedPage},r.a.createElement(ke.a,null,r.a.createElement(Be.a,null)),r.a.createElement(Ce.a,{primary:"Home"}))),r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(Ne.a,{button:!0,selected:"controls"===e.selectedPage},r.a.createElement(ke.a,null,r.a.createElement(ze.a,null)),r.a.createElement(Ce.a,{primary:"Controls"}))),r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(Ne.a,{button:!0,selected:"files"===e.selectedPage},r.a.createElement(ke.a,null,r.a.createElement(Ae.a,null)),r.a.createElement(Ce.a,{primary:"Files"})))),r.a.createElement(Se.a,null),r.a.createElement(xe.a,null,r.a.createElement(Ne.a,{button:!0,onClick:o},r.a.createElement(ke.a,null,"dark"===a.themeStyle?r.a.createElement(qe.a,null):r.a.createElement(Je.a,null)),r.a.createElement(Ce.a,{primary:"dark"===a.themeStyle?"Light Mode":"Dark Mode"}))),r.a.createElement(Se.a,null),r.a.createElement(xe.a,null,r.a.createElement(s.b,{to:"/settings",className:t.link},r.a.createElement(Ne.a,{button:!0,selected:"settings"===e.selectedPage},r.a.createElement(ke.a,null,r.a.createElement(Ge.a,null)),r.a.createElement(Ce.a,{primary:"Settings"}))),r.a.createElement(Ne.a,{button:!0,onClick:i},r.a.createElement(ke.a,null,r.a.createElement(We.a,null)),r.a.createElement(Ce.a,{primary:"Logout"}))))))})}var Ze=a(174),Qe=a.n(Ze)()("http://"+window.location.host.split(":")[0]+":4000",{query:{token:"Bearer "+window.localStorage.getItem("token")}});function $e(e,t){Qe.on(e,function(e){return t(e)})}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t?Qe.emit(e):Qe.emit(e,t)}function tt(e){Qe.off(e)}function at(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var nt=Object(O.a)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},search:Object(le.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(se.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(se.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(9),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(le.a)({paddingTop:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(10),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}}),link:{textDecoration:"none",color:"#ffffff","&:focus":{color:"#ffffff"},"&:active":{color:"#ffffff"}}}});function rt(e){var t=nt(),a=Object(n.useState)(!1),i=Object(c.a)(a,2),o=i[0],l=i[1],m=Object(n.useState)(""),u=Object(c.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(!1),f=Object(c.a)(g,2),E=f[0],b=f[1],h=Object(n.useState)(!0),v=Object(c.a)(h,2),O=v[0],j=v[1],w=Object(n.useState)(!0),x=Object(c.a)(w,2),S=x[0],N=x[1];return Object(n.useEffect)(function(){return $e("info",function(e){p(e.status),b(!0)}),et("getInfo"),$e("printStatus",function(e){p(e),b(!0)}),function(){tt("info"),tt("printStatus")}},[]),at(function(){"connecting"===d&&j(!O),"stopping"===d&&N(!S)},500),r.a.createElement("div",{className:t.root},r.a.createElement(me.a,{position:"fixed"},r.a.createElement(ue.a,null,void 0!==e.backTo?r.a.createElement(s.b,{to:"settings"===e.backTo?"/settings":"accountsettings"===e.backTo?"/settings/accounts":"/",className:t.link},r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Back"},r.a.createElement(Ee.a,null))):r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){l(!0)}},r.a.createElement(ge.a,null)),r.a.createElement(y.a,{variant:"h6",color:"inherit",className:t.grow},e.title),r.a.createElement(de.a,{title:"printing"===d?"Printing...":"Ready"},r.a.createElement("span",null,r.a.createElement(Z.a,{color:"inherit",disableRipple:!0,disabled:"printing"!==d&&"stopping"!==d||"stopping"===d&&S||!E},r.a.createElement(he.a,{fontSize:"small"})))),r.a.createElement(de.a,{title:"disconnected"!==d?"connecting"===d?"Connecting...":"Connected":"Connection failed"},r.a.createElement("span",null,r.a.createElement(Z.a,{color:"inherit",disableRipple:!0,disabled:O&&"connecting"===d},"disconnected"===d?r.a.createElement(ye.a,{fontSize:"small"}):r.a.createElement("div",null),"disconnected"!==d?r.a.createElement(je.a,{fontSize:"small"}):r.a.createElement("div",null)))))),r.a.createElement(Xe,{open:o,onDrawerClose:function(){l(!1)},selectedPage:e.selectedPage}))}function it(e){return r.a.createElement("div",null,r.a.createElement(rt,{title:e.navTitle,selectedPage:"not",backTo:e.backTo}),e.children)}var ot=a(377),ct=a(380),lt=a(378),st=a(379),mt=a(180),ut=a.n(mt),dt=a(97),pt=a.n(dt),gt=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:400,height:250},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function ft(e){return"print"===e.action?r.a.createElement(he.a,{color:"primary",style:{fontSize:80}}):"home"===e.action?r.a.createElement(Be.a,{color:"primary",style:{fontSize:80}}):"upload"===e.action?r.a.createElement(ut.a,{color:"primary",style:{fontSize:80}}):"files"===e.action?r.a.createElement(Ae.a,{color:"primary",style:{fontSize:80}}):"control"===e.action?r.a.createElement(ze.a,{color:"primary",style:{fontSize:80}}):"logout"===e.action?r.a.createElement(We.a,{color:"primary",style:{fontSize:80}}):"settings"===e.action?r.a.createElement(Ge.a,{color:"primary",style:{fontSize:80}}):r.a.createElement(pt.a,{color:"primary",style:{fontSize:80}})}function Et(e){var t=gt();return r.a.createElement(ot.a,null,r.a.createElement(lt.a,{className:t.cardActionArea},r.a.createElement(st.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(ft,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h5",component:"h5",align:"center"},e.title),r.a.createElement(y.a,{className:t.pos,variant:"subtitle1",component:"h6",color:"textSecondary",align:"center"},e.description)),r.a.createElement(ct.a,null)))}var bt=a(388),ht=a(181),vt=a.n(ht),yt=a(67),Ot=a.n(yt),jt=a(182),wt=a.n(jt),xt=a(387),St={setInfo:function(e){return Nt.apply(this,arguments)},getInfo:function(){return kt.apply(this,arguments)},setLoadedFile:function(e){return Ct.apply(this,arguments)},getLoadedFile:function(){return Tt.apply(this,arguments)},getStatus:function(){return It.apply(this,arguments)},getProgress:function(){return Pt.apply(this,arguments)}};function Nt(){return(Nt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ct(){return(Ct=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/file",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(){return(Tt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/file",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function It(){return(It=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/status",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pt(){return(Pt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/progress",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Dt=a(381),Rt=Object(O.a)(function(e){return{root:{textAlign:"center",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"}}});function _t(){var e=Rt();return r.a.createElement("div",{className:e.root},r.a.createElement(Dt.a,null))}var Bt=a(382),Ft=a(386),At=a(384),Ut=a(385),zt=a(383);function Lt(e){return r.a.createElement("div",null,r.a.createElement(Bt.a,{open:e.open,onClose:e.onCancelStop,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(zt.a,{id:"alert-dialog-title"},'Are you sure you want to stop printing "',e.itemName,'"?'),r.a.createElement(At.a,null,r.a.createElement(Ut.a,{id:"alert-dialog-description"},"If you stop this print, ",r.a.createElement("b",null,"this action cannot be undone")," and ",r.a.createElement("b",null,"you will have to start over again."))),r.a.createElement(Ft.a,null,r.a.createElement(g.a,{onClick:e.onConfirmDelete,color:"primary"},"Yes"),r.a.createElement(g.a,{onClick:e.onCancelDelete,autoFocus:!0},"No"))))}function Wt(e){return r.a.createElement("div",null,r.a.createElement(Bt.a,{open:e.open,onClose:e.onConfirmCompletedPrint,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(zt.a,{id:"alert-dialog-title"},"Your item has been printed."),r.a.createElement(At.a,null,r.a.createElement(Ut.a,{id:"alert-dialog-description"},"You can remove your item from the printer.")),r.a.createElement(Ft.a,null,r.a.createElement(g.a,{onClick:e.onConfirm,color:"primary"},"Okay"))))}var Ht={setNextFile:function(e,t){window.sessionStorage.setItem("print_file_id",e),window.sessionStorage.setItem("print_file_name",t),St.setLoadedFile({id:e,name:t})},getSize:function(e){return parseInt(e/1024/1024/1024)>0?{size:parseInt(e/1024/1024/1024),unit:"GB"}:parseInt(e/1024/1024)>0?{size:parseInt(e/1024/1024),unit:"MB"}:parseInt(e/1024)>0?{size:parseInt(e/1024),unit:"KB"}:{size:parseInt(e),unit:"Bytes"}}};var Gt=Object(O.a)(function(e){var t;return{root:(t={width:600},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"textAlign","center"),t),controls:{alignItems:"center"},playIcon:{height:38,width:38},buttonGroup:{marginTop:e.spacing(3)},link:{textDecoration:"none",color:"#0078d7","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},progressbar:{marginTop:e.spacing(2),marginBottom:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(2)}}});function Mt(e){var t=Gt(),a=Object(n.useState)({id:window.sessionStorage.getItem("print_file_id"),name:window.sessionStorage.getItem("print_file_name")}),i=Object(c.a)(a,2),o=i[0],l=i[1],m=Object(n.useState)(!1),u=Object(c.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(c.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)(!1),O=Object(c.a)(v,2),j=O[0],w=O[1],x=Object(n.useState)(!1),S=Object(c.a)(x,2),N=S[0],k=S[1],C=Object(n.useState)({}),T=Object(c.a)(C,2),I=T[0],P=T[1];Object(n.useEffect)(function(){St.getLoadedFile().then(function(e){null===e.id&&null===e.name||(l(e),Ht.setNextFile(e.id,e.name)),p(!0)})},[]),Object(n.useEffect)(function(){return $e("info",function(e){h(e.status),P(e.progress.sent/e.progress.total*100),"completed"===e.status&&(window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),k(!0))}),et("getInfo"),$e("newFileToPrint",function(e){window.sessionStorage.setItem("print_file_id",e.id),window.sessionStorage.setItem("print_file_name",e.name),l({id:e.id,name:e.name})}),$e("deleteLoadedFile",function(){window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),St.setLoadedFile({id:null,name:null})}),$e("printStatus",function(e){h(e),"completed"===e&&(k(!0),window.sessionStorage.removeItem("print_file_id"),l({id:null,name:null}),P(0),et("deleteLoadedFile"))}),$e("printProgress",function(e){P(e.sent/e.total*100)}),function(){tt("info"),tt("newFileToPrint"),tt("deleteLoadedFile"),tt("printStatus"),tt("printProgress")}},[]);return d?r.a.createElement("div",{className:t.root},r.a.createElement(ot.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(st.a,{className:t.content},r.a.createElement(y.a,{component:"h5",variant:"h5"},e.printer.info.name),r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:"disconnected"!==b?"textSecondary":"error"},"connecting"===b?"Connecting...":"","disconnected"===b?"Not Connected":""),r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:"stopping"===b?"error":"primary"},"ready"===b?"Ready":"","printing"===b?"Printing...":"","stopping"===b?"Stopping...":""),r.a.createElement(y.a,{variant:"subtitle1",color:null!==o.id?"initial":"error"},"disconnected"===b||null!==o.id?o.name:"No file loaded"),"disconnected"===b||"printing"!==b&&"stopping"!==b?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement(xt.a,{className:t.progressbar,variant:"determinate",value:parseInt(I)}),r.a.createElement(y.a,{variant:"subtitle1"},0===Math.floor(I)?"loading...":Math.floor(I)+"%")),"disconnected"===b||null!==o.id?r.a.createElement("div",null):r.a.createElement(bt.a,{className:t.buttonGroup,color:"primary","aria-label":"outlined primary button group"},r.a.createElement(g.a,null,r.a.createElement(s.b,{to:"/files",className:t.link},"Choose From Files")))),r.a.createElement("div",{className:t.controls},"disconnected"===b&&null!==o.id||"ready"===b&&null!==o.id?r.a.createElement(de.a,{title:"Remove File"},r.a.createElement("span",null,r.a.createElement(Z.a,{className:t.button,onClick:function(){window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),et("deleteLoadedFile")},"aria-label":"Delete"},r.a.createElement(Ot.a,{fontSize:"small"})))):r.a.createElement("div",null),r.a.createElement(de.a,{title:"Start Printing"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"play",disabled:!("disconnected"!==b&&"ready"===b&&null!==o.id),onClick:function(e){et("printFile",window.sessionStorage.getItem("print_file_id"))}},r.a.createElement(vt.a,{className:t.playIcon})))),r.a.createElement(de.a,{title:"Cancel"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"stop",disabled:!("disconnected"!==b&&"ready"!==b)||"stopping"===b,onClick:function(e){w(!0)}},r.a.createElement(wt.a,null))))))),r.a.createElement(Lt,{open:j,itemName:o.name,deleteType:"file",onCancelDelete:function(e){w(!1)},onConfirmDelete:function(e){w(!1),et("cancelPrint")}}),r.a.createElement(Wt,{open:N,onConfirm:function(){k(!1),window.sessionStorage.removeItem("print_file_name")}})):r.a.createElement("div",null,r.a.createElement(_t,null))}var qt=a(183),Yt=a.n(qt),Jt=a(324),Vt={add:function(e){return Kt.apply(this,arguments)},getAll:function(){return Xt.apply(this,arguments)},get:function(e){return Zt.apply(this,arguments)},remove:function(e){return Qt.apply(this,arguments)}};function Kt(){return(Kt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{method:"POST",headers:T.getFileUploadHeaders(),body:t}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(){return(Xt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zt(){return(Zt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qt(){return(Qt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $t(e){if(e.size%4096!==0&&0!==e.size&&-1!==e.name.indexOf(".")){var t=e.name.split("."),a=t[t.length-1].toLowerCase();return"gcode"===a||"gco"===a||"gc"===a||"g"===a}}var ea=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},icon:{fontSize:125}}}),ta=r.a.forwardRef(function(e,t){return r.a.createElement(Jt.a,Object.assign({direction:"up",ref:t},e))}),aa=Object(n.forwardRef)(function(e,t){var a=ea(),i=Object(n.useState)(!1),o=Object(c.a)(i,2),l=o[0],s=o[1],m=Object(n.useState)(null),u=Object(c.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(c.a)(f,2),b=E[0],h=E[1];Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){s(!0)},setUpload:function(t){$t(t)?p(t):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}}});var v=function(){p(null),s(!1)};return r.a.createElement("div",{onDrop:function(t){t.preventDefault(),$t(t.dataTransfer.files[0])?p(t.dataTransfer.files[0]):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}},r.a.createElement(Bt.a,{fullScreen:!0,open:l,onClose:v,TransitionComponent:ta},r.a.createElement(me.a,{className:a.appBar},r.a.createElement(ue.a,null,r.a.createElement(Z.a,{edge:"start",color:"inherit",onClick:v,"aria-label":"close"},r.a.createElement(V.a,null)),r.a.createElement(y.a,{variant:"h6",className:a.title},"Upload Files"),r.a.createElement(g.a,{color:"inherit",onClick:function(){if(null!==d){var t=new FormData;t.append("file",d),h(!0),Vt.add(t).then(function(t){I(t).valid?(Ht.setNextFile(t._id,t.originalname),et("loadFile",{id:t._id,name:t.originalname}),e.onUploadFinish({type:"success",message:'File "'+t.originalname+'" successfully uploaded.'})):e.onUploadFinish({type:"error",message:"Files of this type cannot be uploaded."}),h(!1),v()})}},disabled:b},"UPLOAD"))),null!==d?r.a.createElement(xe.a,null,r.a.createElement(Ne.a,{button:!0},r.a.createElement(Ce.a,{primary:d.name,secondary:d.size/1e3+" KB"})),b?r.a.createElement(xt.a,{className:a.linearProgress}):r.a.createElement(Se.a,null)):r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{align:"center",color:"textSecondary",gutterBottom:!0},r.a.createElement(Yt.a,{className:a.icon})),r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textSecondary",gutterBottom:!0},"Drop your GCODE file here"))))}),na=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function ra(e){var t=na(),a=Object(n.useState)({type:"info",message:""}),i=Object(c.a)(a,2),o=i[0],l=i[1],m=Object(n.useRef)(),u=Object(n.useRef)(),d=Object(n.useRef)();return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),u.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(it,{navTitle:"Home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Welcome Back, ",e.user.firstname+" "+e.user.lastname,".")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(Mt,{printer:e.printer}))))),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(Et,{action:"control",title:"Controls",description:"Print files, control the printer, move the axis"}))),r.a.createElement(v.a,{item:!0},r.a.createElement("div",{onClick:function(){d.current.click()}},r.a.createElement(Et,{action:"upload",title:"Upload",description:"Add files to the printing list"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(Et,{action:"files",title:"Files",description:"View uploaded files, load files, print them again"})))))),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(u.current.handleOpen(),u.current.setUpload(e.target.files[0]))},type:"file",ref:d}),r.a.createElement(aa,{ref:u,onUploadFinish:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()},onBeforeUploadError:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()}}),r.a.createElement(ie,{message:o.message,variant:o.type,ref:m}))))}var ia=a(185),oa=a.n(ia),ca=a(184),la=a.n(ca),sa=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:300,height:180},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function ma(e){return"accounts"===e.action?r.a.createElement(la.a,{color:"primary",style:{fontSize:60}}):"settings"===e.action?r.a.createElement(Ge.a,{color:"primary",style:{fontSize:60}}):"connection"===e.action?r.a.createElement(oa.a,{color:"primary",style:{fontSize:60}}):"info"===e.action?r.a.createElement(Y.a,{color:"primary",style:{fontSize:60}}):"printer"===e.action?r.a.createElement(he.a,{color:"primary",style:{fontSize:60}}):r.a.createElement(pt.a,{color:"primary",style:{fontSize:60}})}function ua(e){var t=sa();return r.a.createElement(ot.a,null,r.a.createElement(lt.a,{className:t.cardActionArea},r.a.createElement(st.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(ma,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h6",component:"h6",align:"center"},e.title)),r.a.createElement(ct.a,null)))}var da=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function pa(){var e=da();return r.a.createElement(it,{navTitle:"Settings",backTo:"home"},r.a.createElement("div",{className:e.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Settings")),r.a.createElement(v.a,{container:!0,className:e.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:e.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/connection",className:e.link},r.a.createElement(ua,{action:"connection",title:"Connection"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/printer",className:e.link},r.a.createElement(ua,{action:"printer",title:"Printer"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/accounts",className:e.link},r.a.createElement(ua,{action:"accounts",title:"Accounts"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/info",className:e.link},r.a.createElement(ua,{action:"info",title:"Info"})))))))}var ga=a(389),fa=a(393),Ea=a(392),ba=a(390),ha=a(391),va=a(394),ya=a(99),Oa=a.n(ya),ja=a(400);function wa(e){return r.a.createElement("div",null,r.a.createElement(Bt.a,{open:e.open,onClose:e.onCancelDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(zt.a,{id:"alert-dialog-title"},"Are you sure you want to delete the ",e.deleteType,' "',e.deleteItemName,'"?'),r.a.createElement(At.a,null,r.a.createElement(Ut.a,{id:"alert-dialog-description"},"This action cannot be undone.")),r.a.createElement(Ft.a,null,r.a.createElement(g.a,{onClick:e.onConfirmDelete,color:"primary"},"Yes"),r.a.createElement(g.a,{onClick:e.onCancelDelete,autoFocus:!0},"No"))))}var xa=r.a.createContext({new:!1,username:""}),Sa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},centering:{display:"flex",flexDirection:"column",alignItems:"center"},button:{margin:e.spacing(1)},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function Na(e){var t=Sa(),a=Object(n.useContext)(xa),i=Object(n.useState)([]),o=Object(c.a)(i,2),l=o[0],m=o[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),p=d[0],g=d[1],f=Object(n.useState)({type:"info",message:""}),E=Object(c.a)(f,2),b=E[0],v=E[1],O=Object(n.useState)(""),j=Object(c.a)(O,2),w=j[0],x=j[1],S=Object(n.useState)(0),N=Object(c.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)(!1),D=Object(c.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)(!1),F=Object(c.a)(B,2),A=F[0],U=F[1],z=Object(n.useRef)();Object(n.useEffect)(function(){P.getAll().then(function(e){var t=I(e);t.valid?(m(e),a.new&&(v({type:"success",message:'User "'+a.username+'" successfully added.'}),a.new=!1,a.username="",z.current.handleOpen())):(v({type:t.type,message:t.message}),z.current.handleOpen()),g(!0),U(!1)})},[a.new,a.username,A]);return r.a.createElement(it,{navTitle:"Account Settings",backTo:"settings"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Account Settings")),r.a.createElement("div",{className:t.tableRoot},r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Accounts"),p&&l.length>0?r.a.createElement(h.a,{className:t.table},r.a.createElement(ga.a,null,r.a.createElement(ba.a,null,r.a.createElement(ha.a,null,r.a.createElement(Ea.a,null,"Username"),r.a.createElement(ja.a,{xsDown:!0},r.a.createElement(Ea.a,null,"Firstname"),r.a.createElement(Ea.a,null,"Lastname")),r.a.createElement(Ea.a,{align:"right"},"Actions"))),r.a.createElement(fa.a,null,l.map(function(e){return r.a.createElement(ha.a,{key:e._id},r.a.createElement(Ea.a,{component:"th",scope:"row"},e.username),r.a.createElement(ja.a,{xsDown:!0},r.a.createElement(Ea.a,null,e.firstname),r.a.createElement(Ea.a,null,e.lastname)),r.a.createElement(Ea.a,{align:"right"},r.a.createElement(de.a,{title:"Delete"},r.a.createElement(Z.a,{onClick:function(){return function(e){C(e._id),x(e.username),_(!0)}(e)},"aria-label":"Delete"},r.a.createElement(Ot.a,{fontSize:"small"})))))})))):r.a.createElement(_t,null),r.a.createElement(s.b,{to:"/settings/accounts/add",className:t.link},r.a.createElement(va.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab},r.a.createElement(Oa.a,null),"Add User"))),r.a.createElement(wa,{open:R,deleteItemName:w,deleteType:"user",onCancelDelete:function(){_(!1)},onConfirmDelete:function(){_(!1),P.remove(k).then(function(e){var t=I(e);t.valid?U(!0):(v({type:t.type,message:t.message}),z.current.handleOpen())})}}),r.a.createElement(ie,{message:b.message,variant:b.type,ref:z}))}var ka=a(366),Ca=a(398),Ta=a(395),Ia=a(403),Pa={setConnection:function(e){return Da.apply(this,arguments)},getConnection:function(){return Ra.apply(this,arguments)},getPorts:function(){return _a.apply(this,arguments)}};function Da(){return(Da=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ra(){return(Ra=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _a(){return(_a=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection/ports",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ba=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function Fa(){var e=Ba(),t=Object(n.useRef)(),a=Object(n.useState)([]),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),u=m[0],p=m[1],E=Object(n.useState)(!1),b=Object(c.a)(E,2),v=b[0],O=b[1],j=Object(n.useState)(""),x=Object(c.a)(j,2),S=x[0],N=x[1],k=Object(n.useState)({error:!1,message:""}),C=Object(c.a)(k,2),T=C[0],P=C[1],D=Object(n.useState)({type:"info",message:""}),R=Object(c.a)(D,2),_=R[0],B=R[1],F=Object(n.useState)(!1),A=Object(c.a)(F,2),U=A[0],z=A[1],L=Object(n.useState)(!1),W=Object(c.a)(L,2),H=W[0],G=W[1],M=Object(n.useState)(!0),q=Object(c.a)(M,2),Y=q[0],J=q[1],V=Object(n.useRef)(),K=Object(n.useState)(0),X=Object(c.a)(K,2),Z=X[0],Q=X[1];function $(e){return w.a.isEmpty(e)?(P({error:!0,message:"Please enter a valid baudrate."}),!1):w.a.isNumeric(e)?(P({error:!1,message:""}),!0):(P({error:!0,message:"Baudrate must be a number."}),!1)}return Object(n.useEffect)(function(){U&&H&&Q(V.current.offsetWidth)},[H,U]),Object(n.useEffect)(function(){Pa.getConnection().then(function(e){I(e)&&(p(e.port),l([{comName:e.port,manufacturer:"unavailable"}]),N(e.baudrate)),z(!0)}),Pa.getPorts().then(function(e){I(e)&&(e.length>0?(l(e),J(!1)):J(!0)),G(!0)})},[]),at(function(){Pa.getPorts().then(function(e){I(e)&&(e.length>0?(l(e),J(!1)):J(!0)),G(!0)})},2e3),r.a.createElement(it,{navTitle:"Connection Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Connection"),U&&H?r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var a=!0;$(S)||(a=!1),a&&Pa.setConnection({port:u,baudrate:S}).then(function(e){var a=I(e);a.valid?(B({type:"success",message:"Connection details successfully set. The server will restart now."}),t.current.handleOpen(),setTimeout(function(){console.log("restarting..."),window.location.reload()},2e3)):(B({type:a.type,message:a.message}),t.current.handleOpen())})}},r.a.createElement(ka.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Ia.a,{ref:V,id:"demo-simple-select-outlined-label"},"Port"),r.a.createElement(Ca.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",variant:"outlined",open:v,onClose:function(){O(!1)},onOpen:function(){O(!0)},value:u,onChange:function(e){p(e.target.value)},labelWidth:Z,disabled:Y},o.map(function(e){return r.a.createElement(Ta.a,{key:e.comName,value:e.comName},e.comName+" ("+e.manufacturer+")")}))),r.a.createElement(ka.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtBaudRate",autoComplete:"Baudrate",margin:"normal",label:"Baudrate",variant:"outlined",value:S,onChange:function(e){N(e.target.value),$(e.target.value)},error:T.error,helperText:T.message,disabled:Y})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:Y},Y?"No ports available":"Save"))):r.a.createElement(_t,null)),r.a.createElement(ie,{message:_.message,variant:_.type,ref:t}))}var Aa=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function Ua(){var e=Aa(),t=Object(n.useContext)(xa),a=Object(n.useRef)(),i=Object(n.useState)(!1),o=Object(c.a)(i,2),s=o[0],m=o[1],u=Object(n.useState)(""),p=Object(c.a)(u,2),E=p[0],b=p[1],v=Object(n.useState)(""),O=Object(c.a)(v,2),j=O[0],x=O[1],S=Object(n.useState)(""),N=Object(c.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)(""),D=Object(c.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)({error:!1,message:""}),F=Object(c.a)(B,2),A=F[0],U=F[1],z=Object(n.useState)({error:!1,message:""}),L=Object(c.a)(z,2),W=L[0],H=L[1],G=Object(n.useState)({error:!1,message:""}),M=Object(c.a)(G,2),q=M[0],Y=M[1],J=Object(n.useState)({error:!1,message:""}),V=Object(c.a)(J,2),K=V[0],X=V[1],Z=Object(n.useState)({type:"info",message:""}),Q=Object(c.a)(Z,2),$=Q[0],ee=Q[1];function te(e){return w.a.isEmpty(e)?(U({error:!0,message:"Please enter a firstname."}),!1):(U({error:!1,message:""}),!0)}function ae(e){return w.a.isEmpty(e)?(H({error:!0,message:"Please enter a lastname."}),!1):(H({error:!1,message:""}),!0)}function ne(e){return w.a.isEmpty(e)?(Y({error:!0,message:"Please enter a username."}),!1):(Y({error:!1,message:""}),!0)}function re(e){return w.a.isEmpty(e)?(X({error:!0,message:"Please enter a password."}),!1):(X({error:!1,message:""}),!0)}return s?r.a.createElement(l.a,{exact:!0,to:"/settings/accounts"}):r.a.createElement(it,{navTitle:"Account Settings",backTo:"accountsettings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Add Account"),r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;te(E)||(n=!1),ae(j)||(n=!1),ne(k)||(n=!1),re(R)||(n=!1),n&&P.add({firstname:E,lastname:j,username:k,password:R,admin:!0}).then(function(e){var n=I(e);n.valid?(t.new=!0,t.username=e.username,m({success:!0,username:e.username})):(ee({type:n.type,message:n.message}),a.current.handleOpen())})}},r.a.createElement(ka.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtFirstname",autoComplete:"firstname",margin:"normal",label:"Firstname",variant:"outlined",value:E,onChange:function(e){b(e.target.value),te(e.target.value)},error:A.error,helperText:A.message})),r.a.createElement(ka.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtLastname",autoComplete:"Lastname",margin:"normal",label:"Lastname",variant:"outlined",value:j,onChange:function(e){x(e.target.value),ae(e.target.value)},error:W.error,helperText:W.message})),r.a.createElement(ka.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtUsername",autoComplete:"username",margin:"normal",label:"Username",variant:"outlined",value:k,onChange:function(e){C(e.target.value),ne(e.target.value)},error:q.error,helperText:q.message})),r.a.createElement(ka.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"password",name:"txtPassword",autoComplete:"password",margin:"normal",label:"Password",variant:"outlined",value:R,onChange:function(e){_(e.target.value),re(e.target.value)},error:K.error,helperText:K.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save"))),r.a.createElement("div",{className:e.centering},r.a.createElement(g.a,{className:e.button,onClick:function(){window.history.back()}},"Back"))),r.a.createElement(ie,{message:$.message,variant:$.type,ref:a}))}var za=a(186),La=a.n(za),Wa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function Ha(e){var t=Wa(),a=Object(n.useState)([]),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(!1),m=Object(c.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)({type:"info",message:""}),g=Object(c.a)(p,2),f=g[0],E=g[1],b=Object(n.useState)(""),v=Object(c.a)(b,2),O=v[0],j=v[1],w=Object(n.useState)(0),x=Object(c.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)(!1),C=Object(c.a)(k,2),P=C[0],D=C[1],R=Object(n.useState)({}),_=Object(c.a)(R,2),B=_[0],F=_[1],A=Object(n.useRef)(),U=Object(n.useRef)(),z=Object(n.useRef)();Object(n.useEffect)(function(){return L(),$e("info",function(e){F(e.status)}),et("getInfo"),$e("printStatus",function(e){F(e)}),function(){tt("info"),tt("printStatus")}},[]);var L=function(){Vt.getAll().then(function(e){I(e).valid&&l(e),d(!0)})};return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),U.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(it,{navTitle:"Files",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Files")),r.a.createElement("div",{className:t.tableRoot},u&&0===o.length?r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Upload some files to print them."):u&&o.length>0?r.a.createElement(h.a,{className:t.table},r.a.createElement(ga.a,null,r.a.createElement(ba.a,null,r.a.createElement(ha.a,null,r.a.createElement(Ea.a,null,"Name"),r.a.createElement(ja.a,{xsDown:!0},r.a.createElement(Ea.a,null,"Size")),r.a.createElement(Ea.a,{align:"right"},"Actions"))),r.a.createElement(fa.a,null,o.map(function(e){return r.a.createElement(ha.a,{key:e._id},r.a.createElement(Ea.a,{component:"th",scope:"row"},e.originalname),r.a.createElement(ja.a,{xsDown:!0},r.a.createElement(Ea.a,null,Ht.getSize(e.size).size+" "+Ht.getSize(e.size).unit)),r.a.createElement(Ea.a,{align:"right"},r.a.createElement(de.a,{title:"Print"},r.a.createElement("span",null,r.a.createElement(Z.a,{className:t.button,"aria-label":"Print",onClick:function(){return t=e._id,a=e.originalname,Ht.setNextFile(t,a),et("loadFile",{id:t,name:a}),E({type:"info",message:'"'+a+'" is ready to be printed. You can make some adjustments in the control panel.',printAction:!0}),void A.current.handleOpen();var t,a},disabled:"ready"!==B},r.a.createElement(he.a,{fontSize:"small"})))),r.a.createElement(de.a,{title:"Download"},r.a.createElement(Z.a,{className:t.button,onClick:function(){return e._id,t=e.filename,void window.open(T.getFileUrl()+"/"+t);var t},"aria-label":"Download"},r.a.createElement(La.a,{fontSize:"small"}))),r.a.createElement(de.a,{title:"Delete"},r.a.createElement("span",null,r.a.createElement(Z.a,{className:t.button,onClick:function(){return function(e){N(e._id),j(e.originalname),D(!0)}(e)},"aria-label":"Delete",disabled:e._id===parseInt(window.sessionStorage.getItem("print_file_id"))},r.a.createElement(Ot.a,{fontSize:"small"}))))))})))):u?"":r.a.createElement(_t,null),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(U.current.handleOpen(),U.current.setUpload(e.target.files[0]))},type:"file",ref:z}),r.a.createElement(va.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab,onClick:function(e){z.current.click()}},r.a.createElement(Oa.a,null),"Upload File")),r.a.createElement(wa,{open:P,deleteItemName:O,deleteType:"file",onCancelDelete:function(){D(!1)},onConfirmDelete:function(){D(!1),parseInt(S)!==parseInt(window.sessionStorage.getItem("print_file_id"))?Vt.remove(S).then(function(e){var t=I(e);t.valid?L():(E({type:t.type,message:t.message}),A.current.handleOpen())}):(E({type:"error",message:"A file cannot be deleted while it's in the queue."}),A.current.handleOpen())}}),r.a.createElement(aa,{ref:U,onUploadFinish:function(e){"success"!==e.type&&(E({type:e.type,message:e.message}),A.current.handleOpen()),L()},onBeforeUploadError:function(e){E({type:e.type,message:e.message}),A.current.handleOpen()}}),r.a.createElement(ie,{message:f.message,variant:f.type,printStatus:B,printAction:f.printAction,handlePrintNowClick:function(){et("printFile",window.sessionStorage.getItem("print_file_id"))},ref:A}))))}var Ga=a(396),Ma=a(101),qa=a.n(Ma),Ya=a(102),Ja=a.n(Ya),Va=a(119),Ka=a.n(Va),Xa=a(118),Za=a.n(Xa),Qa=a(187),$a=a.n(Qa),en=a(188),tn=a.n(en),an=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)}}});function nn(e){var t=an(),a=Object(n.useState)(10),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),u=m[0],d=m[1],p=function(e){l(e)};Object(n.useEffect)(function(){return $e("info",function(e){d(e.status)}),$e("printStatus",function(e){d(e)}),function(){tt("info"),tt("printStatus")}},[]);var f=function(e){et(e,o)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{container:!0,item:!0,sm:6,spacing:1},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveForward")}},r.a.createElement(Za.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveLeft")}},r.a.createElement($a.a,null)),r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveXYHome")}},r.a.createElement(Be.a,null)),r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveRight")}},r.a.createElement(tn.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveBack")}},r.a.createElement(Ka.a,null))))),r.a.createElement(v.a,{container:!0,item:!0,spacing:1,sm:6},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveUp")}},r.a.createElement(Za.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveZHome")}},r.a.createElement(Be.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveDown")}},r.a.createElement(Ka.a,null)))))),r.a.createElement(v.a,{className:t.lengthSet,container:!0,justify:"center"},r.a.createElement(bt.a,{size:"large",variant:"contained","aria-label":"large contained button group",disabled:"ready"!==u},r.a.createElement(g.a,{color:1===o?"primary":"default",onClick:function(){return p(1)}},"1mm"),r.a.createElement(g.a,{color:10===o?"primary":"default",onClick:function(){return p(10)}},"10mm"),r.a.createElement(g.a,{color:100===o?"primary":"default",onClick:function(){return p(100)}},"100mm"))))}var rn=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)},settingsButton:{marginBottom:e.spacing(1)},card:Object(le.a)({},e.breakpoints.down("xs"),{width:"90vw"})}});function on(e){var t=rn(),a=Object(n.useState)(0),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(""),E=Object(c.a)(p,2),b=E[0],h=E[1],O=Object(n.useState)(""),j=Object(c.a)(O,2),w=j[0],x=j[1],S=Object(n.useState)(""),N=Object(c.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)({}),I=Object(c.a)(T,2),P=I[0],D=I[1];Object(n.useEffect)(function(){return $e("info",function(e){C(e.status),D(e.temperature)}),$e("printStatus",function(e){C(e)}),$e("temperature",function(e){D(e)}),function(){tt("info"),tt("printStatus"),tt("temperature")}},[]);var R=function(e){l(e),0===e?et("fanOff"):et("fanOn",u)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{item:!0},r.a.createElement(ot.a,{className:t.card},r.a.createElement(st.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Fan"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"fanSpeed",className:t.textField,label:"Speed (%)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value&&d(null),e.target.value>0&&e.target.value<=100&&(d(e.target.value),1===o&&et("fanOn",u))},value:u,disabled:"disconnected"===k})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",color:1===o?"primary":"default",onClick:function(){return R(1)},fullWidth:!0,disabled:"disconnected"===k},"On")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",color:0===o?"primary":"default",onClick:function(){return R(0)},fullWidth:!0,disabled:"disconnected"===k},"Off"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(ot.a,{className:t.card},r.a.createElement(st.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Extrude/Retract"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"length",className:t.textField,label:"Length (mm)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value&&h(""),e.target.value>0&&e.target.value<=300&&h(e.target.value)},value:b,disabled:"ready"!==k})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==k,size:"small",fullWidth:!0,onClick:function(){et("extrude",b)}},"Extrude")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==k,size:"small",fullWidth:!0,onClick:function(){et("retract",b)}},"Retract"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(ot.a,{className:t.card},r.a.createElement(st.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Temperature"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"temp",className:t.textField,label:"Temperature (\xb0C)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value?x(""):e.target.value>=0&&e.target.value<=300&&x(e.target.value)},value:w,disabled:"disconnected"===k})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){et("setHeatbedTemperature",w)},disabled:"disconnected"===k},"Set Heatbed ",0!==P.heatbed?"("+P.heatbed+"\xb0C)":"")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){et("setHotendTemperature",w)},disabled:"disconnected"===k},"Set Hotend ",0!==P.hotend?"("+P.hotend+"\xb0C)":"")))))))}var cn=Object(O.a)(function(e){var t;return{root:(t={width:800},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"flexGrow",1),Object(le.a)(t,"margin",0),Object(le.a)(t,"textAlign","center"),t),title:{marginBottom:e.spacing(3)},gridItem:Object(le.a)({},e.breakpoints.down("xs"),{width:"100%"}),button:Object(le.a)({},e.breakpoints.up("sm"),{padding:"15.5px 14px"}),logBox:{height:300,marginBottom:"16px",borderRadius:5,background:"#e0e0e0",fontFamily:"Consolas",padding:"10px",color:"#000000",textAlign:"left",overflowY:"scroll"}}});function ln(e){var t=cn(),a=Object(n.useState)(""),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)([]),m=Object(c.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(""),E=Object(c.a)(p,2),b=E[0],h=E[1],y=Object(n.useRef)();Object(n.useEffect)(function(){return $e("printConsoleLog",function(e){for(var t=[],a=0;a<e.length;a++)t.push({id:a,text:e[a]});d(t),y.current.scrollTop=y.current.scrollHeight}),$e("info",function(e){h(e.status)}),$e("printStatus",function(e){h(e)}),function(){tt("printConsoleLog"),tt("info"),tt("printStatus")}},[]);return r.a.createElement("div",{className:t.root},r.a.createElement(ot.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(st.a,{className:t.content},r.a.createElement("div",{className:t.logBox,ref:y},u.map(function(e){return r.a.createElement("span",{key:e.id},e.text,r.a.createElement("br",null))})),r.a.createElement(v.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,sm:10,className:t.gridItem},r.a.createElement(f.a,{id:"command",className:t.textField,label:"Command",variant:"outlined",type:"text",fullWidth:!0,onChange:function(e){l(e.target.value)},value:o,onKeyDown:function(e){"Enter"===e.key&&""!==o&&et("sendManualCommand",o)},disabled:"disconnected"===b})),r.a.createElement(v.a,{item:!0,sm:2,className:t.gridItem},r.a.createElement(g.a,{className:t.button,variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){""!==o&&et("sendManualCommand",o)},disabled:"disconnected"===b},"Send")))))))}var sn=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},controlWindow:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},listItem:{textAlign:"center"}}});function mn(e){var t=sn(),a=Object(n.useState)(!0),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(!1),m=Object(c.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),g=Object(c.a)(p,2),f=g[0],E=g[1];return r.a.createElement("div",{className:t.root},r.a.createElement(it,{navTitle:"Controls",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Controls")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(Mt,{printer:e.printer}))))),r.a.createElement(xe.a,null,r.a.createElement(Se.a,null),r.a.createElement(Ne.a,{button:!0,className:t.listItem,onClick:function(){E(!f)}},r.a.createElement(Ce.a,{primary:"Console",secondary:"Watch the log and send manual commands"}),f?r.a.createElement(qa.a,null):r.a.createElement(Ja.a,null)),r.a.createElement(Ga.a,{in:f,timeout:"auto"},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(ln,null))))))),r.a.createElement(Se.a,null),r.a.createElement(Ne.a,{button:!0,className:t.listItem,onClick:function(){d(!u)}},r.a.createElement(Ce.a,{primary:"Control Settings",secondary:"Set the fan speed, the temperature and extrude or retract"}),u?r.a.createElement(qa.a,null):r.a.createElement(Ja.a,null)),r.a.createElement(Ga.a,{in:u,timeout:"auto"},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(on,null))),r.a.createElement(Se.a,null),r.a.createElement(Ne.a,{button:!0,className:t.listItem,onClick:function(){l(!o)}},r.a.createElement(Ce.a,{primary:"Axis Controls",secondary:"Move the axis of the printer"}),o?r.a.createElement(qa.a,null):r.a.createElement(Ja.a,null)),r.a.createElement(Ga.a,{in:o,timeout:"auto"},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(nn,null))),r.a.createElement(Se.a,null))))}function un(){return r.a.createElement(it,{navTitle:"Info",backTo:"settings"},"Info page")}var dn=a(189),pn=a.n(dn),gn=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},linearProgress:{marginTop:50,margin:"0 25%"}}});function fn(){var e=gn();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{src:pn.a,alt:"Logo",width:150}),r.a.createElement(xt.a,{className:e.linearProgress}))}var En=r.a.createContext({status:null,setStatus:function(){},info:null,setInfo:function(){}}),bn=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function hn(){var e=bn(),t=Object(n.useRef)(),a=Object(n.useContext)(En),i=Object(n.useState)(""),o=Object(c.a)(i,2),l=o[0],s=o[1],m=Object(n.useState)({error:!1,message:""}),u=Object(c.a)(m,2),p=u[0],E=u[1],b=Object(n.useState)({type:"info",message:""}),v=Object(c.a)(b,2),O=v[0],j=v[1];function x(e){return w.a.isEmpty(e)?(E({error:!0,message:"Please enter a name."}),!1):(E({error:!1,message:""}),!0)}return Object(n.useEffect)(function(){St.getInfo().then(function(e){I(e)&&s(e.name)})},[]),r.a.createElement(it,{navTitle:"Printer Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Printer Details"),r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;x(l)||(n=!1),n&&St.setInfo({name:l}).then(function(e){var n=I(e);n.valid?(a.setInfo({name:e.name}),j({type:"success",message:"Printer Details successfully set."}),t.current.handleOpen()):(j({type:n.type,message:n.message}),t.current.handleOpen())})}},r.a.createElement(ka.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtName",autoComplete:"name",margin:"normal",label:"Name",variant:"outlined",value:l,onChange:function(e){s(e.target.value),x(e.target.value)},error:p.error,helperText:p.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save")))),r.a.createElement(ie,{message:O.message,variant:O.type,ref:t}))}var vn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"light"},typography:{useNextVariants:!0}}),yn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"dark"},typography:{useNextVariants:!0}});function On(){return r.a.createElement(l.a,{exact:!0,to:"/login"})}var jn=function(){var e=Object(n.useState)(null!==window.localStorage.getItem("token")),t=Object(c.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(!1),m=Object(c.a)(o,2),p=m[0],g=m[1],f=Object(n.useState)({}),E=Object(c.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)({}),y=Object(c.a)(v,2),O=y[0],j=y[1],w=Object(n.useState)({}),x=Object(c.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)(null!==window.localStorage.getItem("themeMode")?window.localStorage.getItem("themeMode"):"light"),C=Object(c.a)(k,2),T=C[0],I=C[1];return Object(n.useEffect)(function(){null!==window.localStorage.getItem("token")?(St.getStatus().then(function(e){j(e)}),P.lookup().then(function(e){void 0===e._id?(i(!1),h({authorized:!1}),g(!0)):(i(!0),e.authorized=!0,h(e),g(!0))}),St.getInfo().then(function(e){N(e)})):(h({authorized:!1}),g(!0))},[]),p?r.a.createElement(Ve.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?vn:yn},r.a.createElement(U.Provider,{value:b},r.a.createElement(En.Provider,{value:{status:O,setStatus:j,info:S,setInfo:N}},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(d.a,null),a?r.a.createElement("div",null,r.a.createElement(U.Consumer,null,function(e){return r.a.createElement(En.Consumer,null,function(t){return r.a.createElement("div",null,r.a.createElement(l.b,{exact:!0,path:"/",render:function(a){return r.a.createElement(ra,{user:e,printer:t})}}),r.a.createElement(l.b,{exact:!0,path:"/controls",render:function(e){return r.a.createElement(mn,{printer:t})}}),r.a.createElement(l.b,{exact:!0,path:"/files",render:function(e){return r.a.createElement(Ha,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings",render:function(e){return r.a.createElement(pa,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/connection",render:function(e){return r.a.createElement(Fa,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/printer",render:function(e){return r.a.createElement(hn,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts",render:function(e){return r.a.createElement(Na,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts/add",render:function(e){return r.a.createElement(Ua,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/info",render:function(e){return r.a.createElement(un,e)}}))})})):r.a.createElement(On,null),r.a.createElement(l.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(U.Consumer,null,function(e){return r.a.createElement(ce,{user:e})})}}))))))):r.a.createElement(Ve.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?vn:yn},r.a.createElement(d.a,null),r.a.createElement(fn,null)))},wn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xn(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(jn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");wn?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):xn(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):xn(t,e)})}}()}},[[218,1,2]]]);
//# sourceMappingURL=main.0003ad69.chunk.js.map