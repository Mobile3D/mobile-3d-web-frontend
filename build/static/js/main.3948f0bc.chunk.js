(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,a){e.exports=a.p+"static/media/icon-white.7c495247.svg"},176:function(e,t,a){e.exports=a.p+"static/media/icon-blue.389aa163.svg"},207:function(e,t,a){e.exports=a(311)},212:function(e,t,a){},308:function(e,t){},311:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),i=(a(212),a(6)),l=a(46),s=a(20),m=a(177),u=a(386),d=a(353),p=a(354),g=a(312),f=a(387),E=a(358),b=a(389),h=a(67),v=a(352),y=a(47),O=a(155),j=a(29),w=a.n(j),x=a(150),S=a.n(x),N=a(9),k=a.n(N),C=a(21),T={getUrl:function(){return"http://"+window.location.host.split(":")[0]+":4000/api/v1"},getDefaultHeaders:function(){return{"Content-Type":"application/json"}},getHeaders:function(){return{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")}},getFileUploadHeaders:function(){return{Authorization:"Bearer "+window.localStorage.getItem("token")}},checkToken:function(e){"ER_TOKEN_EXPIRED"===e.code&&window.location.reload()},checkAuth:function(){if(null!==window.localStorage.getItem("token")||null!==window.sessionStorage.getItem("token"))return!0;return!1}};function I(e){return void 0===e.error?{valid:!0}:"ER_MISSING_PARAMS"===e.error.code?{valid:!1,type:"error",message:"Some parameters are missing."}:"ER_USERNAME_TAKEN"===e.error.code?{valid:!1,type:"error",message:"The username you entered is already taken."}:"ER_USER_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested user could not be found."}:"ER_INVALID_LOGIN"===e.error.code?{valid:!1,type:"error",message:"Your username or password is invalid."}:"ER_UNAUTHORIZED"===e.error.code?{valid:!1,type:"error",message:"You need to be signed in to use this service."}:"ER_TOKEN_EXPIRED"===e.error.code?{valid:!1,type:"error",message:"This session expired. Please reload the page and sign in again."}:"ER_UPLOAD_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested upload could not be found. Please try to reload the page."}:"ER_USER_TO_DELETE_SIGNED_IN"===e.error.code?{valid:!1,type:"error",message:"You cannot delete yourself."}:"ER_TOO_MANY_REQUESTS"===e.error.code?{valid:!1,type:"error",message:"Too many requests. Please wait a few seconds and try again."}:"ER_INTERNAL"===e.error.code?{valid:!1,type:"error",message:"An internal error occured. Please try again in a few seconds."}:{valid:!1,type:"error",message:"An unknown error occured. Please try to reload the page."}}var P={login:function(e){return D.apply(this,arguments)},lookup:function(){return R.apply(this,arguments)},add:function(e){return _.apply(this,arguments)},getAll:function(){return B.apply(this,arguments)},get:function(e){return F.apply(this,arguments)},remove:function(e){return A.apply(this,arguments)}};function D(){return(D=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/auth/login",{method:"POST",headers:T.getDefaultHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/user",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return(B=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){return(F=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return(A=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=r.a.createContext({authorized:!1});var z=a(151),L=a(3),W=a(152),H=a.n(W),G=a(154),M=a.n(G),q=a(84),Y=a.n(q),J=a(88),V=a.n(J),K=a(347),X=a(348),Z=a(350),Q=a(392),$=a(349),ee=a(153),te=a.n(ee),ae={success:H.a,warning:te.a,error:M.a,info:Y.a},ne=Object(O.a)(function(e){return{success:{backgroundColor:K.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:X.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function re(e){var t=ne(),a=e.className,n=e.message,o=e.onClose,c=e.variant,i=Object(z.a)(e,["className","message","onClose","variant"]),l=ae[c];return r.a.createElement($.a,Object.assign({className:Object(L.a)(t[c],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(l,{className:Object(L.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Z.a,{key:"close","aria-label":"close",color:"inherit",onClick:o},r.a.createElement(V.a,{className:t.icon}))]},i))}var oe=Object(n.forwardRef)(function(e,t){var a=r.a.useState(!1),o=Object(i.a)(a,2),c=o[0],l=o[1];function s(e,t){"clickaway"!==t&&l(!1)}return Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){l(!0)}}}),r.a.createElement("div",null,r.a.createElement(Q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:c,autoHideDuration:6e3,onClose:s},e.printAction?r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message,action:r.a.createElement(g.a,{color:"secondary",onClick:e.handlePrintNowClick},"Print Now")}):r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message})))}),ce=Object(O.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(images/login-bg.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main,width:60,height:60},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function ie(){var e=ce(),t=Object(n.useContext)(U),a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],s=o[1],m=Object(n.useState)(""),u=Object(i.a)(m,2),O=u[0],j=u[1],x=Object(n.useState)(!1),N=Object(i.a)(x,2),k=N[0],C=N[1],T=Object(n.useState)({error:!1,message:""}),D=Object(i.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)({error:!1,message:""}),F=Object(i.a)(B,2),A=F[0],z=F[1],L=Object(n.useState)({type:"info",message:""}),W=Object(i.a)(L,2),H=W[0],G=W[1],M=Object(n.useRef)();function q(e){return w.a.isEmpty(e)?(_({error:!0,message:"Please enter your username."}),!1):(_({error:!1,message:""}),!0)}function Y(e){return w.a.isEmpty(e)?(z({error:!0,message:"Please enter your password."}),!1):(z({error:!1,message:""}),!0)}return void 0===t.authorized?r.a.createElement("div",null):t.authorized?r.a.createElement(l.a,{exact:!0,to:"/"}):r.a.createElement(v.a,{container:!0,component:"main",className:e.root},r.a.createElement(d.a,null),r.a.createElement(v.a,{item:!0,xs:!1,sm:5,md:7,lg:8,className:e.image}),r.a.createElement(v.a,{item:!0,xs:12,sm:7,md:5,lg:4,component:h.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement("img",{src:S.a,alt:"Logo",width:27})),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign In"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var t=!0;q(c)||(t=!1),Y(O)||(t=!1),t&&P.login({username:c,password:O,remember:k}).then(function(e){var t=I(e);t.valid?(window.localStorage.setItem("token",e.token),window.location.reload()):(G({type:t.type,message:t.message}),M.current.handleOpen())})},noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"txtUsername",label:"Username",name:"txtUsername",autoComplete:"username",autoFocus:!0,onChange:function(e){s(e.target.value),q(e.target.value)},value:c,error:R.error,helperText:R.message}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"txtPassword",label:"Password",type:"password",id:"txtPassword",autoComplete:"current-password",onChange:function(e){j(e.target.value),Y(e.target.value)},value:O,error:A.error,helperText:A.message}),r.a.createElement(E.a,{control:r.a.createElement(b.a,{color:"primary",onChange:function(e){C(!k)},value:k}),label:"Remember me"}),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In")))),r.a.createElement(oe,{message:H.message,variant:H.type,ref:M}))}var le=a(16),se=a(110),me=a(365),ue=a(366),de=a(164),pe=a.n(de),ge=a(163),fe=a.n(ge),Ee=a(359),be=a(357),he=a(363),ve=a(360),ye=a(364),Oe=a(362),je=a(361),we=a(159),xe=a.n(we),Se=a(160),Ne=a.n(Se),ke=a(51),Ce=a.n(ke),Te=a(91),Ie=a.n(Te),Pe=a(90),De=a.n(Pe),Re=a(92),_e=a.n(Re),Be=a(62),Fe=a.n(Be),Ae=a(161),Ue=a.n(Ae),ze=a(162),Le=a.n(ze),We=r.a.createContext({themeStyle:"light",setThemeStyle:function(){}}),He=Object(O.a)(function(e){return{list:{width:250},orangeAvatar:{margin:10,color:"#fff",backgroundColor:xe.a[500]},pinkAvatar:{margin:10,color:"#fff",backgroundColor:Ne.a[400]},link:{textDecoration:"none",color:e.palette.text.primary,"&:focus":{color:e.palette.text.primary},"&:active":{color:e.palette.text.primary}}}});function Ge(e){var t=He(),a=Object(n.useContext)(We),o=function(){localStorage.removeItem("token"),window.location.reload()},c=function(){"light"===a.themeStyle?(a.setThemeStyle("dark"),window.localStorage.setItem("themeMode","dark")):(a.setThemeStyle("light"),window.localStorage.setItem("themeMode","light"))};return r.a.createElement(U.Consumer,null,function(n){return r.a.createElement(Ee.a,{open:e.open,onClose:e.onDrawerClose},r.a.createElement("div",{tabIndex:0,role:"button"},r.a.createElement("div",{className:t.list},r.a.createElement(be.a,null,r.a.createElement(ve.a,null,r.a.createElement(je.a,null,r.a.createElement(p.a,{className:t.pinkAvatar},void 0===n.firstname?"":n.firstname.substr(0,1))),r.a.createElement(Oe.a,{primary:n.firstname+" "+n.lastname}))),r.a.createElement(he.a,null),r.a.createElement(be.a,null,r.a.createElement(s.b,{to:"/",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"home"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(Oe.a,{primary:"Home"}))),r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"controls"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(De.a,null)),r.a.createElement(Oe.a,{primary:"Controls"}))),r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"files"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(Ie.a,null)),r.a.createElement(Oe.a,{primary:"Files"})))),r.a.createElement(he.a,null),r.a.createElement(be.a,null,r.a.createElement(ve.a,{button:!0,onClick:c},r.a.createElement(ye.a,null,"dark"===a.themeStyle?r.a.createElement(Ue.a,null):r.a.createElement(Le.a,null)),r.a.createElement(Oe.a,{primary:"dark"===a.themeStyle?"Light Mode":"Dark Mode"}))),r.a.createElement(he.a,null),r.a.createElement(be.a,null,r.a.createElement(s.b,{to:"/settings",className:t.link},r.a.createElement(ve.a,{button:!0,selected:"settings"===e.selectedPage},r.a.createElement(ye.a,null,r.a.createElement(Fe.a,null)),r.a.createElement(Oe.a,{primary:"Settings"}))),r.a.createElement(ve.a,{button:!0,onClick:o},r.a.createElement(ye.a,null,r.a.createElement(_e.a,null)),r.a.createElement(Oe.a,{primary:"Logout"}))))))})}var Me=Object(O.a)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},search:Object(le.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(se.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(se.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(9),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(le.a)({paddingTop:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(10),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}}),link:{textDecoration:"none",color:"#ffffff","&:focus":{color:"#ffffff"},"&:active":{color:"#ffffff"}}}});function qe(e){var t=Me(),a=Object(n.useState)(!1),o=Object(i.a)(a,2),c=o[0],l=o[1];return r.a.createElement("div",{className:t.root},r.a.createElement(me.a,{position:"fixed"},r.a.createElement(ue.a,null,void 0!==e.backTo?r.a.createElement(s.b,{to:"settings"===e.backTo?"/settings":"accountsettings"===e.backTo?"/settings/accounts":"/",className:t.link},r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Back"},r.a.createElement(fe.a,null))):r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){l(!0)}},r.a.createElement(pe.a,null)),r.a.createElement(y.a,{variant:"h6",color:"inherit",className:t.grow},e.title))),r.a.createElement(Ge,{open:c,onDrawerClose:function(){l(!1)},selectedPage:e.selectedPage}))}function Ye(e){return r.a.createElement("div",null,r.a.createElement(qe,{title:e.navTitle,selectedPage:"not",backTo:e.backTo}),e.children)}var Je=a(367),Ve=a(370),Ke=a(368),Xe=a(369),Ze=a(63),Qe=a.n(Ze),$e=a(165),et=a.n($e),tt=a(93),at=a.n(tt),nt=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:400,height:250},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function rt(e){return"print"===e.action?r.a.createElement(Qe.a,{color:"primary",style:{fontSize:80}}):"home"===e.action?r.a.createElement(Ce.a,{color:"primary",style:{fontSize:80}}):"upload"===e.action?r.a.createElement(et.a,{color:"primary",style:{fontSize:80}}):"files"===e.action?r.a.createElement(Ie.a,{color:"primary",style:{fontSize:80}}):"control"===e.action?r.a.createElement(De.a,{color:"primary",style:{fontSize:80}}):"logout"===e.action?r.a.createElement(_e.a,{color:"primary",style:{fontSize:80}}):"settings"===e.action?r.a.createElement(Fe.a,{color:"primary",style:{fontSize:80}}):r.a.createElement(at.a,{color:"primary",style:{fontSize:80}})}function ot(e){var t=nt();return r.a.createElement(Je.a,null,r.a.createElement(Ke.a,{className:t.cardActionArea},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(rt,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h5",component:"h5",align:"center"},e.title),r.a.createElement(y.a,{className:t.pos,variant:"subtitle1",component:"h6",color:"textSecondary",align:"center"},e.description)),r.a.createElement(Ve.a,null)))}var ct=a(378),it=a(168),lt=a.n(it),st=a(64),mt=a.n(st),ut=a(169),dt=a.n(ut),pt=a(391),gt=a(377),ft={setInfo:function(e){return Et.apply(this,arguments)},getInfo:function(){return bt.apply(this,arguments)},setLoadedFile:function(e){return ht.apply(this,arguments)},getLoadedFile:function(){return vt.apply(this,arguments)},getStatus:function(){return yt.apply(this,arguments)},getProgress:function(){return Ot.apply(this,arguments)}};function Et(){return(Et=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bt(){return(bt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ht(){return(ht=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/file",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vt(){return(vt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/file",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/status",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ot(){return(Ot=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/progress",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var jt=a(371),wt=Object(O.a)(function(e){return{root:{textAlign:"center",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"}}});function xt(){var e=wt();return r.a.createElement("div",{className:e.root},r.a.createElement(jt.a,null))}var St=a(372),Nt=a(376),kt=a(374),Ct=a(375),Tt=a(373);function It(e){return r.a.createElement("div",null,r.a.createElement(St.a,{open:e.open,onClose:e.onCancelStop,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Tt.a,{id:"alert-dialog-title"},'Are you sure you want to stop printing "',e.itemName,'"?'),r.a.createElement(kt.a,null,r.a.createElement(Ct.a,{id:"alert-dialog-description"},"If you stop this print, ",r.a.createElement("b",null,"this action cannot be undone")," and ",r.a.createElement("b",null,"you will have to start over again."))),r.a.createElement(Nt.a,null,r.a.createElement(g.a,{onClick:e.onConfirmDelete,color:"primary"},"Yes"),r.a.createElement(g.a,{onClick:e.onCancelDelete,autoFocus:!0},"No"))))}var Pt={setNextFile:function(e,t){window.sessionStorage.setItem("print_file_id",e),window.sessionStorage.setItem("print_file_name",t),ft.setLoadedFile({id:e,name:t})}};var Dt=a(166),Rt=a.n(Dt)()("http://"+window.location.host.split(":")[0]+":4000",{query:{token:"Bearer "+window.localStorage.getItem("token")}});function _t(e,t){Rt.on(e,function(e){return t(e)})}function Bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t?Rt.emit(e):Rt.emit(e,t)}function Ft(e){Rt.off(e)}var At=Object(O.a)(function(e){var t;return{root:(t={width:600},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"textAlign","center"),t),controls:{alignItems:"center"},playIcon:{height:38,width:38},buttonGroup:{marginTop:e.spacing(3)},link:{textDecoration:"none",color:"#0078d7","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},progressbar:{marginTop:e.spacing(2),marginBottom:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(2)}}});function Ut(e){var t=At(),a=Object(n.useState)({id:window.sessionStorage.getItem("print_file_id"),name:window.sessionStorage.getItem("print_file_name")}),o=Object(i.a)(a,2),c=o[0],l=o[1],m=Object(n.useState)(!1),u=Object(i.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)({}),E=Object(i.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)(""),O=Object(i.a)(v,2),j=O[0],w=O[1],x=Object(n.useState)(!1),S=Object(i.a)(x,2),N=S[0],k=S[1],C=Object(n.useState)(!1),T=Object(i.a)(C,2),I=T[0],P=T[1],D=Object(n.useState)(0!==window.sessionStorage.getItem("print_progress_percentage")?window.sessionStorage.getItem("print_progress_percentage"):0),R=Object(i.a)(D,2),_=R[0],B=R[1];Object(n.useEffect)(function(){ft.getStatus().then(function(e){h(e),k(!0)}),ft.getLoadedFile().then(function(e){null===e.id&&null===e.name||(l(e),Pt.setNextFile(e.id,e.name)),p(!0)})},[]),Object(n.useEffect)(function(){return _t("newFileToPrint",function(e){window.sessionStorage.setItem("print_file_id",e.id),window.sessionStorage.setItem("print_file_name",e.name),l({id:e.id,name:e.name})}),_t("deleteLoadedFile",function(){window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),ft.setLoadedFile({id:null,name:null})}),_t("printProgress",function(e){B(e.sent/e.total*100),window.sessionStorage.setItem("print_progress_percentage",e.sent/e.total*100)}),function(){Ft("newFileToPrint"),Ft("deleteLoadedFile"),Ft("printProgress")}},[]),Object(n.useEffect)(function(){_t("printStatus",function(e){console.log(e),e!==j&&(w(e),"connected"===e?h({connected:!0,ready:!0,busy:b.busy,connecting:!1}):"connecting"===e?h({connected:b.connected,ready:b.ready,busy:b.busy,connecting:!0}):"ready"===e?h({connected:b.connected,ready:!0,busy:b.busy,connecting:!1}):"printing"===e?h({connected:b.connected,ready:!1,busy:b.busy,connecting:!1}):"completed"===e?(window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),window.sessionStorage.removeItem("print_progress_percentage"),l({id:null,name:null})):"stopped"===e?h({connected:b.connected,ready:!0,busy:b.busy,connecting:!1}):"disconnected"===e&&h({connected:!1,ready:!1,busy:b.busy,connecting:!1}))})},[j,b]);return N&&d?r.a.createElement("div",{className:t.root},r.a.createElement(Je.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(Xe.a,{className:t.content},r.a.createElement(y.a,{component:"h5",variant:"h5"},e.printer.info.name),r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:b.connected||b.connecting?"textSecondary":"error"},b.connected&&!b.connecting?"Connected":"Not Connected",b.connecting?"Connecting...":""),r.a.createElement(y.a,{component:"span",variant:"subtitle1"},b.connected?r.a.createElement("span",null,"\xa0-\xa0"):r.a.createElement("span",null)),r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:"stopping"===j?"error":"primary"},b.connected?b.ready?"Ready":"stopping"===j?"Stopping...":"Printing...":r.a.createElement("div",null)),r.a.createElement(y.a,{variant:"subtitle1",color:null!==c.id?"initial":"error"},b.connected&&null===c.id?"No file loaded":c.name),b.connected&&!b.ready?r.a.createElement("div",null,r.a.createElement(gt.a,{className:t.progressbar,variant:"determinate",value:parseInt(_)}),r.a.createElement(y.a,{variant:"subtitle1"},0===Math.floor(_)?"loading...":Math.floor(_)+"%")):r.a.createElement("div",null),b.connected&&null===c.id?r.a.createElement(ct.a,{className:t.buttonGroup,color:"primary","aria-label":"outlined primary button group"},r.a.createElement(g.a,null,r.a.createElement(s.b,{to:"/files",className:t.link},"Choose From Files"))):r.a.createElement("div",null)),r.a.createElement("div",{className:t.controls},!b.connected&&null!==c.id||b.ready&&null!==c.id?r.a.createElement(pt.a,{title:"Remove File"},r.a.createElement("span",null,r.a.createElement(Z.a,{className:t.button,onClick:function(){window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),Bt("deleteLoadedFile")},"aria-label":"Delete"},r.a.createElement(mt.a,{fontSize:"small"})))):r.a.createElement("div",null),r.a.createElement(pt.a,{title:"Start Printing"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"play",disabled:!(b.connected&&b.ready&&null!==c.id),onClick:function(e){Bt("printFile",window.sessionStorage.getItem("print_file_id")),h({connected:b.connected,ready:!1,busy:b.busy,connecting:!1})}},r.a.createElement(lt.a,{className:t.playIcon})))),r.a.createElement(pt.a,{title:"Cancel"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"stop",disabled:!(b.connected&&!b.ready)||"stopping"===j,onClick:function(e){P(!0)}},r.a.createElement(dt.a,null))))))),r.a.createElement(It,{open:I,itemName:c.name,deleteType:"file",onCancelDelete:function(e){P(!1)},onConfirmDelete:function(e){P(!1),Bt("cancelPrint")}})):r.a.createElement("div",null,r.a.createElement(xt,null))}var zt=a(170),Lt=a.n(zt),Wt=a(313),Ht={add:function(e){return Gt.apply(this,arguments)},getAll:function(){return Mt.apply(this,arguments)},get:function(e){return qt.apply(this,arguments)},remove:function(e){return Yt.apply(this,arguments)}};function Gt(){return(Gt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{method:"POST",headers:T.getFileUploadHeaders(),body:t}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mt(){return(Mt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qt(){return(qt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yt(){return(Yt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e){if(e.size%4096!==0&&0!==e.size&&-1!==e.name.indexOf(".")){var t=e.name.split("."),a=t[t.length-1].toLowerCase();return"gcode"===a||"gco"===a||"gc"===a||"g"===a}}var Vt=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},icon:{fontSize:125}}}),Kt=r.a.forwardRef(function(e,t){return r.a.createElement(Wt.a,Object.assign({direction:"up",ref:t},e))}),Xt=Object(n.forwardRef)(function(e,t){var a=Vt(),o=Object(n.useState)(!1),c=Object(i.a)(o,2),l=c[0],s=c[1],m=Object(n.useState)(null),u=Object(i.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),b=E[0],h=E[1];Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){s(!0)},setUpload:function(t){Jt(t)?p(t):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}}});var v=function(){p(null),s(!1)};return r.a.createElement("div",{onDrop:function(t){t.preventDefault(),Jt(t.dataTransfer.files[0])?p(t.dataTransfer.files[0]):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}},r.a.createElement(St.a,{fullScreen:!0,open:l,onClose:v,TransitionComponent:Kt},r.a.createElement(me.a,{className:a.appBar},r.a.createElement(ue.a,null,r.a.createElement(Z.a,{edge:"start",color:"inherit",onClick:v,"aria-label":"close"},r.a.createElement(V.a,null)),r.a.createElement(y.a,{variant:"h6",className:a.title},"Upload Files"),r.a.createElement(g.a,{color:"inherit",onClick:function(){if(null!==d){var t=new FormData;t.append("file",d),h(!0),Ht.add(t).then(function(t){I(t).valid?(Pt.setNextFile(t._id,t.originalname),Bt("loadFile",{id:t._id,name:t.originalname}),e.onUploadFinish({type:"success",message:'File "'+t.originalname+'" successfully uploaded.'})):e.onUploadFinish({type:"error",message:"Files of this type cannot be uploaded."}),h(!1),v()})}},disabled:b},"UPLOAD"))),null!==d?r.a.createElement(be.a,null,r.a.createElement(ve.a,{button:!0},r.a.createElement(Oe.a,{primary:d.name,secondary:d.size/1e3+" KB"})),b?r.a.createElement(gt.a,{className:a.linearProgress}):r.a.createElement(he.a,null)):r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{align:"center",color:"textSecondary",gutterBottom:!0},r.a.createElement(Lt.a,{className:a.icon})),r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textSecondary",gutterBottom:!0},"Drop your GCODE file here"))))}),Zt=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function Qt(e){var t=Zt(),a=Object(n.useState)({type:"info",message:""}),o=Object(i.a)(a,2),c=o[0],l=o[1],m=Object(n.useRef)(),u=Object(n.useRef)(),d=Object(n.useRef)();return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),u.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(Ye,{navTitle:"Home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Welcome Back, ",e.user.firstname+" "+e.user.lastname,".")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(Ut,{printer:e.printer}))))),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(ot,{action:"control",title:"Controls",description:"Print files, control the printer, move the axis"}))),r.a.createElement(v.a,{item:!0},r.a.createElement("div",{onClick:function(){d.current.click()}},r.a.createElement(ot,{action:"upload",title:"Upload",description:"Add files to the printing list"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(ot,{action:"files",title:"Files",description:"View uploaded files, load files, print them again"})))))),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(u.current.handleOpen(),u.current.setUpload(e.target.files[0]))},type:"file",ref:d}),r.a.createElement(Xt,{ref:u,onUploadFinish:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()},onBeforeUploadError:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()}}),r.a.createElement(oe,{message:c.message,variant:c.type,ref:m}))))}var $t=a(172),ea=a.n($t),ta=a(171),aa=a.n(ta),na=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:300,height:180},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function ra(e){return"accounts"===e.action?r.a.createElement(aa.a,{color:"primary",style:{fontSize:60}}):"settings"===e.action?r.a.createElement(Fe.a,{color:"primary",style:{fontSize:60}}):"connection"===e.action?r.a.createElement(ea.a,{color:"primary",style:{fontSize:60}}):"info"===e.action?r.a.createElement(Y.a,{color:"primary",style:{fontSize:60}}):"printer"===e.action?r.a.createElement(Qe.a,{color:"primary",style:{fontSize:60}}):r.a.createElement(at.a,{color:"primary",style:{fontSize:60}})}function oa(e){var t=na();return r.a.createElement(Je.a,null,r.a.createElement(Ke.a,{className:t.cardActionArea},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(ra,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h6",component:"h6",align:"center"},e.title)),r.a.createElement(Ve.a,null)))}var ca=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function ia(){var e=ca();return r.a.createElement(Ye,{navTitle:"Settings",backTo:"home"},r.a.createElement("div",{className:e.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Settings")),r.a.createElement(v.a,{container:!0,className:e.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:e.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/connection",className:e.link},r.a.createElement(oa,{action:"connection",title:"Connection"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/printer",className:e.link},r.a.createElement(oa,{action:"printer",title:"Printer"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/accounts",className:e.link},r.a.createElement(oa,{action:"accounts",title:"Accounts"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/info",className:e.link},r.a.createElement(oa,{action:"info",title:"Info"})))))))}var la=a(379),sa=a(383),ma=a(382),ua=a(380),da=a(381),pa=a(384),ga=a(95),fa=a.n(ga),Ea=a(388);function ba(e){return r.a.createElement("div",null,r.a.createElement(St.a,{open:e.open,onClose:e.onCancelDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Tt.a,{id:"alert-dialog-title"},"Are you sure you want to delete the ",e.deleteType,' "',e.deleteItemName,'"?'),r.a.createElement(kt.a,null,r.a.createElement(Ct.a,{id:"alert-dialog-description"},"This action cannot be undone.")),r.a.createElement(Nt.a,null,r.a.createElement(g.a,{onClick:e.onConfirmDelete,color:"primary"},"Yes"),r.a.createElement(g.a,{onClick:e.onCancelDelete,autoFocus:!0},"No"))))}var ha=r.a.createContext({new:!1,username:""}),va=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},centering:{display:"flex",flexDirection:"column",alignItems:"center"},button:{margin:e.spacing(1)},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function ya(e){var t=va(),a=Object(n.useContext)(ha),o=Object(n.useState)([]),c=Object(i.a)(o,2),l=c[0],m=c[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),p=d[0],g=d[1],f=Object(n.useState)({type:"info",message:""}),E=Object(i.a)(f,2),b=E[0],v=E[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),w=j[0],x=j[1],S=Object(n.useState)(0),N=Object(i.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)(!1),D=Object(i.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)(!1),F=Object(i.a)(B,2),A=F[0],U=F[1],z=Object(n.useRef)();Object(n.useEffect)(function(){P.getAll().then(function(e){var t=I(e);t.valid?(m(e),a.new&&(v({type:"success",message:'User "'+a.username+'" successfully added.'}),a.new=!1,a.username="",z.current.handleOpen())):(v({type:t.type,message:t.message}),z.current.handleOpen()),g(!0),U(!1)})},[a.new,a.username,A]);return r.a.createElement(Ye,{navTitle:"Account Settings",backTo:"settings"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Account Settings")),r.a.createElement("div",{className:t.tableRoot},r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Accounts"),p&&l.length>0?r.a.createElement(h.a,{className:t.table},r.a.createElement(la.a,null,r.a.createElement(ua.a,null,r.a.createElement(da.a,null,r.a.createElement(ma.a,null,"Username"),r.a.createElement(Ea.a,{xsDown:!0},r.a.createElement(ma.a,null,"Firstname"),r.a.createElement(ma.a,null,"Lastname")),r.a.createElement(ma.a,{align:"right"},"Actions"))),r.a.createElement(sa.a,null,l.map(function(e){return r.a.createElement(da.a,{key:e._id},r.a.createElement(ma.a,{component:"th",scope:"row"},e.username),r.a.createElement(Ea.a,{xsDown:!0},r.a.createElement(ma.a,null,e.firstname),r.a.createElement(ma.a,null,e.lastname)),r.a.createElement(ma.a,{align:"right"},r.a.createElement(pt.a,{title:"Delete"},r.a.createElement(Z.a,{onClick:function(){return function(e){C(e._id),x(e.username),_(!0)}(e)},"aria-label":"Delete"},r.a.createElement(mt.a,{fontSize:"small"})))))})))):r.a.createElement(xt,null),r.a.createElement(s.b,{to:"/settings/accounts/add",className:t.link},r.a.createElement(pa.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab},r.a.createElement(fa.a,null),"Add User"))),r.a.createElement(ba,{open:R,deleteItemName:w,deleteType:"user",onCancelDelete:function(){_(!1)},onConfirmDelete:function(){_(!1),P.remove(k).then(function(e){var t=I(e);t.valid?U(!0):(v({type:t.type,message:t.message}),z.current.handleOpen())})}}),r.a.createElement(oe,{message:b.message,variant:b.type,ref:z}))}var Oa=a(355),ja={setConnection:function(e){return wa.apply(this,arguments)},getConnection:function(){return xa.apply(this,arguments)}};function wa(){return(wa=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xa(){return(xa=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Sa=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function Na(){var e=Sa(),t=Object(n.useRef)(),a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),u=m[0],p=m[1],E=Object(n.useState)({error:!1,message:""}),b=Object(i.a)(E,2),v=b[0],O=b[1],j=Object(n.useState)({error:!1,message:""}),x=Object(i.a)(j,2),S=x[0],N=x[1],k=Object(n.useState)({type:"info",message:""}),C=Object(i.a)(k,2),T=C[0],P=C[1];function D(e){return w.a.isEmpty(e)?(O({error:!0,message:"Please enter a port."}),!1):(O({error:!1,message:""}),!0)}function R(e){return w.a.isEmpty(e)?(N({error:!0,message:"Please enter a valid baudrate."}),!1):w.a.isNumeric(e)?(N({error:!1,message:""}),!0):(N({error:!0,message:"Baudrate must be a number."}),!1)}return Object(n.useEffect)(function(){ja.getConnection().then(function(e){I(e)&&(l(e.port),p(e.baudrate))})},[]),r.a.createElement(Ye,{navTitle:"Connection Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Connection"),r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var a=!0;D(c)||(a=!1),R(u)||(a=!1),a&&ja.setConnection({port:c,baudrate:u}).then(function(e){var a=I(e);a.valid?(P({type:"success",message:"Connection details successfully set. The server will restart now."}),t.current.handleOpen(),setTimeout(function(){console.log("restarting..."),window.location.reload()},2e3)):(P({type:a.type,message:a.message}),t.current.handleOpen())})}},r.a.createElement(Oa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtPort",autoComplete:"port",margin:"normal",label:"Port",variant:"outlined",value:c,onChange:function(e){l(e.target.value),D(e.target.value)},error:v.error,helperText:v.message})),r.a.createElement(Oa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtBaudRate",autoComplete:"Baudrate",margin:"normal",label:"Baudrate",variant:"outlined",value:u,onChange:function(e){p(e.target.value),R(e.target.value)},error:S.error,helperText:S.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save")))),r.a.createElement(oe,{message:T.message,variant:T.type,ref:t}))}var ka=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function Ca(){var e=ka(),t=Object(n.useContext)(ha),a=Object(n.useRef)(),o=Object(n.useState)(!1),c=Object(i.a)(o,2),s=c[0],m=c[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),E=p[0],b=p[1],v=Object(n.useState)(""),O=Object(i.a)(v,2),j=O[0],x=O[1],S=Object(n.useState)(""),N=Object(i.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)(""),D=Object(i.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)({error:!1,message:""}),F=Object(i.a)(B,2),A=F[0],U=F[1],z=Object(n.useState)({error:!1,message:""}),L=Object(i.a)(z,2),W=L[0],H=L[1],G=Object(n.useState)({error:!1,message:""}),M=Object(i.a)(G,2),q=M[0],Y=M[1],J=Object(n.useState)({error:!1,message:""}),V=Object(i.a)(J,2),K=V[0],X=V[1],Z=Object(n.useState)({type:"info",message:""}),Q=Object(i.a)(Z,2),$=Q[0],ee=Q[1];function te(e){return w.a.isEmpty(e)?(U({error:!0,message:"Please enter a firstname."}),!1):(U({error:!1,message:""}),!0)}function ae(e){return w.a.isEmpty(e)?(H({error:!0,message:"Please enter a lastname."}),!1):(H({error:!1,message:""}),!0)}function ne(e){return w.a.isEmpty(e)?(Y({error:!0,message:"Please enter a username."}),!1):(Y({error:!1,message:""}),!0)}function re(e){return w.a.isEmpty(e)?(X({error:!0,message:"Please enter a password."}),!1):(X({error:!1,message:""}),!0)}return s?r.a.createElement(l.a,{exact:!0,to:"/settings/accounts"}):r.a.createElement(Ye,{navTitle:"Account Settings",backTo:"accountsettings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Add Account"),r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;te(E)||(n=!1),ae(j)||(n=!1),ne(k)||(n=!1),re(R)||(n=!1),n&&P.add({firstname:E,lastname:j,username:k,password:R,admin:!0}).then(function(e){var n=I(e);n.valid?(t.new=!0,t.username=e.username,m({success:!0,username:e.username})):(ee({type:n.type,message:n.message}),a.current.handleOpen())})}},r.a.createElement(Oa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtFirstname",autoComplete:"firstname",margin:"normal",label:"Firstname",variant:"outlined",value:E,onChange:function(e){b(e.target.value),te(e.target.value)},error:A.error,helperText:A.message})),r.a.createElement(Oa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtLastname",autoComplete:"Lastname",margin:"normal",label:"Lastname",variant:"outlined",value:j,onChange:function(e){x(e.target.value),ae(e.target.value)},error:W.error,helperText:W.message})),r.a.createElement(Oa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtUsername",autoComplete:"username",margin:"normal",label:"Username",variant:"outlined",value:k,onChange:function(e){C(e.target.value),ne(e.target.value)},error:q.error,helperText:q.message})),r.a.createElement(Oa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"password",name:"txtPassword",autoComplete:"password",margin:"normal",label:"Password",variant:"outlined",value:R,onChange:function(e){_(e.target.value),re(e.target.value)},error:K.error,helperText:K.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save"))),r.a.createElement("div",{className:e.centering},r.a.createElement(g.a,{className:e.button,onClick:function(){window.history.back()}},"Back"))),r.a.createElement(oe,{message:$.message,variant:$.type,ref:a}))}var Ta=a(173),Ia=a.n(Ta),Pa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function Da(e){var t=Pa(),a=Object(n.useState)([]),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)({type:"info",message:""}),g=Object(i.a)(p,2),f=g[0],E=g[1],b=Object(n.useState)(""),v=Object(i.a)(b,2),O=v[0],j=v[1],w=Object(n.useState)(0),x=Object(i.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),T=C[0],P=C[1],D=Object(n.useRef)(),R=Object(n.useRef)(),_=Object(n.useRef)();Object(n.useEffect)(function(){B()},[]);var B=function(){Ht.getAll().then(function(e){I(e).valid&&l(e),d(!0)})};return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),R.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(Ye,{navTitle:"Files",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Files")),r.a.createElement("div",{className:t.tableRoot},u&&0===c.length?r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Upload some files to print them."):u&&c.length>0?r.a.createElement(h.a,{className:t.table},r.a.createElement(la.a,null,r.a.createElement(ua.a,null,r.a.createElement(da.a,null,r.a.createElement(ma.a,null,"Name"),r.a.createElement(Ea.a,{xsDown:!0},r.a.createElement(ma.a,null,"Size")),r.a.createElement(ma.a,{align:"right"},"Actions"))),r.a.createElement(sa.a,null,c.map(function(e){return r.a.createElement(da.a,{key:e._id},r.a.createElement(ma.a,{component:"th",scope:"row"},e.originalname),r.a.createElement(Ea.a,{xsDown:!0},r.a.createElement(ma.a,null,e.size/1e3+" KB")),r.a.createElement(ma.a,{align:"right"},r.a.createElement(pt.a,{title:"Print"},r.a.createElement(Z.a,{className:t.button,"aria-label":"Print",onClick:function(){return t=e._id,a=e.originalname,Pt.setNextFile(t,a),Bt("loadFile",{id:t,name:a}),E({type:"info",message:'"'+a+'" is ready to be printed. You can make some adjustments in the control panel.',printAction:!0}),void D.current.handleOpen();var t,a}},r.a.createElement(Qe.a,{fontSize:"small"}))),r.a.createElement(pt.a,{title:"Download"},r.a.createElement(Z.a,{className:t.button,"aria-label":"Download"},r.a.createElement(Ia.a,{fontSize:"small"}))),r.a.createElement(pt.a,{title:"Delete"},r.a.createElement(Z.a,{className:t.button,onClick:function(){return function(e){N(e._id),j(e.originalname),P(!0)}(e)},"aria-label":"Delete"},r.a.createElement(mt.a,{fontSize:"small"})))))})))):u?"":r.a.createElement(xt,null),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(R.current.handleOpen(),R.current.setUpload(e.target.files[0]))},type:"file",ref:_}),r.a.createElement(pa.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab,onClick:function(e){_.current.click()}},r.a.createElement(fa.a,null),"Upload File")),r.a.createElement(ba,{open:T,deleteItemName:O,deleteType:"file",onCancelDelete:function(){P(!1)},onConfirmDelete:function(){P(!1),Ht.remove(S).then(function(e){var t=I(e);t.valid?B():(E({type:t.type,message:t.message}),D.current.handleOpen())})}}),r.a.createElement(Xt,{ref:R,onUploadFinish:function(e){"success"!==e.type&&(E({type:e.type,message:e.message}),D.current.handleOpen()),B()},onBeforeUploadError:function(e){E({type:e.type,message:e.message}),D.current.handleOpen()}}),r.a.createElement(oe,{message:f.message,variant:f.type,printAction:f.printAction,handlePrintNowClick:function(){Bt("printFile",window.sessionStorage.getItem("print_file_id"))},ref:D}))))}var Ra=a(385),_a=a(96),Ba=a.n(_a),Fa=a(97),Aa=a.n(Fa),Ua=a(112),za=a.n(Ua),La=a(111),Wa=a.n(La),Ha=a(174),Ga=a.n(Ha),Ma=a(175),qa=a.n(Ma),Ya=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)}}});function Ja(e){var t=Ya(),a=Object(n.useState)(10),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)({}),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),E=f[0],b=f[1],h=function(e){l(e)};Object(n.useEffect)(function(){ft.getStatus().then(function(e){d(e),b(!0)})},[]),Object(n.useEffect)(function(){return _t("printStatus",function(e){d("ready"!==e&&"connected"!==e?{connected:u.connected,ready:!1,busy:u.busy}:{connected:u.connected,ready:!0,busy:u.busy})}),function(){Ft("printStatus")}});var y=function(e){Bt(e,c)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{container:!0,item:!0,sm:6,spacing:1},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveForward")}},r.a.createElement(Wa.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveLeft")}},r.a.createElement(Ga.a,null)),r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveXYHome")}},r.a.createElement(Ce.a,null)),r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveRight")}},r.a.createElement(qa.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveBack")}},r.a.createElement(za.a,null))))),r.a.createElement(v.a,{container:!0,item:!0,spacing:1,sm:6},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveUp")}},r.a.createElement(Wa.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveZHome")}},r.a.createElement(Ce.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:!E||!u.ready,className:t.button,onClick:function(){return y("moveDown")}},r.a.createElement(za.a,null)))))),r.a.createElement(v.a,{className:t.lengthSet,container:!0,justify:"center"},r.a.createElement(ct.a,{size:"large",variant:"contained","aria-label":"large contained button group",disabled:!E||!u.ready},r.a.createElement(g.a,{color:1===c?"primary":"default",onClick:function(){return h(1)}},"1mm"),r.a.createElement(g.a,{color:10===c?"primary":"default",onClick:function(){return h(10)}},"10mm"),r.a.createElement(g.a,{color:100===c?"primary":"default",onClick:function(){return h(100)}},"100mm"))))}var Va=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)},settingsButton:{marginBottom:e.spacing(1)},card:Object(le.a)({},e.breakpoints.down("xs"),{width:"90vw"})}});function Ka(e){var t=Va(),a=Object(n.useState)(0),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(""),E=Object(i.a)(p,2),b=E[0],h=E[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),w=j[0],x=j[1],S=Object(n.useState)({}),N=Object(i.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)(!1),I=Object(i.a)(T,2),P=I[0],D=I[1];Object(n.useEffect)(function(){ft.getStatus().then(function(e){C(e),D(!0)})},[]),Object(n.useEffect)(function(){_t("printStatus",function(e){C("ready"!==e&&"connected"!==e?{connected:k.connected,ready:!1,busy:k.busy}:{connected:k.connected,ready:!0,busy:k.busy})})},[k]);var R=function(e){l(e),0===e?Bt("fanOff"):Bt("fanOn",u)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{item:!0},r.a.createElement(Je.a,{className:t.card},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Fan"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"fanSpeed",className:t.textField,label:"Speed (%)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value&&d(null),e.target.value>0&&e.target.value<=100&&(d(e.target.value),1===c&&Bt("fanOn",u))},value:u})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",color:1===c?"primary":"default",onClick:function(){return R(1)},fullWidth:!0},"On")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",color:0===c?"primary":"default",onClick:function(){return R(0)},fullWidth:!0},"Off"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(Je.a,{className:t.card},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Extrude/Retract"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"length",className:t.textField,label:"Length (mm)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value&&h(""),e.target.value>0&&e.target.value<=300&&h(e.target.value)},value:b,disabled:!P||!k.ready})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",disabled:!P||!k.ready,size:"small",fullWidth:!0,onClick:function(){Bt("extrude",b)}},"Extrude")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",disabled:!P||!k.ready,size:"small",fullWidth:!0,onClick:function(){Bt("retract",b)}},"Retract"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(Je.a,{className:t.card},r.a.createElement(Xe.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Temperature"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"temp",className:t.textField,label:"Temperature (\xb0C)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value?x(""):e.target.value>=0&&e.target.value<=300&&x(e.target.value)},value:w})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){Bt("setHeatbedTemperature",w)}},"Set Heatbed")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){Bt("setHotendTemperature",w)}},"Set Hotend")))))))}var Xa=Object(O.a)(function(e){var t;return{root:(t={width:800},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"flexGrow",1),Object(le.a)(t,"margin",0),Object(le.a)(t,"textAlign","center"),t),title:{marginBottom:e.spacing(3)},gridItem:Object(le.a)({},e.breakpoints.down("xs"),{width:"100%"}),button:Object(le.a)({},e.breakpoints.up("sm"),{padding:"15.5px 14px"}),logBox:{height:300,marginBottom:"16px",borderRadius:5,background:"#e0e0e0",fontFamily:"Consolas",padding:"10px",color:"#000000",textAlign:"left",overflowY:"scroll"}}});function Za(e){var t=Xa(),a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)([]),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useRef)();Object(n.useEffect)(function(){return _t("printConsoleLog",function(e){for(var t=[],a=0;a<e.length;a++)t.push({id:a,text:e[a]});d(t),p.current.scrollTop=p.current.scrollHeight}),function(){Ft("printConsoleLog")}},[]);return r.a.createElement("div",{className:t.root},r.a.createElement(Je.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(Xe.a,{className:t.content},r.a.createElement("div",{className:t.logBox,ref:p},u.map(function(e){return r.a.createElement("span",{key:e.id},e.text,r.a.createElement("br",null))})),r.a.createElement(v.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,sm:10,className:t.gridItem},r.a.createElement(f.a,{id:"command",className:t.textField,label:"Command",variant:"outlined",type:"text",fullWidth:!0,onChange:function(e){l(e.target.value)},value:c,onKeyDown:function(e){"Enter"===e.key&&""!==c&&Bt("sendManualCommand",c)}})),r.a.createElement(v.a,{item:!0,sm:2,className:t.gridItem},r.a.createElement(g.a,{className:t.button,variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){""!==c&&Bt("sendManualCommand",c)}},"Send")))))))}var Qa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},controlWindow:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},listItem:{textAlign:"center"}}});function $a(e){var t=Qa(),a=Object(n.useState)(!0),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),g=Object(i.a)(p,2),f=g[0],E=g[1];return r.a.createElement("div",{className:t.root},r.a.createElement(Ye,{navTitle:"Controls",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Controls")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(Ut,{printer:e.printer}))))),r.a.createElement(be.a,null,r.a.createElement(he.a,null),r.a.createElement(ve.a,{button:!0,className:t.listItem,onClick:function(){E(!f)}},r.a.createElement(Oe.a,{primary:"Console",secondary:"Watch the log and send manual commands"}),f?r.a.createElement(Ba.a,null):r.a.createElement(Aa.a,null)),r.a.createElement(Ra.a,{in:f,timeout:"auto"},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(Za,null))))))),r.a.createElement(he.a,null),r.a.createElement(ve.a,{button:!0,className:t.listItem,onClick:function(){d(!u)}},r.a.createElement(Oe.a,{primary:"Control Settings",secondary:"Set the fan speed, the temperature and extrude or retract"}),u?r.a.createElement(Ba.a,null):r.a.createElement(Aa.a,null)),r.a.createElement(Ra.a,{in:u,timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(Ka,null))),r.a.createElement(he.a,null),r.a.createElement(ve.a,{button:!0,className:t.listItem,onClick:function(){l(!c)}},r.a.createElement(Oe.a,{primary:"Axis Controls",secondary:"Move the axis of the printer"}),c?r.a.createElement(Ba.a,null):r.a.createElement(Aa.a,null)),r.a.createElement(Ra.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(Ja,null))),r.a.createElement(he.a,null))))}function en(){return r.a.createElement(Ye,{navTitle:"Info",backTo:"settings"},"Info page")}var tn=a(176),an=a.n(tn),nn=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},linearProgress:{marginTop:50,margin:"0 25%"}}});function rn(){var e=nn();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{src:an.a,alt:"Logo",width:150}),r.a.createElement(gt.a,{className:e.linearProgress}))}var on=r.a.createContext({status:null,setStatus:function(){},info:null,setInfo:function(){}}),cn=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function ln(){var e=cn(),t=Object(n.useRef)(),a=Object(n.useContext)(on),o=Object(n.useState)(""),c=Object(i.a)(o,2),l=c[0],s=c[1],m=Object(n.useState)({error:!1,message:""}),u=Object(i.a)(m,2),p=u[0],E=u[1],b=Object(n.useState)({type:"info",message:""}),v=Object(i.a)(b,2),O=v[0],j=v[1];function x(e){return w.a.isEmpty(e)?(E({error:!0,message:"Please enter a name."}),!1):(E({error:!1,message:""}),!0)}return Object(n.useEffect)(function(){ft.getInfo().then(function(e){I(e)&&s(e.name)})},[]),r.a.createElement(Ye,{navTitle:"Printer Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Printer Details"),r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;x(l)||(n=!1),n&&ft.setInfo({name:l}).then(function(e){var n=I(e);n.valid?(a.setInfo({name:e.name}),j({type:"success",message:"Printer Details successfully set."}),t.current.handleOpen()):(j({type:n.type,message:n.message}),t.current.handleOpen())})}},r.a.createElement(Oa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtName",autoComplete:"name",margin:"normal",label:"Name",variant:"outlined",value:l,onChange:function(e){s(e.target.value),x(e.target.value)},error:p.error,helperText:p.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save")))),r.a.createElement(oe,{message:O.message,variant:O.type,ref:t}))}var sn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"light"},typography:{useNextVariants:!0}}),mn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"dark"},typography:{useNextVariants:!0}});function un(){return r.a.createElement(l.a,{exact:!0,to:"/login"})}var dn=function(){var e=Object(n.useState)(null!==window.localStorage.getItem("token")),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),m=Object(i.a)(c,2),p=m[0],g=m[1],f=Object(n.useState)({}),E=Object(i.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)({}),y=Object(i.a)(v,2),O=y[0],j=y[1],w=Object(n.useState)({}),x=Object(i.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)(null!==window.localStorage.getItem("themeMode")?window.localStorage.getItem("themeMode"):"light"),C=Object(i.a)(k,2),T=C[0],I=C[1];return Object(n.useEffect)(function(){null!==window.localStorage.getItem("token")?(ft.getStatus().then(function(e){j(e)}),P.lookup().then(function(e){void 0===e._id?(o(!1),h({authorized:!1}),g(!0)):(o(!0),e.authorized=!0,h(e),g(!0))}),ft.getInfo().then(function(e){N(e)})):(h({authorized:!1}),g(!0))},[]),p?r.a.createElement(We.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?sn:mn},r.a.createElement(U.Provider,{value:b},r.a.createElement(on.Provider,{value:{status:O,setStatus:j,info:S,setInfo:N}},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(d.a,null),a?r.a.createElement("div",null,r.a.createElement(U.Consumer,null,function(e){return r.a.createElement(on.Consumer,null,function(t){return r.a.createElement("div",null,r.a.createElement(l.b,{exact:!0,path:"/",render:function(a){return r.a.createElement(Qt,{user:e,printer:t})}}),r.a.createElement(l.b,{exact:!0,path:"/controls",render:function(e){return r.a.createElement($a,{printer:t})}}),r.a.createElement(l.b,{exact:!0,path:"/files",render:function(e){return r.a.createElement(Da,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings",render:function(e){return r.a.createElement(ia,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/connection",render:function(e){return r.a.createElement(Na,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/printer",render:function(e){return r.a.createElement(ln,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts",render:function(e){return r.a.createElement(ya,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts/add",render:function(e){return r.a.createElement(Ca,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/info",render:function(e){return r.a.createElement(en,e)}}))})})):r.a.createElement(un,null),r.a.createElement(l.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(U.Consumer,null,function(e){return r.a.createElement(ie,{user:e})})}}))))))):r.a.createElement(We.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?sn:mn},r.a.createElement(d.a,null),r.a.createElement(rn,null)))},pn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function gn(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(dn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");pn?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):gn(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):gn(t,e)})}}()}},[[207,1,2]]]);
//# sourceMappingURL=main.3948f0bc.chunk.js.map