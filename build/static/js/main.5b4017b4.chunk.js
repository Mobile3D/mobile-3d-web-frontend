(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){e.exports=a.p+"static/media/icon-white.3260c5c7.svg"},191:function(e,t,a){e.exports=a.p+"static/media/icon-blue.5757a8ee.svg"},219:function(e,t,a){e.exports=a(323)},224:function(e,t,a){},320:function(e,t){},323:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),c=a.n(i),o=(a(224),a(6)),l=a(48),s=a(20),m=a(192),u=a(401),d=a(367),p=a(406),g=a(324),f=a(410),E=a(373),b=a(403),h=a(70),v=a(366),y=a(57),O=a(165),j=a(32),w=a.n(j),x=a(160),S=a.n(x),N=a(10),k=a.n(N),C=a(21),T={getUrl:function(){return"http://"+window.location.host.split(":")[0]+"/api/v1"},getFileUrl:function(){return"http://"+window.location.host.split(":")[0]+"/files"},getDefaultHeaders:function(){return{"Content-Type":"application/json"}},getHeaders:function(){return{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")}},getFileUploadHeaders:function(){return{Authorization:"Bearer "+window.localStorage.getItem("token")}},checkToken:function(e){"ER_TOKEN_EXPIRED"===e.code&&window.location.reload()},checkAuth:function(){if(null!==window.localStorage.getItem("token")||null!==window.sessionStorage.getItem("token"))return!0;return!1}};function I(e){return void 0===e.error?{valid:!0}:"ER_MISSING_PARAMS"===e.error.code?{valid:!1,type:"error",message:"Some parameters are missing."}:"ER_USERNAME_TAKEN"===e.error.code?{valid:!1,type:"error",message:"The username you entered is already taken."}:"ER_USER_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested user could not be found."}:"ER_INVALID_LOGIN"===e.error.code?{valid:!1,type:"error",message:"Your username or password is invalid."}:"ER_UNAUTHORIZED"===e.error.code?{valid:!1,type:"error",message:"You need to be signed in to use this service."}:"ER_TOKEN_EXPIRED"===e.error.code?{valid:!1,type:"error",message:"This session expired. Please reload the page and sign in again."}:"ER_UPLOAD_NOT_FOUND"===e.error.code?{valid:!1,type:"error",message:"The requested upload could not be found. Please try to reload the page."}:"ER_USER_TO_DELETE_SIGNED_IN"===e.error.code?{valid:!1,type:"error",message:"You cannot delete yourself."}:"ER_TOO_MANY_REQUESTS"===e.error.code?{valid:!1,type:"error",message:"Too many requests. Please wait a few seconds and try again."}:"ER_INTERNAL"===e.error.code?{valid:!1,type:"error",message:"An internal error occured. Please try again in a few seconds."}:{valid:!1,type:"error",message:"An unknown error occured. Please try to reload the page."}}var P={login:function(e){return D.apply(this,arguments)},lookup:function(){return R.apply(this,arguments)},add:function(e){return _.apply(this,arguments)},getAll:function(){return B.apply(this,arguments)},get:function(e){return A.apply(this,arguments)},remove:function(e){return U.apply(this,arguments)}};function D(){return(D=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/auth/login",{method:"POST",headers:T.getDefaultHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/user",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return(B=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return(A=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(){return(U=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/users/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var F=r.a.createContext({authorized:!1});var z=a(161),L=a(2),W=a(162),H=a.n(W),G=a(164),M=a.n(G),q=a(87),Y=a.n(q),J=a(91),V=a.n(J),K=a(101),X=a(362),Z=a(364),Q=a(411),$=a(363),ee=a(163),te=a.n(ee),ae={success:H.a,warning:te.a,error:M.a,info:Y.a},ne=Object(O.a)(function(e){return{success:{backgroundColor:K.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:X.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function re(e){var t=ne(),a=e.className,n=e.message,i=e.onClose,c=e.variant,o=Object(z.a)(e,["className","message","onClose","variant"]),l=ae[c];return r.a.createElement($.a,Object.assign({className:Object(L.a)(t[c],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(l,{className:Object(L.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Z.a,{key:"close","aria-label":"close",color:"inherit",onClick:i},r.a.createElement(V.a,{className:t.icon}))]},o))}var ie=Object(n.forwardRef)(function(e,t){var a=r.a.useState(!1),i=Object(o.a)(a,2),c=i[0],l=i[1];function s(e,t){"clickaway"!==t&&l(!1)}return Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){l(!0)}}}),r.a.createElement("div",null,r.a.createElement(Q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:c,autoHideDuration:6e3,onClose:s},e.printAction&&e.printStatus?r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message,action:r.a.createElement(g.a,{color:"secondary",onClick:e.handlePrintNowClick,disabled:"ready"!==e.printStatus},"Print Now")}):r.a.createElement(re,{onClose:s,variant:e.variant,message:e.message})))}),ce=Object(O.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(images/login-bg.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main,width:60,height:60},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function oe(){var e=ce(),t=Object(n.useContext)(F),a=Object(n.useState)(""),i=Object(o.a)(a,2),c=i[0],s=i[1],m=Object(n.useState)(""),u=Object(o.a)(m,2),O=u[0],j=u[1],x=Object(n.useState)(!1),N=Object(o.a)(x,2),k=N[0],C=N[1],T=Object(n.useState)({error:!1,message:""}),D=Object(o.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)({error:!1,message:""}),A=Object(o.a)(B,2),U=A[0],z=A[1],L=Object(n.useState)({type:"info",message:""}),W=Object(o.a)(L,2),H=W[0],G=W[1],M=Object(n.useRef)();function q(e){return w.a.isEmpty(e)?(_({error:!0,message:"Please enter your username."}),!1):(_({error:!1,message:""}),!0)}function Y(e){return w.a.isEmpty(e)?(z({error:!0,message:"Please enter your password."}),!1):(z({error:!1,message:""}),!0)}return void 0===t.authorized?r.a.createElement("div",null):t.authorized?r.a.createElement(l.a,{exact:!0,to:"/"}):r.a.createElement(v.a,{container:!0,component:"main",className:e.root},r.a.createElement(d.a,null),r.a.createElement(v.a,{item:!0,xs:!1,sm:5,md:7,lg:8,className:e.image}),r.a.createElement(v.a,{item:!0,xs:12,sm:7,md:5,lg:4,component:h.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement("img",{src:S.a,alt:"Logo",width:27})),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign In"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var t=!0;q(c)||(t=!1),Y(O)||(t=!1),t&&P.login({username:c,password:O,remember:k}).then(function(e){var t=I(e);t.valid?(window.localStorage.setItem("token",e.token),window.location.reload()):(G({type:t.type,message:t.message}),M.current.handleOpen())})},noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"txtUsername",label:"Username",name:"txtUsername",autoComplete:"username",autoFocus:!0,onChange:function(e){s(e.target.value),q(e.target.value)},value:c,error:R.error,helperText:R.message}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"txtPassword",label:"Password",type:"password",id:"txtPassword",autoComplete:"current-password",onChange:function(e){j(e.target.value),Y(e.target.value)},value:O,error:U.error,helperText:U.message}),r.a.createElement(E.a,{control:r.a.createElement(b.a,{color:"primary",onChange:function(e){C(!k)},value:k}),label:"Remember me"}),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In")))),r.a.createElement(ie,{message:H.message,variant:H.type,ref:M}))}var le=a(17),se=a(118),me=a(379),ue=a(380),de=a(408),pe=a(177),ge=a.n(pe),fe=a(176),Ee=a.n(fe),be=a(45),he=a.n(be),ve=a(96),ye=a.n(ve),Oe=a(179),je=a.n(Oe),we=a(180),xe=a.n(we),Se=a(374),Ne=a(372),ke=a(377),Ce=a(326),Te=a(378),Ie=a(376),Pe=a(375),De=a(171),Re=a.n(De),_e=a(172),Be=a.n(_e),Ae=a(54),Ue=a.n(Ae),Fe=a(94),ze=a.n(Fe),Le=a(93),We=a.n(Le),He=a(95),Ge=a.n(He),Me=a(65),qe=a.n(Me),Ye=a(173),Je=a.n(Ye),Ve=a(174),Ke=a.n(Ve),Xe=r.a.createContext({themeStyle:"light",setThemeStyle:function(){}}),Ze=Object(O.a)(function(e){return{list:{width:250},orangeAvatar:{margin:10,color:"#fff",backgroundColor:Re.a[500]},pinkAvatar:{margin:10,color:"#fff",backgroundColor:Be.a[400]},link:{textDecoration:"none",color:e.palette.text.primary,"&:focus":{color:e.palette.text.primary},"&:active":{color:e.palette.text.primary}}}});function Qe(e){var t=Ze(),a=Object(n.useContext)(Xe),i=function(){localStorage.removeItem("token"),window.location.reload()},c=function(){"light"===a.themeStyle?(a.setThemeStyle("dark"),window.localStorage.setItem("themeMode","dark")):(a.setThemeStyle("light"),window.localStorage.setItem("themeMode","light"))};return r.a.createElement(F.Consumer,null,function(n){return r.a.createElement(Se.a,{open:e.open,onClose:e.onDrawerClose},r.a.createElement("div",{tabIndex:0,role:"button"},r.a.createElement("div",{className:t.list},r.a.createElement(Ne.a,null,r.a.createElement(Ce.a,null,r.a.createElement(Pe.a,null,r.a.createElement(p.a,{className:t.pinkAvatar},void 0===n.firstname?"":n.firstname.substr(0,1))),r.a.createElement(Ie.a,{primary:n.firstname+" "+n.lastname}))),r.a.createElement(ke.a,null),r.a.createElement(Ne.a,null,r.a.createElement(s.b,{to:"/",className:t.link},r.a.createElement(Ce.a,{button:!0,selected:"home"===e.selectedPage},r.a.createElement(Te.a,null,r.a.createElement(Ue.a,null)),r.a.createElement(Ie.a,{primary:"Home"}))),r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(Ce.a,{button:!0,selected:"controls"===e.selectedPage},r.a.createElement(Te.a,null,r.a.createElement(We.a,null)),r.a.createElement(Ie.a,{primary:"Controls"}))),r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(Ce.a,{button:!0,selected:"files"===e.selectedPage},r.a.createElement(Te.a,null,r.a.createElement(ze.a,null)),r.a.createElement(Ie.a,{primary:"Files"})))),r.a.createElement(ke.a,null),r.a.createElement(Ne.a,null,r.a.createElement(Ce.a,{button:!0,onClick:c},r.a.createElement(Te.a,null,"dark"===a.themeStyle?r.a.createElement(Je.a,null):r.a.createElement(Ke.a,null)),r.a.createElement(Ie.a,{primary:"dark"===a.themeStyle?"Light Mode":"Dark Mode"}))),r.a.createElement(ke.a,null),r.a.createElement(Ne.a,null,r.a.createElement(s.b,{to:"/settings",className:t.link},r.a.createElement(Ce.a,{button:!0,selected:"settings"===e.selectedPage},r.a.createElement(Te.a,null,r.a.createElement(qe.a,null)),r.a.createElement(Ie.a,{primary:"Settings"}))),r.a.createElement(Ce.a,{button:!0,onClick:i},r.a.createElement(Te.a,null,r.a.createElement(Ge.a,null)),r.a.createElement(Ie.a,{primary:"Logout"}))))))})}var $e=a(175),et=a.n($e)()("http://"+window.location.host.split(":")[0],{query:{token:"Bearer "+window.localStorage.getItem("token")}});function tt(e){et.on("info",function(t){return e(t)})}function at(e){et.on("status",function(t){return e(t)})}function nt(e){et.on("temperature",function(t){return e(t)})}function rt(e){et.emit("sendManualCommand",e)}function it(e){et.emit("fanOn",e)}function ct(){et.emit("getInfo")}function ot(e){et.emit("printFile",e)}function lt(){et.emit("deleteLoadedFile")}function st(e){et.emit("loadFile",e)}function mt(){et.off("info")}function ut(){et.off("status")}function dt(){et.off("temperature")}function pt(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var gt=Object(O.a)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},search:Object(le.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(se.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(se.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(9),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(le.a)({paddingTop:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(10),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}}),link:{textDecoration:"none",color:"#ffffff","&:focus":{color:"#ffffff"},"&:active":{color:"#ffffff"}}}});function ft(e){var t=gt(),a=Object(n.useState)(!1),i=Object(o.a)(a,2),c=i[0],l=i[1],m=Object(n.useState)(""),u=Object(o.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(!1),f=Object(o.a)(g,2),E=f[0],b=f[1],h=Object(n.useState)(!0),v=Object(o.a)(h,2),O=v[0],j=v[1],w=Object(n.useState)(!0),x=Object(o.a)(w,2),S=x[0],N=x[1];return Object(n.useEffect)(function(){return tt(function(e){p(e.status),b(!0)}),ct(),at(function(e){p(e),b(!0)}),function(){mt(),ut()}},[]),pt(function(){"connecting"===d&&j(!O),"stopping"!==d&&"pausing"!==d||N(!S)},500),r.a.createElement("div",{className:t.root},r.a.createElement(me.a,{position:"fixed"},r.a.createElement(ue.a,null,void 0!==e.backTo?r.a.createElement(s.b,{to:"settings"===e.backTo?"/settings":"accountsettings"===e.backTo?"/settings/accounts":"/",className:t.link},r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Back"},r.a.createElement(Ee.a,null))):r.a.createElement(Z.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){l(!0)}},r.a.createElement(ge.a,null)),r.a.createElement(y.a,{variant:"h6",color:"inherit",className:t.grow},e.title),"pausing"===d||"paused"===d?r.a.createElement(de.a,{title:"pausing"===d?"Pausing...":"Paused"},r.a.createElement("span",null,r.a.createElement(Z.a,{color:"inherit",disableRipple:!0},r.a.createElement(ye.a,null)))):"",r.a.createElement(de.a,{title:"ready"!==d?"stopping"===d||"pausing"===d?"Stopping...":"Printing...":"Ready"},r.a.createElement("span",null,r.a.createElement(Z.a,{color:"inherit",disableRipple:!0,disabled:"printing"!==d&&"stopping"!==d&&"pausing"!==d||"stopping"===d&&S||"pausing"===d&&S||!E},r.a.createElement(he.a,null)))),r.a.createElement(de.a,{title:"disconnected"!==d?"connecting"===d?"Connecting...":"Connected":"Connection failed"},r.a.createElement("span",null,r.a.createElement(Z.a,{color:"inherit",disableRipple:!0,disabled:O&&"connecting"===d},"disconnected"===d?r.a.createElement(je.a,null):r.a.createElement("div",null),"disconnected"!==d?r.a.createElement(xe.a,null):r.a.createElement("div",null)))))),r.a.createElement(Qe,{open:c,onDrawerClose:function(){l(!1)},selectedPage:e.selectedPage}))}function Et(e){return r.a.createElement("div",null,r.a.createElement(ft,{title:e.navTitle,selectedPage:"not",backTo:e.backTo}),e.children)}var bt=a(381),ht=a(384),vt=a(382),yt=a(383),Ot=a(181),jt=a.n(Ot),wt=a(97),xt=a.n(wt),St=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:400,height:250},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function Nt(e){return"print"===e.action?r.a.createElement(he.a,{color:"primary",style:{fontSize:80}}):"home"===e.action?r.a.createElement(Ue.a,{color:"primary",style:{fontSize:80}}):"upload"===e.action?r.a.createElement(jt.a,{color:"primary",style:{fontSize:80}}):"files"===e.action?r.a.createElement(ze.a,{color:"primary",style:{fontSize:80}}):"control"===e.action?r.a.createElement(We.a,{color:"primary",style:{fontSize:80}}):"logout"===e.action?r.a.createElement(Ge.a,{color:"primary",style:{fontSize:80}}):"settings"===e.action?r.a.createElement(qe.a,{color:"primary",style:{fontSize:80}}):r.a.createElement(xt.a,{color:"primary",style:{fontSize:80}})}function kt(e){var t=St();return r.a.createElement(bt.a,null,r.a.createElement(vt.a,{className:t.cardActionArea},r.a.createElement(yt.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(Nt,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h5",component:"h5",align:"center"},e.title),r.a.createElement(y.a,{className:t.pos,variant:"subtitle1",component:"h6",color:"textSecondary",align:"center"},e.description)),r.a.createElement(ht.a,null)))}var Ct=a(409),Tt=a(182),It=a.n(Tt),Pt=a(183),Dt=a.n(Pt),Rt=a(391),_t={setInfo:function(e){return Bt.apply(this,arguments)},getInfo:function(){return At.apply(this,arguments)},setLoadedFile:function(e){return Ut.apply(this,arguments)},getLoadedFile:function(){return Ft.apply(this,arguments)},getStatus:function(){return zt.apply(this,arguments)},getProgress:function(){return Lt.apply(this,arguments)}};function Bt(){return(Bt=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){return(At=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/info",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ut(){return(Ut=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/file",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ft(){return(Ft=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/file",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(){return(zt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/status",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Lt(){return(Lt=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/printer/progress",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Wt=a(385),Ht=Object(O.a)(function(e){return{root:{textAlign:"center",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"}}});function Gt(){var e=Ht();return r.a.createElement("div",{className:e.root},r.a.createElement(Wt.a,null))}var Mt=a(386),qt=a(390),Yt=a(388),Jt=a(389),Vt=a(387);function Kt(e){return r.a.createElement("div",null,r.a.createElement(Mt.a,{open:e.open,onClose:e.onCancelStop,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Vt.a,{id:"alert-dialog-title"},'Are you sure you want to stop printing "',e.itemName,'"?'),r.a.createElement(Yt.a,null,r.a.createElement(Jt.a,{id:"alert-dialog-description"},"If you stop this print, ",r.a.createElement("b",null,"this action cannot be undone")," and ",r.a.createElement("b",null,"you will have to start over again."))),r.a.createElement(qt.a,null,r.a.createElement(g.a,{onClick:e.onConfirmDelete,color:"primary"},"Yes"),r.a.createElement(g.a,{onClick:e.onCancelDelete,autoFocus:!0},"No"))))}function Xt(e){return r.a.createElement("div",null,r.a.createElement(Mt.a,{open:e.open,onClose:e.onConfirmCompletedPrint,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Vt.a,{id:"alert-dialog-title"},"Your item has been printed."),r.a.createElement(Yt.a,null,r.a.createElement(Jt.a,{id:"alert-dialog-description"},"You can remove your item from the printer.")),r.a.createElement(qt.a,null,r.a.createElement(g.a,{onClick:e.onConfirm,color:"primary"},"Okay"))))}var Zt={setNextFile:function(e,t){window.sessionStorage.setItem("print_file_id",e),window.sessionStorage.setItem("print_file_name",t),_t.setLoadedFile({id:e,name:t})},getSize:function(e){return parseInt(e/1024/1024/1024)>0?{size:parseInt(e/1024/1024/1024),unit:"GB"}:parseInt(e/1024/1024)>0?{size:parseInt(e/1024/1024),unit:"MB"}:parseInt(e/1024)>0?{size:parseInt(e/1024),unit:"KB"}:{size:parseInt(e),unit:"Bytes"}}};var Qt=Object(O.a)(function(e){var t;return{root:(t={width:600},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"textAlign","center"),t),controls:{alignItems:"center"},playIcon:{height:38,width:38},button:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},link:{textDecoration:"none",color:"#0078d7","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},progressbar:{marginTop:e.spacing(2),marginBottom:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(2)},temperature:{marginTop:e.spacing(1)},chip:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},status:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}});function $t(e){var t=Qt(),a=Object(n.useState)({id:window.sessionStorage.getItem("print_file_id"),name:window.sessionStorage.getItem("print_file_name")}),i=Object(o.a)(a,2),c=i[0],l=i[1],m=Object(n.useState)(!1),u=Object(o.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(o.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)(!1),O=Object(o.a)(v,2),j=O[0],w=O[1],x=Object(n.useState)(!1),S=Object(o.a)(x,2),N=S[0],k=S[1],C=Object(n.useState)({}),T=Object(o.a)(C,2),I=T[0],P=T[1],D=Object(n.useState)({hotend:{current:"...",set:"..."},heatbed:{current:"...",set:"..."}}),R=Object(o.a)(D,2),_=R[0],B=R[1];Object(n.useEffect)(function(){_t.getLoadedFile().then(function(e){null===e.id&&null===e.name||(l(e),Zt.setNextFile(e.id,e.name)),p(!0)})},[]),Object(n.useEffect)(function(){var e;return tt(function(e){h(e.status),P(e.progress.sent/e.progress.total*100),"completed"===e.status&&(window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),k(!0))}),ct(),e=function(e){window.sessionStorage.setItem("print_file_id",e.id),window.sessionStorage.setItem("print_file_name",e.name),l({id:e.id,name:e.name})},et.on("newFileToPrint",function(t){return e(t)}),function(e){et.on("deleteLoadedFile",function(){return e()})}(function(){window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),_t.setLoadedFile({id:null,name:null})}),at(function(e){h(e),"completed"===e&&(k(!0),window.sessionStorage.removeItem("print_file_id"),l({id:null,name:null}),P(0),lt())}),function(e){et.on("progress",function(t){return e(t)})}(function(e){P(e.sent/e.total*100)}),nt(function(e){B(e)}),function(){mt(),et.off("newFileToPrint"),et.off("deleteLoadedFile"),ut(),et.off("progress"),dt()}},[]);return d?r.a.createElement("div",{className:t.root},r.a.createElement(bt.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(yt.a,{className:t.content},r.a.createElement(y.a,{component:"h5",variant:"h5"},e.printer.info.name),r.a.createElement("div",{className:t.status},r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:"disconnected"!==b&&"pausing"!==b?"textSecondary":"error"},r.a.createElement("b",null,"connecting"===b?"Connecting...":""),r.a.createElement("b",null,"disconnected"===b?"Not Connected":""),r.a.createElement("b",null,"paused"===b?"Paused":""))),r.a.createElement("div",{className:t.status},r.a.createElement(y.a,{component:"span",variant:"subtitle1",color:"stopping"===b||"pausing"===b?"error":"primary"},r.a.createElement("b",null,"ready"===b?"Ready":""),r.a.createElement("b",null,"printing"===b?"Printing...":""),r.a.createElement("b",null,"stopping"===b?"Stopping...":""),r.a.createElement("b",null,"pausing"===b?"Pausing...":""))),r.a.createElement(y.a,{variant:"subtitle1",color:null!==c.id?"initial":"error"},"disconnected"!==b&&"connecting"!==b&&null!==c.id?r.a.createElement("div",{classes:t.chip},"ready"===b&&null!==c.id||"ready"===b&&null!==c.id?r.a.createElement(Ct.a,{label:c.name,onDelete:function(){window.sessionStorage.removeItem("print_file_id"),window.sessionStorage.removeItem("print_file_name"),l({id:null,name:null}),lt()}}):r.a.createElement(Ct.a,{label:c.name})):""),"printing"===b||"stopping"===b||"pausing"===b||"paused"===b?r.a.createElement("div",null,r.a.createElement(Rt.a,{className:t.progressbar,variant:"determinate",value:parseInt(I)}),r.a.createElement(y.a,{variant:"subtitle1"},0===Math.floor(I)?"pausing"===b||"paused"===b||"stopping"===b?"0%":"starting...":Math.floor(I)+"%")):r.a.createElement("div",null),"disconnected"!==b&&"connecting"!==b&&null===c.id?r.a.createElement(g.a,{className:t.button,variant:"outlined",color:"primary","aria-label":"outlined primary button group"},r.a.createElement(s.b,{to:"/files",className:t.link},"Choose A File")):r.a.createElement("div",null),r.a.createElement("div",{className:t.temperature},r.a.createElement(y.a,{component:"div",variant:"subtitle1"},r.a.createElement("b",null,"disconnected"!==b&&"connecting"!==b?"Temperature":"")),r.a.createElement(y.a,{component:"div",variant:"subtitle1",color:"initial"},"disconnected"!==b&&"connecting"!==b?r.a.createElement("table",{align:"center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Hotend:"),r.a.createElement("td",null,r.a.createElement("b",null,_.hotend.current+"\xb0C")),r.a.createElement("td",null,"("+_.hotend.set+"\xb0C)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Heatbed:"),r.a.createElement("td",null,r.a.createElement("b",null,_.heatbed.current+"\xb0C")),r.a.createElement("td",null,"("+_.heatbed.set+"\xb0C)")))):""))),r.a.createElement("div",{className:t.controls},r.a.createElement(de.a,{title:"Pause"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"pause",disabled:"printing"!==b||"paused"===b,onClick:function(e){et.emit("pausePrint")}},r.a.createElement(ye.a,null)))),r.a.createElement(de.a,{title:"pausing"===b||"paused"===b?"Continue":"Start"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"play",disabled:!("disconnected"!==b&&("ready"===b||"paused"===b)&&null!==c.id),onClick:function(e){"paused"===b?et.emit("unpausePrint"):ot(window.sessionStorage.getItem("print_file_id"))}},r.a.createElement(It.a,{className:t.playIcon})))),r.a.createElement(de.a,{title:"Cancel"},r.a.createElement("span",null,r.a.createElement(Z.a,{"aria-label":"stop",disabled:!("disconnected"!==b&&"ready"!==b)||"stopping"===b||"pausing"===b||"paused"===b||"connecting"===b,onClick:function(e){w(!0)}},r.a.createElement(Dt.a,null))))))),r.a.createElement(Kt,{open:j,itemName:c.name,deleteType:"file",onCancelDelete:function(e){w(!1)},onConfirmDelete:function(e){w(!1),et.emit("cancelPrint")}}),r.a.createElement(Xt,{open:N,onConfirm:function(){k(!1),window.sessionStorage.removeItem("print_file_name")}})):r.a.createElement("div",null,r.a.createElement(Gt,null))}var ea=a(184),ta=a.n(ea),aa=a(325),na={add:function(e){return ra.apply(this,arguments)},getAll:function(){return ia.apply(this,arguments)},get:function(e){return ca.apply(this,arguments)},remove:function(e){return oa.apply(this,arguments)}};function ra(){return(ra=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{method:"POST",headers:T.getFileUploadHeaders(),body:t}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ia(){return(ia=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ca(){return(ca=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oa(){return(oa=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/uploads/"+t,{method:"DELETE",headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function la(e){if(e.size%4096!==0&&0!==e.size&&-1!==e.name.indexOf(".")){var t=e.name.split("."),a=t[t.length-1].toLowerCase();return"gcode"===a||"gco"===a||"gc"===a||"g"===a}}var sa=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},icon:{fontSize:125}}}),ma=r.a.forwardRef(function(e,t){return r.a.createElement(aa.a,Object.assign({direction:"up",ref:t},e))}),ua=Object(n.forwardRef)(function(e,t){var a=sa(),i=Object(n.useState)(!1),c=Object(o.a)(i,2),l=c[0],s=c[1],m=Object(n.useState)(null),u=Object(o.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(o.a)(f,2),b=E[0],h=E[1];Object(n.useImperativeHandle)(t,function(){return{handleOpen:function(){s(!0)},setUpload:function(t){la(t)?p(t):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}}});var v=function(){p(null),s(!1)};return r.a.createElement("div",{onDrop:function(t){t.preventDefault(),la(t.dataTransfer.files[0])?p(t.dataTransfer.files[0]):(v(),e.onBeforeUploadError({type:"error",message:"Files of this type cannot be uploaded. Please upload a GCODE file."}))}},r.a.createElement(Mt.a,{fullScreen:!0,open:l,onClose:v,TransitionComponent:ma},r.a.createElement(me.a,{className:a.appBar},r.a.createElement(ue.a,null,r.a.createElement(Z.a,{edge:"start",color:"inherit",onClick:v,"aria-label":"close"},r.a.createElement(V.a,null)),r.a.createElement(y.a,{variant:"h6",className:a.title},"Upload Files"),r.a.createElement(g.a,{color:"inherit",onClick:function(){if(null!==d){var t=new FormData;t.append("file",d),h(!0),na.add(t).then(function(t){I(t).valid?(Zt.setNextFile(t._id,t.originalname),st({id:t._id,name:t.originalname}),e.onUploadFinish({type:"success",message:'File "'+t.originalname+'" successfully uploaded.'})):e.onUploadFinish({type:"error",message:"Files of this type cannot be uploaded."}),h(!1),v()})}},disabled:b},"UPLOAD"))),null!==d?r.a.createElement(Ne.a,null,r.a.createElement(Ce.a,{button:!0},r.a.createElement(Ie.a,{primary:d.name,secondary:d.size/1e3+" KB"})),b?r.a.createElement(Rt.a,{className:a.linearProgress}):r.a.createElement(ke.a,null)):r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{align:"center",color:"textSecondary",gutterBottom:!0},r.a.createElement(ta.a,{className:a.icon})),r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textSecondary",gutterBottom:!0},"Drop your GCODE file here"))))}),da=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function pa(e){var t=da(),a=Object(n.useState)({type:"info",message:""}),i=Object(o.a)(a,2),c=i[0],l=i[1],m=Object(n.useRef)(),u=Object(n.useRef)(),d=Object(n.useRef)();return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),u.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(Et,{navTitle:"Home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Welcome Back, ",e.user.firstname+" "+e.user.lastname,".")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement($t,{printer:e.printer}))))),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/controls",className:t.link},r.a.createElement(kt,{action:"control",title:"Controls",description:"Print files, control the printer, move the axis"}))),r.a.createElement(v.a,{item:!0},r.a.createElement("div",{onClick:function(){d.current.click()}},r.a.createElement(kt,{action:"upload",title:"Upload",description:"Add files to the printing list"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/files",className:t.link},r.a.createElement(kt,{action:"files",title:"Files",description:"View uploaded files, load files, print them again"})))))),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(u.current.handleOpen(),u.current.setUpload(e.target.files[0]))},type:"file",ref:d}),r.a.createElement(ua,{ref:u,onUploadFinish:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()},onBeforeUploadError:function(e){l({type:e.type,message:e.message}),m.current.handleOpen()}}),r.a.createElement(ie,{message:c.message,variant:c.type,ref:m}))))}var ga=a(186),fa=a.n(ga),Ea=a(185),ba=a.n(Ea),ha=Object(O.a)(function(e){return{cardActionArea:Object(le.a)({width:300,height:180},e.breakpoints.down("xs"),{width:"90vw"}),pos:{marginBottom:0,marginTop:0}}});function va(e){return"accounts"===e.action?r.a.createElement(ba.a,{color:"primary",style:{fontSize:60}}):"settings"===e.action?r.a.createElement(qe.a,{color:"primary",style:{fontSize:60}}):"connection"===e.action?r.a.createElement(fa.a,{color:"primary",style:{fontSize:60}}):"info"===e.action?r.a.createElement(Y.a,{color:"primary",style:{fontSize:60}}):"printer"===e.action?r.a.createElement(he.a,{color:"primary",style:{fontSize:60}}):r.a.createElement(xt.a,{color:"primary",style:{fontSize:60}})}function ya(e){var t=ha();return r.a.createElement(bt.a,null,r.a.createElement(vt.a,{className:t.cardActionArea},r.a.createElement(yt.a,null,r.a.createElement(y.a,{className:t.pos,variant:"h1",component:"h1",align:"center"},r.a.createElement(va,{action:e.action})),r.a.createElement(y.a,{className:t.pos,variant:"h6",component:"h6",align:"center"},e.title)),r.a.createElement(ht.a,null)))}var Oa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function ja(){var e=Oa();return r.a.createElement(Et,{navTitle:"Settings",backTo:"home"},r.a.createElement("div",{className:e.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Settings")),r.a.createElement(v.a,{container:!0,className:e.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:e.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/connection",className:e.link},r.a.createElement(ya,{action:"connection",title:"Connection"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/printer",className:e.link},r.a.createElement(ya,{action:"printer",title:"Printer"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/accounts",className:e.link},r.a.createElement(ya,{action:"accounts",title:"Accounts"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(s.b,{to:"/settings/info",className:e.link},r.a.createElement(ya,{action:"info",title:"Info"})))))))}var wa=a(392),xa=a(396),Sa=a(395),Na=a(393),ka=a(394),Ca=a(99),Ta=a.n(Ca),Ia=a(397),Pa=a(100),Da=a.n(Pa),Ra=a(404);function _a(e){return r.a.createElement("div",null,r.a.createElement(Mt.a,{open:e.open,onClose:e.onCancelDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Vt.a,{id:"alert-dialog-title"},"Are you sure you want to delete the ",e.deleteType,' "',e.deleteItemName,'"?'),r.a.createElement(Yt.a,null,r.a.createElement(Jt.a,{id:"alert-dialog-description"},"This action cannot be undone.")),r.a.createElement(qt.a,null,r.a.createElement(g.a,{onClick:e.onConfirmDelete,color:"primary"},"Yes"),r.a.createElement(g.a,{onClick:e.onCancelDelete,autoFocus:!0},"No"))))}var Ba=r.a.createContext({new:!1,username:""}),Aa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},centering:{display:"flex",flexDirection:"column",alignItems:"center"},button:{margin:e.spacing(1)},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}}}});function Ua(e){var t=Aa(),a=Object(n.useContext)(Ba),i=Object(n.useState)([]),c=Object(o.a)(i,2),l=c[0],m=c[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),p=d[0],g=d[1],f=Object(n.useState)({type:"info",message:""}),E=Object(o.a)(f,2),b=E[0],v=E[1],O=Object(n.useState)(""),j=Object(o.a)(O,2),w=j[0],x=j[1],S=Object(n.useState)(0),N=Object(o.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)(!1),D=Object(o.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)(!1),A=Object(o.a)(B,2),U=A[0],F=A[1],z=Object(n.useRef)();Object(n.useEffect)(function(){P.getAll().then(function(e){var t=I(e);t.valid?(m(e),a.new&&(v({type:"success",message:'User "'+a.username+'" successfully added.'}),a.new=!1,a.username="",z.current.handleOpen())):(v({type:t.type,message:t.message}),z.current.handleOpen()),g(!0),F(!1)})},[a.new,a.username,U]);return r.a.createElement(Et,{navTitle:"Account Settings",backTo:"settings"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Account Settings")),r.a.createElement("div",{className:t.tableRoot},r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Accounts"),p&&l.length>0?r.a.createElement(h.a,{className:t.table},r.a.createElement(wa.a,null,r.a.createElement(Na.a,null,r.a.createElement(ka.a,null,r.a.createElement(Sa.a,null,"Username"),r.a.createElement(Ra.a,{xsDown:!0},r.a.createElement(Sa.a,null,"Firstname"),r.a.createElement(Sa.a,null,"Lastname")),r.a.createElement(Sa.a,{align:"right"},"Actions"))),r.a.createElement(xa.a,null,l.map(function(e){return r.a.createElement(ka.a,{key:e._id},r.a.createElement(Sa.a,{component:"th",scope:"row"},e.username),r.a.createElement(Ra.a,{xsDown:!0},r.a.createElement(Sa.a,null,e.firstname),r.a.createElement(Sa.a,null,e.lastname)),r.a.createElement(Sa.a,{align:"right"},r.a.createElement(de.a,{title:"Delete"},r.a.createElement(Z.a,{onClick:function(){return function(e){C(e._id),x(e.username),_(!0)}(e)},"aria-label":"Delete"},r.a.createElement(Ta.a,{fontSize:"small"})))))})))):r.a.createElement(Gt,null),r.a.createElement(s.b,{to:"/settings/accounts/add",className:t.link},r.a.createElement(Ia.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab},r.a.createElement(Da.a,null),"Add User"))),r.a.createElement(_a,{open:R,deleteItemName:w,deleteType:"user",onCancelDelete:function(){_(!1)},onConfirmDelete:function(){_(!1),P.remove(k).then(function(e){var t=I(e);t.valid?F(!0):(v({type:t.type,message:t.message}),z.current.handleOpen())})}}),r.a.createElement(ie,{message:b.message,variant:b.type,ref:z}))}var Fa=a(370),za=a(402),La=a(398),Wa=a(407),Ha={setConnection:function(e){return Ga.apply(this,arguments)},getConnection:function(){return Ma.apply(this,arguments)},getPorts:function(){return qa.apply(this,arguments)}};function Ga(){return(Ga=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{method:"POST",headers:T.getHeaders(),body:JSON.stringify(t)}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ma(){return(Ma=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qa(){return(qa=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T.getUrl()+"/connection/ports",{headers:T.getHeaders()}).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ya=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function Ja(){var e=Ya(),t=Object(n.useRef)(),a=Object(n.useState)([]),i=Object(o.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),u=m[0],p=m[1],E=Object(n.useState)(!1),b=Object(o.a)(E,2),v=b[0],O=b[1],j=Object(n.useState)(""),x=Object(o.a)(j,2),S=x[0],N=x[1],k=Object(n.useState)({error:!1,message:""}),C=Object(o.a)(k,2),T=C[0],P=C[1],D=Object(n.useState)({type:"info",message:""}),R=Object(o.a)(D,2),_=R[0],B=R[1],A=Object(n.useState)(!1),U=Object(o.a)(A,2),F=U[0],z=U[1],L=Object(n.useState)(!1),W=Object(o.a)(L,2),H=W[0],G=W[1],M=Object(n.useState)(!0),q=Object(o.a)(M,2),Y=q[0],J=q[1],V=Object(n.useRef)(),K=Object(n.useState)(0),X=Object(o.a)(K,2),Z=X[0],Q=X[1];function $(e){return w.a.isEmpty(e)?(P({error:!0,message:"Please enter a valid baudrate."}),!1):w.a.isNumeric(e)?(P({error:!1,message:""}),!0):(P({error:!0,message:"Baudrate must be a number."}),!1)}return Object(n.useEffect)(function(){F&&H&&Q(V.current.offsetWidth)},[H,F]),Object(n.useEffect)(function(){Ha.getConnection().then(function(e){I(e)&&(p(e.port),l([{comName:e.port,manufacturer:"unavailable"}]),N(e.baudrate)),z(!0)}),Ha.getPorts().then(function(e){I(e)&&(e.length>0?(l(e),J(!1)):J(!0)),G(!0)})},[]),pt(function(){Ha.getPorts().then(function(e){I(e)&&(e.length>0?(l(e),J(!1)):J(!0)),G(!0)})},2e3),r.a.createElement(Et,{navTitle:"Connection Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Connection"),F&&H?r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var a=!0;$(S)||(a=!1),a&&Ha.setConnection({port:u,baudrate:S}).then(function(e){var a=I(e);a.valid?(B({type:"success",message:"Connection details successfully set. The server will restart now."}),t.current.handleOpen()):(B({type:a.type,message:a.message}),t.current.handleOpen())})}},r.a.createElement(Fa.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Wa.a,{ref:V,id:"demo-simple-select-outlined-label"},"Port"),r.a.createElement(za.a,{id:"demo-controlled-open-select",variant:"outlined",open:v,onClose:function(){O(!1)},onOpen:function(){O(!0)},value:u,onChange:function(e){p(e.target.value)},labelWidth:Z,disabled:Y},c.map(function(e){return r.a.createElement(La.a,{key:e.comName,value:e.comName},e.comName+" ("+e.manufacturer+")")}))),r.a.createElement(Fa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtBaudRate",autoComplete:"Baudrate",margin:"normal",label:"Baudrate",variant:"outlined",value:S,onChange:function(e){N(e.target.value),$(e.target.value)},error:T.error,helperText:T.message,disabled:Y})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:Y},Y?"No ports available":"Save"))):r.a.createElement(Gt,null)),r.a.createElement(ie,{message:_.message,variant:_.type,ref:t}))}var Va=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function Ka(){var e=Va(),t=Object(n.useContext)(Ba),a=Object(n.useRef)(),i=Object(n.useState)(!1),c=Object(o.a)(i,2),s=c[0],m=c[1],u=Object(n.useState)(""),p=Object(o.a)(u,2),E=p[0],b=p[1],v=Object(n.useState)(""),O=Object(o.a)(v,2),j=O[0],x=O[1],S=Object(n.useState)(""),N=Object(o.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)(""),D=Object(o.a)(T,2),R=D[0],_=D[1],B=Object(n.useState)({error:!1,message:""}),A=Object(o.a)(B,2),U=A[0],F=A[1],z=Object(n.useState)({error:!1,message:""}),L=Object(o.a)(z,2),W=L[0],H=L[1],G=Object(n.useState)({error:!1,message:""}),M=Object(o.a)(G,2),q=M[0],Y=M[1],J=Object(n.useState)({error:!1,message:""}),V=Object(o.a)(J,2),K=V[0],X=V[1],Z=Object(n.useState)({type:"info",message:""}),Q=Object(o.a)(Z,2),$=Q[0],ee=Q[1];function te(e){return w.a.isEmpty(e)?(F({error:!0,message:"Please enter a firstname."}),!1):(F({error:!1,message:""}),!0)}function ae(e){return w.a.isEmpty(e)?(H({error:!0,message:"Please enter a lastname."}),!1):(H({error:!1,message:""}),!0)}function ne(e){return w.a.isEmpty(e)?(Y({error:!0,message:"Please enter a username."}),!1):(Y({error:!1,message:""}),!0)}function re(e){return w.a.isEmpty(e)?(X({error:!0,message:"Please enter a password."}),!1):(X({error:!1,message:""}),!0)}return s?r.a.createElement(l.a,{exact:!0,to:"/settings/accounts"}):r.a.createElement(Et,{navTitle:"Account Settings",backTo:"accountsettings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Add Account"),r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;te(E)||(n=!1),ae(j)||(n=!1),ne(k)||(n=!1),re(R)||(n=!1),n&&P.add({firstname:E,lastname:j,username:k,password:R,admin:!0}).then(function(e){var n=I(e);n.valid?(t.new=!0,t.username=e.username,m({success:!0,username:e.username})):(ee({type:n.type,message:n.message}),a.current.handleOpen())})}},r.a.createElement(Fa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtFirstname",autoComplete:"firstname",margin:"normal",label:"Firstname",variant:"outlined",value:E,onChange:function(e){b(e.target.value),te(e.target.value)},error:U.error,helperText:U.message})),r.a.createElement(Fa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtLastname",autoComplete:"Lastname",margin:"normal",label:"Lastname",variant:"outlined",value:j,onChange:function(e){x(e.target.value),ae(e.target.value)},error:W.error,helperText:W.message})),r.a.createElement(Fa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtUsername",autoComplete:"username",margin:"normal",label:"Username",variant:"outlined",value:k,onChange:function(e){C(e.target.value),ne(e.target.value)},error:q.error,helperText:q.message})),r.a.createElement(Fa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"password",name:"txtPassword",autoComplete:"password",margin:"normal",label:"Password",variant:"outlined",value:R,onChange:function(e){_(e.target.value),re(e.target.value)},error:K.error,helperText:K.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save"))),r.a.createElement("div",{className:e.centering},r.a.createElement(g.a,{className:e.button,onClick:function(){window.history.back()}},"Back"))),r.a.createElement(ie,{message:$.message,variant:$.type,ref:a}))}var Xa=a(188),Za=a.n(Xa),Qa=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},fullscreen:{width:"100%",height:"100vh"},options:{marginBottom:e.spacing(2)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},tableRoot:{margin:0,width:"100%",marginBottom:e.spacing(13)},table:Object(le.a)({margin:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(20),marginRight:e.spacing(20)}),fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed",zIndex:2},link:{textDecoration:"none",color:"black","&:focus":{color:"#0078d7"},"&:active":{color:"#0078d7"}},inputFile:{display:"none"}}});function $a(e){var t=Qa(),a=Object(n.useState)([]),i=Object(o.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(!1),m=Object(o.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)({type:"info",message:""}),g=Object(o.a)(p,2),f=g[0],E=g[1],b=Object(n.useState)(""),v=Object(o.a)(b,2),O=v[0],j=v[1],w=Object(n.useState)(0),x=Object(o.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)(!1),C=Object(o.a)(k,2),P=C[0],D=C[1],R=Object(n.useState)({}),_=Object(o.a)(R,2),B=_[0],A=_[1],U=Object(n.useRef)(),F=Object(n.useRef)(),z=Object(n.useRef)();Object(n.useEffect)(function(){return L(),tt(function(e){A(e.status)}),ct(),at(function(e){A(e)}),function(){mt(),ut()}},[]);var L=function(){na.getAll().then(function(e){I(e).valid&&l(e),d(!0)})};return r.a.createElement("div",{onDragOver:function(e){e.preventDefault(),F.current.handleOpen()}},r.a.createElement("div",{className:t.fullscreen},r.a.createElement(Et,{navTitle:"Files",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Files")),r.a.createElement("div",{className:t.tableRoot},u&&0===c.length?r.a.createElement(y.a,{component:"h5",variant:"h5",align:"center",color:"textPrimary",gutterBottom:!0},"Upload some files to print them."):u&&c.length>0?r.a.createElement(h.a,{className:t.table},r.a.createElement(wa.a,null,r.a.createElement(Na.a,null,r.a.createElement(ka.a,null,r.a.createElement(Sa.a,null,"Name"),r.a.createElement(Ra.a,{xsDown:!0},r.a.createElement(Sa.a,null,"Size")),r.a.createElement(Sa.a,{align:"right"},"Actions"))),r.a.createElement(xa.a,null,c.map(function(e){return r.a.createElement(ka.a,{key:e._id},r.a.createElement(Sa.a,{component:"th",scope:"row"},e.originalname),r.a.createElement(Ra.a,{xsDown:!0},r.a.createElement(Sa.a,null,Zt.getSize(e.size).size+" "+Zt.getSize(e.size).unit)),r.a.createElement(Sa.a,{align:"right"},r.a.createElement(de.a,{title:"Print"},r.a.createElement("span",null,r.a.createElement(Z.a,{className:t.button,"aria-label":"Print",onClick:function(){return t=e._id,a=e.originalname,Zt.setNextFile(t,a),st({id:t,name:a}),E({type:"info",message:'"'+a+'" is ready to be printed. You can make some adjustments in the control panel.',printAction:!0}),void U.current.handleOpen();var t,a},disabled:"ready"!==B||e._id===parseInt(window.sessionStorage.getItem("print_file_id"))},r.a.createElement(he.a,{fontSize:"small"})))),r.a.createElement(de.a,{title:"Download"},r.a.createElement(Z.a,{className:t.button,onClick:function(){return e._id,t=e.filename,void window.open(T.getFileUrl()+"/"+t);var t},"aria-label":"Download"},r.a.createElement(Za.a,{fontSize:"small"}))),r.a.createElement(de.a,{title:"Delete"},r.a.createElement("span",null,r.a.createElement(Z.a,{className:t.button,onClick:function(){return function(e){N(e._id),j(e.originalname),D(!0)}(e)},"aria-label":"Delete",disabled:e._id===parseInt(window.sessionStorage.getItem("print_file_id"))},r.a.createElement(Ta.a,{fontSize:"small"}))))))})))):u?"":r.a.createElement(Gt,null),r.a.createElement("input",{className:t.inputFile,id:"fleUpload",name:"fleUpload",onChange:function(e){void 0!==e.target.files[0]&&(F.current.handleOpen(),F.current.setUpload(e.target.files[0]))},type:"file",ref:z}),r.a.createElement(Ia.a,{variant:"extended",size:"large",color:"primary","aria-label":"Add",className:t.fab,onClick:function(e){z.current.click()}},r.a.createElement(Da.a,null),"Upload File")),r.a.createElement(_a,{open:P,deleteItemName:O,deleteType:"file",onCancelDelete:function(){D(!1)},onConfirmDelete:function(){D(!1),parseInt(S)!==parseInt(window.sessionStorage.getItem("print_file_id"))?na.remove(S).then(function(e){var t=I(e);t.valid?L():(E({type:t.type,message:t.message}),U.current.handleOpen())}):(E({type:"error",message:"A file cannot be deleted while it's in the queue."}),U.current.handleOpen())}}),r.a.createElement(ua,{ref:F,onUploadFinish:function(e){"success"!==e.type&&(E({type:e.type,message:e.message}),U.current.handleOpen()),L()},onBeforeUploadError:function(e){E({type:e.type,message:e.message}),U.current.handleOpen()}}),r.a.createElement(ie,{message:f.message,variant:f.type,printStatus:B,printAction:f.printAction,handlePrintNowClick:function(){ot(window.sessionStorage.getItem("print_file_id"))},ref:U}))))}var en=a(400),tn=a(102),an=a.n(tn),nn=a(103),rn=a.n(nn),cn=a(399),on=a(120),ln=a.n(on),sn=a(119),mn=a.n(sn),un=a(189),dn=a.n(un),pn=a(190),gn=a.n(pn),fn=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)}}});function En(e){var t=fn(),a=Object(n.useState)(10),i=Object(o.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),u=m[0],d=m[1],p=function(e){l(e)};Object(n.useEffect)(function(){return tt(function(e){d(e.status)}),at(function(e){d(e)}),function(){mt(),ut()}},[]);var f=function(e){!function(e,t){et.emit(e,t)}(e,c)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{container:!0,item:!0,sm:6,spacing:1},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveForward")}},r.a.createElement(mn.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveLeft")}},r.a.createElement(dn.a,null)),r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveXYHome")}},r.a.createElement(Ue.a,null)),r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveRight")}},r.a.createElement(gn.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveBack")}},r.a.createElement(ln.a,null))))),r.a.createElement(v.a,{container:!0,item:!0,spacing:1,sm:6},r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveUp")}},r.a.createElement(mn.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:!1},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveZHome")}},r.a.createElement(Ue.a,null)))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==u,className:t.button,onClick:function(){return f("moveDown")}},r.a.createElement(ln.a,null)))))),r.a.createElement(v.a,{className:t.lengthSet,container:!0,justify:"center"},r.a.createElement(cn.a,{size:"large",variant:"contained","aria-label":"large contained button group",disabled:"ready"!==u},r.a.createElement(g.a,{color:1===c?"primary":"default",onClick:function(){return p(1)}},"1mm"),r.a.createElement(g.a,{color:10===c?"primary":"default",onClick:function(){return p(10)}},"10mm"),r.a.createElement(g.a,{color:100===c?"primary":"default",onClick:function(){return p(100)}},"100mm"))))}var bn=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,textAlign:"center",width:"100%"},button:Object(le.a)({width:80,height:80,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},e.breakpoints.down("xs"),{width:60,height:60}),title:{marginBottom:e.spacing(3)},lengthSet:{marginTop:e.spacing(2)},settingsButton:{marginBottom:e.spacing(1)},card:Object(le.a)({},e.breakpoints.down("xs"),{width:"90vw"})}});function hn(e){var t=bn(),a=Object(n.useState)(0),i=Object(o.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(""),E=Object(o.a)(p,2),b=E[0],h=E[1],O=Object(n.useState)(""),j=Object(o.a)(O,2),w=j[0],x=j[1],S=Object(n.useState)(""),N=Object(o.a)(S,2),k=N[0],C=N[1],T=Object(n.useState)({hotend:{current:0,set:0},heatbed:{current:0,set:0}}),I=Object(o.a)(T,2),P=I[0],D=I[1];Object(n.useEffect)(function(){return tt(function(e){C(e.status),D(e.temperature)}),at(function(e){C(e)}),nt(function(e){D(e)}),function(){mt(),ut(),dt()}},[]);var R=function(e){l(e),0===e?et.emit("fanOff"):it(u)};return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{container:!0,spacing:4,justify:"center"},r.a.createElement(v.a,{item:!0},r.a.createElement(bt.a,{className:t.card},r.a.createElement(yt.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Fan"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"fanSpeed",className:t.textField,label:"Speed (%)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value&&d(null),e.target.value>0&&e.target.value<=100&&(d(e.target.value),1===c&&it(u))},value:u,disabled:"disconnected"===k})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",color:1===c?"primary":"default",onClick:function(){return R(1)},fullWidth:!0,disabled:"disconnected"===k},"On")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",color:0===c?"primary":"default",onClick:function(){return R(0)},fullWidth:!0,disabled:"disconnected"===k},"Off"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(bt.a,{className:t.card},r.a.createElement(yt.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Extrude/Retract"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"length",className:t.textField,label:"Length (mm)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value&&h(""),e.target.value>0&&e.target.value<=300&&h(e.target.value)},value:b,disabled:"ready"!==k})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==k,size:"small",fullWidth:!0,onClick:function(){var e;e=b,et.emit("extrude",e)}},"Extrude")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",disabled:"ready"!==k,size:"small",fullWidth:!0,onClick:function(){var e;e=b,et.emit("retract",e)}},"Retract"))))),r.a.createElement(v.a,{item:!0},r.a.createElement(bt.a,{className:t.card},r.a.createElement(yt.a,null,r.a.createElement(y.a,{className:t.title,color:"textPrimary",gutterBottom:!0},"Temperature"),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(f.a,{id:"temp",className:t.textField,label:"Temperature (\xb0C)",variant:"outlined",type:"number",fullWidth:!0,onChange:function(e){""===e.target.value?x(""):e.target.value>=0&&e.target.value<=300&&x(e.target.value)},value:w,disabled:"disconnected"===k})),r.a.createElement("div",{className:t.settingsButton},r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){var e;e=w,et.emit("setHeatbedTemperature",e)},disabled:"disconnected"===k},"Set Heatbed ",0!==P.heatbed.set?"("+P.heatbed.set+"\xb0C)":"")),r.a.createElement("div",null,r.a.createElement(g.a,{variant:"contained",size:"small",fullWidth:!0,onClick:function(){var e;e=w,et.emit("setHotendTemperature",e)},disabled:"disconnected"===k},"Set Hotend ",0!==P.hotend.set?"("+P.hotend.set+"\xb0C)":"")))))))}var vn=Object(O.a)(function(e){var t;return{root:(t={width:800},Object(le.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(le.a)(t,"flexGrow",1),Object(le.a)(t,"margin",0),Object(le.a)(t,"textAlign","center"),t),title:{marginBottom:e.spacing(3)},gridItem:Object(le.a)({},e.breakpoints.down("xs"),{width:"100%"}),button:Object(le.a)({},e.breakpoints.up("sm"),{padding:"15.5px 14px"}),logBox:{height:300,marginBottom:"16px",borderRadius:5,background:"#e0e0e0",fontFamily:"Consolas",padding:"10px",color:"#000000",textAlign:"left",overflowY:"scroll"}}});function yn(e){var t=vn(),a=Object(n.useState)(""),i=Object(o.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)([]),m=Object(o.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(""),E=Object(o.a)(p,2),b=E[0],h=E[1],y=Object(n.useRef)();Object(n.useEffect)(function(){var e;return e=function(e){for(var t=[],a=0;a<e.length;a++)t.push({id:a,text:e[a]});d(t),y.current.scrollTop=y.current.scrollHeight},et.on("consoleLog",function(t){return e(t)}),tt(function(e){h(e.status)}),at(function(e){h(e)}),function(){et.off("consoleLog"),mt(),ut()}},[]);return r.a.createElement("div",{className:t.root},r.a.createElement(bt.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(yt.a,{className:t.content},r.a.createElement("div",{className:t.logBox,ref:y},u.map(function(e){return r.a.createElement("span",{key:e.id},e.text,r.a.createElement("br",null))})),r.a.createElement(v.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(v.a,{item:!0,sm:10,className:t.gridItem},r.a.createElement(f.a,{id:"command",className:t.textField,label:"Command",variant:"outlined",type:"text",fullWidth:!0,onChange:function(e){l(e.target.value)},value:c,onKeyDown:function(e){"Enter"===e.key&&""!==c&&rt(c)},disabled:"ready"!==b})),r.a.createElement(v.a,{item:!0,sm:2,className:t.gridItem},r.a.createElement(g.a,{className:t.button,variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){""!==c&&rt(c)},disabled:"ready"!==b},"Send")))))))}var On=Object(O.a)(function(e){return{root:{flexGrow:1,margin:0,width:"100%"},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(1),"px")},controlWindow:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},listItem:{textAlign:"center"}}});function jn(e){var t=On(),a=Object(n.useState)(!0),i=Object(o.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(!1),m=Object(o.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),g=Object(o.a)(p,2),f=g[0],E=g[1];return r.a.createElement("div",{className:t.root},r.a.createElement(Et,{navTitle:"Controls",backTo:"home"},r.a.createElement("div",{className:t.heroContent},r.a.createElement(y.a,{component:"h1",variant:"h3",align:"center",color:"textPrimary",gutterBottom:!0},"Controls")),r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement($t,{printer:e.printer}))))),r.a.createElement(Ne.a,null,r.a.createElement(ke.a,null),r.a.createElement(Ce.a,{button:!0,className:t.listItem,onClick:function(){E(!f)}},r.a.createElement(Ie.a,{primary:"Console",secondary:"Watch the log and send manual commands"}),f?r.a.createElement(an.a,null):r.a.createElement(rn.a,null)),r.a.createElement(en.a,{in:f,timeout:"auto"},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(v.a,{container:!0,className:t.root,spacing:4},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{container:!0,className:t.options,justify:"center",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(yn,null))))))),r.a.createElement(ke.a,null),r.a.createElement(Ce.a,{button:!0,className:t.listItem,onClick:function(){d(!u)}},r.a.createElement(Ie.a,{primary:"Control Settings",secondary:"Set the fan speed, the temperature and extrude or retract"}),u?r.a.createElement(an.a,null):r.a.createElement(rn.a,null)),r.a.createElement(en.a,{in:u,timeout:"auto"},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(hn,null))),r.a.createElement(ke.a,null),r.a.createElement(Ce.a,{button:!0,className:t.listItem,onClick:function(){l(!c)}},r.a.createElement(Ie.a,{primary:"Axis Controls",secondary:"Move the axis of the printer"}),c?r.a.createElement(an.a,null):r.a.createElement(rn.a,null)),r.a.createElement(en.a,{in:c,timeout:"auto"},r.a.createElement("div",{className:t.controlWindow},r.a.createElement(En,null))),r.a.createElement(ke.a,null))))}function wn(){return r.a.createElement(Et,{navTitle:"Info",backTo:"settings"},"Info page")}var xn=a(191),Sn=a.n(xn),Nn=Object(O.a)(function(e){return{root:{textAlign:"center",position:"absolute",top:"50vh",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto"},linearProgress:{marginTop:50,margin:"0 25%"}}});function kn(){var e=Nn();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{src:Sn.a,alt:"Logo",width:150}),r.a.createElement(Rt.a,{className:e.linearProgress}))}var Cn=r.a.createContext({status:null,setStatus:function(){},info:null,setInfo:function(){}}),Tn=Object(O.a)(function(e){return{main:Object(le.a)({width:"auto",display:"block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(3),marginTop:e.spacing(12)},e.breakpoints.up(500+2*e.spacing(3)),{width:500,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},form:{width:"100%",marginTop:e.spacing(1)},textField:{marginLeft:e.spacing(.25),marginRight:e.spacing(.25),marginBottom:0,marginTop:0},submit:{marginTop:e.spacing(3)},heroContent:{marginTop:e.spacing(8),maxWidth:600,margin:"0 auto",padding:"".concat(e.spacing(8),"px 0 ").concat(e.spacing(6),"px")},icon:{fontSize:35},button:{margin:e.spacing(1)},link:{textDecoration:"none"},centering:{display:"flex",flexDirection:"column",alignItems:"center"}}});function In(){var e=Tn(),t=Object(n.useRef)(),a=Object(n.useContext)(Cn),i=Object(n.useState)(""),c=Object(o.a)(i,2),l=c[0],s=c[1],m=Object(n.useState)({error:!1,message:""}),u=Object(o.a)(m,2),p=u[0],E=u[1],b=Object(n.useState)({type:"info",message:""}),v=Object(o.a)(b,2),O=v[0],j=v[1];function x(e){return w.a.isEmpty(e)?(E({error:!0,message:"Please enter a name."}),!1):(E({error:!1,message:""}),!0)}return Object(n.useEffect)(function(){_t.getInfo().then(function(e){I(e)&&s(e.name)})},[]),r.a.createElement(Et,{navTitle:"Printer Settings",backTo:"settings"},r.a.createElement("main",{className:e.main},r.a.createElement(d.a,null),r.a.createElement(y.a,{variant:"h5",align:"center",color:"textPrimary",paragraph:!0},"Printer Details"),r.a.createElement(h.a,{className:e.paper},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault();var n=!0;x(l)||(n=!1),n&&_t.setInfo({name:l}).then(function(e){var n=I(e);n.valid?(a.setInfo({name:e.name}),j({type:"success",message:"Printer Details successfully set."}),t.current.handleOpen()):(j({type:n.type,message:n.message}),t.current.handleOpen())})}},r.a.createElement(Fa.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(f.a,{className:e.textField,type:"text",name:"txtName",autoComplete:"name",margin:"normal",label:"Name",variant:"outlined",value:l,onChange:function(e){s(e.target.value),x(e.target.value)},error:p.error,helperText:p.message})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:!1},"Save")))),r.a.createElement(ie,{message:O.message,variant:O.type,ref:t}))}var Pn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"light"},typography:{useNextVariants:!0}}),Dn=Object(m.a)({palette:{primary:{main:"#0078d7"},secondary:{main:"#ffffff"},type:"dark"},typography:{useNextVariants:!0}});function Rn(){return r.a.createElement(l.a,{exact:!0,to:"/login"})}var _n=function(){var e=Object(n.useState)(null!==window.localStorage.getItem("token")),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),m=Object(o.a)(c,2),p=m[0],g=m[1],f=Object(n.useState)({}),E=Object(o.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)({}),y=Object(o.a)(v,2),O=y[0],j=y[1],w=Object(n.useState)({}),x=Object(o.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)(null!==window.localStorage.getItem("themeMode")?window.localStorage.getItem("themeMode"):"light"),C=Object(o.a)(k,2),T=C[0],I=C[1];return Object(n.useEffect)(function(){null!==window.localStorage.getItem("token")?(_t.getStatus().then(function(e){j(e)}),P.lookup().then(function(e){void 0===e._id?(i(!1),h({authorized:!1}),g(!0)):(i(!0),e.authorized=!0,h(e),g(!0))}),_t.getInfo().then(function(e){N(e)})):(h({authorized:!1}),g(!0))},[]),p?r.a.createElement(Xe.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?Pn:Dn},r.a.createElement(F.Provider,{value:b},r.a.createElement(Cn.Provider,{value:{status:O,setStatus:j,info:S,setInfo:N}},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(d.a,null),a?r.a.createElement("div",null,r.a.createElement(F.Consumer,null,function(e){return r.a.createElement(Cn.Consumer,null,function(t){return r.a.createElement("div",null,r.a.createElement(l.b,{exact:!0,path:"/",render:function(a){return r.a.createElement(pa,{user:e,printer:t})}}),r.a.createElement(l.b,{exact:!0,path:"/controls",render:function(e){return r.a.createElement(jn,{printer:t})}}),r.a.createElement(l.b,{exact:!0,path:"/files",render:function(e){return r.a.createElement($a,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings",render:function(e){return r.a.createElement(ja,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/connection",render:function(e){return r.a.createElement(Ja,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/printer",render:function(e){return r.a.createElement(In,null)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts",render:function(e){return r.a.createElement(Ua,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/accounts/add",render:function(e){return r.a.createElement(Ka,e)}}),r.a.createElement(l.b,{exact:!0,path:"/settings/info",render:function(e){return r.a.createElement(wn,e)}}))})})):r.a.createElement(Rn,null),r.a.createElement(l.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(F.Consumer,null,function(e){return r.a.createElement(oe,{user:e})})}}))))))):r.a.createElement(Xe.Provider,{value:{themeStyle:T,setThemeStyle:I}},r.a.createElement(u.a,{theme:"dark"!==T?Pn:Dn},r.a.createElement(d.a,null),r.a.createElement(kn,null)))},Bn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function An(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(_n,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Bn?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):An(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):An(t,e)})}}()}},[[219,1,2]]]);
//# sourceMappingURL=main.5b4017b4.chunk.js.map